<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: Optimize_table_order Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_optimize__table__order-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Optimize_table_order Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="sql__planner_8h_source.html">sql_planner.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aeb4b85d8adc6db6b246ff36722b79e30"><td class="memItemLeft" align="right" valign="top"><a id="aeb4b85d8adc6db6b246ff36722b79e30"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Optimize_table_order</b> (THD *thd, <a class="el" href="class_j_o_i_n.html">JOIN</a> *join, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *sjm_nest)</td></tr>
<tr class="separator:aeb4b85d8adc6db6b246ff36722b79e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf585184987b0097465505d600394b8f3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#gaf585184987b0097465505d600394b8f3">choose_table_order</a> ()</td></tr>
<tr class="separator:gaf585184987b0097465505d600394b8f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:gaae1f71cbda48f95308f73129c76e12cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#gaae1f71cbda48f95308f73129c76e12cc">best_access_path</a> (<a class="el" href="structst__join__table.html">JOIN_TAB</a> *<a class="el" href="dict0mem_8cc.html#a9ebb0c5278a47b6001b42fdff65f648f">s</a>, table_map remaining_tables, uint idx, bool disable_jbuf, double record_count, <a class="el" href="structst__position.html">POSITION</a> *pos, <a class="el" href="structst__position.html">POSITION</a> *loose_scan_pos)</td></tr>
<tr class="separator:gaae1f71cbda48f95308f73129c76e12cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga40175e89a592caf0dce0b81876c820f1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#ga40175e89a592caf0dce0b81876c820f1">check_interleaving_with_nj</a> (<a class="el" href="structst__join__table.html">JOIN_TAB</a> *next_tab)</td></tr>
<tr class="separator:ga40175e89a592caf0dce0b81876c820f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89a7e995505577ffbc683024366808b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#ga89a7e995505577ffbc683024366808b0">advance_sj_state</a> (table_map remaining_tables, const <a class="el" href="structst__join__table.html">JOIN_TAB</a> *tab, uint idx, double *current_rowcount, double *current_cost, <a class="el" href="structst__position.html">POSITION</a> *loose_scan_pos)</td></tr>
<tr class="separator:ga89a7e995505577ffbc683024366808b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa149d4e4ac91df26688a77c6f2a2c55d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#gaa149d4e4ac91df26688a77c6f2a2c55d">backout_nj_state</a> (const table_map remaining_tables, const <a class="el" href="structst__join__table.html">JOIN_TAB</a> *tab)</td></tr>
<tr class="separator:gaa149d4e4ac91df26688a77c6f2a2c55d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4eb4a2a802676363d5079335af9106d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#gae4eb4a2a802676363d5079335af9106d">optimize_straight_join</a> (table_map join_tables)</td></tr>
<tr class="separator:gae4eb4a2a802676363d5079335af9106d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d0e0e4bba8f362f8b3c60cfb2736559"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#ga1d0e0e4bba8f362f8b3c60cfb2736559">greedy_search</a> (table_map remaining_tables)</td></tr>
<tr class="separator:ga1d0e0e4bba8f362f8b3c60cfb2736559"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7bcfc4f0e53c23266674782781c7a42c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#ga7bcfc4f0e53c23266674782781c7a42c">best_extension_by_limited_search</a> (table_map remaining_tables, uint idx, double record_count, double read_time, uint current_search_depth)</td></tr>
<tr class="separator:ga7bcfc4f0e53c23266674782781c7a42c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae0027ccbdc2fcae194c506c735481d2e"><td class="memItemLeft" align="right" valign="top">table_map&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#gae0027ccbdc2fcae194c506c735481d2e">eq_ref_extension_by_limited_search</a> (table_map remaining_tables, uint idx, double record_count, double read_time, uint current_search_depth)</td></tr>
<tr class="separator:gae0027ccbdc2fcae194c506c735481d2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f0c0a4f6809dffbb4f82b5b563f946d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#ga5f0c0a4f6809dffbb4f82b5b563f946d">consider_plan</a> (uint idx, double record_count, double read_time, <a class="el" href="class_opt__trace__object.html">Opt_trace_object</a> *trace_obj)</td></tr>
<tr class="separator:ga5f0c0a4f6809dffbb4f82b5b563f946d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaba76f383cbe1dccc7c7a6facaf1fe6b8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#gaba76f383cbe1dccc7c7a6facaf1fe6b8">fix_semijoin_strategies</a> ()</td></tr>
<tr class="memdesc:gaba76f383cbe1dccc7c7a6facaf1fe6b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fix semi-join strategies for the picked join order.  <a href="group___query___planner.html#gaba76f383cbe1dccc7c7a6facaf1fe6b8">More...</a><br /></td></tr>
<tr class="separator:gaba76f383cbe1dccc7c7a6facaf1fe6b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8452432379e04249b9b647ec608b3b6b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#ga8452432379e04249b9b647ec608b3b6b">semijoin_firstmatch_loosescan_access_paths</a> (uint first_tab, uint last_tab, table_map remaining_tables, bool loosescan, bool final, double *newcount, double *newcost)</td></tr>
<tr class="separator:ga8452432379e04249b9b647ec608b3b6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81420e7965b6e4a2f13d67ac15d05ec9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#ga81420e7965b6e4a2f13d67ac15d05ec9">semijoin_mat_scan_access_paths</a> (uint last_inner_tab, uint last_outer_tab, table_map remaining_tables, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *sjm_nest, bool final, double *newcount, double *newcost)</td></tr>
<tr class="separator:ga81420e7965b6e4a2f13d67ac15d05ec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0e9baa19f09976372ae2ed2c19d5a7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#gac0e9baa19f09976372ae2ed2c19d5a7d">semijoin_mat_lookup_access_paths</a> (uint last_inner, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *sjm_nest, double *newcount, double *newcost)</td></tr>
<tr class="separator:gac0e9baa19f09976372ae2ed2c19d5a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf8bc9bccf882a55db6cb971dbfbc8d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#gabf8bc9bccf882a55db6cb971dbfbc8d9">semijoin_dupsweedout_access_paths</a> (uint first_tab, uint last_tab, table_map remaining_tables, double *newcount, double *newcost)</td></tr>
<tr class="separator:gabf8bc9bccf882a55db6cb971dbfbc8d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:ga1345da559c5841bf89d657bf2348e230"><td class="memItemLeft" align="right" valign="top">static uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___query___planner.html#ga1345da559c5841bf89d657bf2348e230">determine_search_depth</a> (uint search_depth, uint table_count)</td></tr>
<tr class="separator:ga1345da559c5841bf89d657bf2348e230"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae42f93fe1a0474f0bbc25ddf8088faf9"><td class="memItemLeft" align="right" valign="top"><a id="ae42f93fe1a0474f0bbc25ddf8088faf9"></a>
const uint&#160;</td><td class="memItemRight" valign="bottom"><b>search_depth</b></td></tr>
<tr class="separator:ae42f93fe1a0474f0bbc25ddf8088faf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad26f474753e1dd44e84c85791a25ffda"><td class="memItemLeft" align="right" valign="top"><a id="ad26f474753e1dd44e84c85791a25ffda"></a>
const uint&#160;</td><td class="memItemRight" valign="bottom"><b>prune_level</b></td></tr>
<tr class="separator:ad26f474753e1dd44e84c85791a25ffda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf401fb6739fdab197e80ae9761c0eff"><td class="memItemLeft" align="right" valign="top"><a id="acf401fb6739fdab197e80ae9761c0eff"></a>
THD *const&#160;</td><td class="memItemRight" valign="bottom"><b>thd</b></td></tr>
<tr class="separator:acf401fb6739fdab197e80ae9761c0eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eda75b34b048c3f77df2320be51079e"><td class="memItemLeft" align="right" valign="top"><a id="a1eda75b34b048c3f77df2320be51079e"></a>
<a class="el" href="class_j_o_i_n.html">JOIN</a> *const&#160;</td><td class="memItemRight" valign="bottom"><b>join</b></td></tr>
<tr class="separator:a1eda75b34b048c3f77df2320be51079e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e752e17248e08e2ccbeaf3cf92292a6"><td class="memItemLeft" align="right" valign="top">nested_join_map&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_optimize__table__order.html#a7e752e17248e08e2ccbeaf3cf92292a6">cur_embedding_map</a></td></tr>
<tr class="separator:a7e752e17248e08e2ccbeaf3cf92292a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3178b4c1771e22208df82fe2e8ffd32"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_optimize__table__order.html#ab3178b4c1771e22208df82fe2e8ffd32">emb_sjm_nest</a></td></tr>
<tr class="separator:ab3178b4c1771e22208df82fe2e8ffd32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbfc9fdac20cd88ba3e30aa4de243b13"><td class="memItemLeft" align="right" valign="top">const table_map&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_optimize__table__order.html#afbfc9fdac20cd88ba3e30aa4de243b13">excluded_tables</a></td></tr>
<tr class="separator:afbfc9fdac20cd88ba3e30aa4de243b13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class determines the optimal join order for tables within a basic query block, ie a query specification clause, possibly extended with semi-joined tables from embedded subqueries.</p>
<p>This class takes as prerequisite a join class where all dependencies among tables have been sorted out, all possible access paths have been sorted out, and all statistics information has been filled in.</p>
<p>The class has a sole public function that will calculate the most optimal plan based on the inputs and the environment, such as prune level and greedy optimizer search depth. For more information, see the function headers for the private functions <a class="el" href="group___query___planner.html#ga1d0e0e4bba8f362f8b3c60cfb2736559">greedy_search()</a>, <a class="el" href="group___query___planner.html#ga7bcfc4f0e53c23266674782781c7a42c">best_extension_by_limited_search()</a> and <a class="el" href="group___query___planner.html#gae0027ccbdc2fcae194c506c735481d2e">eq_ref_extension_by_limited_search()</a>. </p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a7e752e17248e08e2ccbeaf3cf92292a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e752e17248e08e2ccbeaf3cf92292a6">&#9670;&nbsp;</a></span>cur_embedding_map</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">nested_join_map Optimize_table_order::cur_embedding_map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="class_bitmap.html">Bitmap</a> of all join nests embedding the last table appended to the current partial join. </p>

</div>
</div>
<a id="ab3178b4c1771e22208df82fe2e8ffd32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3178b4c1771e22208df82fe2e8ffd32">&#9670;&nbsp;</a></span>emb_sjm_nest</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a>* const Optimize_table_order::emb_sjm_nest</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If non-NULL, we are optimizing a materialized semi-join nest. If NULL, we are optimizing a complete join plan. </p>

</div>
</div>
<a id="afbfc9fdac20cd88ba3e30aa4de243b13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbfc9fdac20cd88ba3e30aa4de243b13">&#9670;&nbsp;</a></span>excluded_tables</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const table_map Optimize_table_order::excluded_tables</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>When calculating a plan for a materialized semi-join nest, <a class="el" href="group___query___planner.html#gaae1f71cbda48f95308f73129c76e12cc">best_access_path()</a> needs to know not only the remaining tables within the semi-join nest, but also all tables outside of this nest, because there may be key references between the semi-join nest and the outside tables that should not be considered when materializing the semi-join nest. <code>excluded_tables</code> tracks these tables. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="sql__planner_8h_source.html">sql_planner.h</a></li>
<li>sql/<a class="el" href="sql__planner_8cc.html">sql_planner.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
