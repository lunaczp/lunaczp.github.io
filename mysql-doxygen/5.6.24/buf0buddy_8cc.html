<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: storage/innobase/buf/buf0buddy.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_19e7dc57837d445aa8a255d4d3e40a16.html">buf</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">buf0buddy.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="buf0buddy_8h_source.html">buf0buddy.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buf0buf_8h_source.html">buf0buf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buf0lru_8h_source.html">buf0lru.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buf0flu_8h_source.html">buf0flu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="page0zip_8h_source.html">page0zip.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0start_8h_source.html">srv0start.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_check_zip_free.html">CheckZipFree</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a026ecb225c8ecf49f8a6075a7071a962"><td class="memItemLeft" align="right" valign="top"><a id="a026ecb225c8ecf49f8a6075a7071a962"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>THIS_MODULE</b></td></tr>
<tr class="separator:a026ecb225c8ecf49f8a6075a7071a962"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f32b438660774b5dc9ba5679fde28e5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a5f32b438660774b5dc9ba5679fde28e5">BUF_BUDDY_STAMP_OFFSET</a>&#160;&#160;&#160;<a class="el" href="fil0fil_8h.html#ae0de0429deae04b09d9d19bbb9b4f2ac">FIL_PAGE_ARCH_LOG_NO_OR_SPACE_ID</a></td></tr>
<tr class="separator:a5f32b438660774b5dc9ba5679fde28e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea591dd780263e762dd6a3c11046e558"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#aea591dd780263e762dd6a3c11046e558">BUF_BUDDY_STAMP_FREE</a>&#160;&#160;&#160;(<a class="el" href="srv0start_8h.html#a208e1662b21f41db9cdbf336db45b01b">SRV_LOG_SPACE_FIRST_ID</a>)</td></tr>
<tr class="separator:aea591dd780263e762dd6a3c11046e558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8287b70f09624750b1ae2ed8941a6d52"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a8287b70f09624750b1ae2ed8941a6d52">BUF_BUDDY_STAMP_NONFREE</a>&#160;&#160;&#160;(0XFFFFFFFF)</td></tr>
<tr class="separator:a8287b70f09624750b1ae2ed8941a6d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0742f0e7aad3918311018fea81926efc"><td class="memItemLeft" align="right" valign="top"><a id="a0742f0e7aad3918311018fea81926efc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>buf_buddy_mem_invalid</b>(<a class="el" href="row0merge_8cc.html#ac7f6dbf32ec9428223e605e1b7f87bde">buf</a>,  <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>)&#160;&#160;&#160;<a class="el" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>((<a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>) &lt;= <a class="el" href="buf0types_8h.html#a52b22fcbbf428b283ce3ffbd73be2c4c">BUF_BUDDY_SIZES</a>)</td></tr>
<tr class="separator:a0742f0e7aad3918311018fea81926efc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab12ad35745fb119fad66c165f4a7ff27"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#ab12ad35745fb119fad66c165f4a7ff27">buf_buddy_stamp_nonfree</a>(<a class="el" href="row0merge_8cc.html#ac7f6dbf32ec9428223e605e1b7f87bde">buf</a>,  <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>)</td></tr>
<tr class="separator:ab12ad35745fb119fad66c165f4a7ff27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a273bcb686a09c073cdfff0aaed76ab2a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>BUF_BUDDY_LIST_VALIDATE</b>(bp,  <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>)</td></tr>
<tr class="separator:a273bcb686a09c073cdfff0aaed76ab2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a05e239e44baef98a36e4becaf1d4a77c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a05e239e44baef98a36e4becaf1d4a77c">buf_buddy_state_t</a> { <a class="el" href="buf0buddy_8cc.html#a05e239e44baef98a36e4becaf1d4a77ca9e83213c20f411b34f00cab5fc99af51">BUF_BUDDY_STATE_FREE</a>, 
<a class="el" href="buf0buddy_8cc.html#a05e239e44baef98a36e4becaf1d4a77ca277a958365d4f7c756d74ce3d4643354">BUF_BUDDY_STATE_USED</a>, 
<a class="el" href="buf0buddy_8cc.html#a05e239e44baef98a36e4becaf1d4a77ca4738435f95ac13c557a9805ccd39630b">BUF_BUDDY_STATE_PARTIALLY_USED</a>
 }</td></tr>
<tr class="separator:a05e239e44baef98a36e4becaf1d4a77c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0e0bbc97ea1003a40ea655a28eb8e12d"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a0e0bbc97ea1003a40ea655a28eb8e12d">__attribute__</a> ((warn_unused_result)) bool buf_buddy_stamp_is_free(const <a class="el" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a> *<a class="el" href="row0merge_8cc.html#ac7f6dbf32ec9428223e605e1b7f87bde">buf</a>)</td></tr>
<tr class="separator:a0e0bbc97ea1003a40ea655a28eb8e12d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6de053c39be91e8d38273ff19ce04d31"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a6de053c39be91e8d38273ff19ce04d31">buf_buddy_stamp_free</a> (<a class="el" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a> *<a class="el" href="row0merge_8cc.html#ac7f6dbf32ec9428223e605e1b7f87bde">buf</a>, ulint <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>)</td></tr>
<tr class="separator:a6de053c39be91e8d38273ff19ce04d31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad61475a0cac75ccf4c0bc0bef4fcb701"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#ad61475a0cac75ccf4c0bc0bef4fcb701">buf_buddy_get</a> (byte *<a class="el" href="fsp0fsp_8cc.html#a69e3109c6b8c8d21dfc851e276de8389">page</a>, ulint <a class="el" href="srv0start_8cc.html#aa2ba5a514c395b398630a3d7791561bc">size</a>)</td></tr>
<tr class="separator:ad61475a0cac75ccf4c0bc0bef4fcb701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3cf2cfaac3e4c1c159af3dd0f3695e3"><td class="memItemLeft" align="right" valign="top"><a id="af3cf2cfaac3e4c1c159af3dd0f3695e3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>return</b> (<a class="el" href="row0merge_8cc.html#ac7f6dbf32ec9428223e605e1b7f87bde">buf</a>-&gt;<a class="el" href="srv0start_8cc.html#aa2ba5a514c395b398630a3d7791561bc">stamp.size</a>==<a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a> ? <a class="el" href="buf0buddy_8cc.html#a05e239e44baef98a36e4becaf1d4a77ca9e83213c20f411b34f00cab5fc99af51">BUF_BUDDY_STATE_FREE</a> :<a class="el" href="buf0buddy_8cc.html#a05e239e44baef98a36e4becaf1d4a77ca4738435f95ac13c557a9805ccd39630b">BUF_BUDDY_STATE_PARTIALLY_USED</a>)</td></tr>
<tr class="separator:af3cf2cfaac3e4c1c159af3dd0f3695e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c137afeab36f2d32764079ed787e0b"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#aa3c137afeab36f2d32764079ed787e0b">buf_buddy_add_to_free</a> (<a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, <a class="el" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a> *<a class="el" href="row0merge_8cc.html#ac7f6dbf32ec9428223e605e1b7f87bde">buf</a>, ulint <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>)</td></tr>
<tr class="separator:aa3c137afeab36f2d32764079ed787e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a37dbf6c8b5e9a57409053b63da63a8"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a0a37dbf6c8b5e9a57409053b63da63a8">buf_buddy_remove_from_free</a> (<a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, <a class="el" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a> *<a class="el" href="row0merge_8cc.html#ac7f6dbf32ec9428223e605e1b7f87bde">buf</a>, ulint <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>)</td></tr>
<tr class="separator:a0a37dbf6c8b5e9a57409053b63da63a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a315000105ee749ca887c27931e3ea82a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a315000105ee749ca887c27931e3ea82a">buf_buddy_alloc_zip</a> (<a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, ulint <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>)</td></tr>
<tr class="separator:a315000105ee749ca887c27931e3ea82a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c0a809a3f02061918f7809e80293a87"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a3c0a809a3f02061918f7809e80293a87">buf_buddy_block_free</a> (<a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, void *<a class="el" href="row0merge_8cc.html#ac7f6dbf32ec9428223e605e1b7f87bde">buf</a>)</td></tr>
<tr class="separator:a3c0a809a3f02061918f7809e80293a87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99334769246743018b31d9e4bb6fe763"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a99334769246743018b31d9e4bb6fe763">buf_buddy_block_register</a> (<a class="el" href="structbuf__block__t.html">buf_block_t</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>)</td></tr>
<tr class="separator:a99334769246743018b31d9e4bb6fe763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fa9ce6690d80c14c18e47fa440599fc"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a1fa9ce6690d80c14c18e47fa440599fc">buf_buddy_alloc_from</a> (<a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, void *<a class="el" href="row0merge_8cc.html#ac7f6dbf32ec9428223e605e1b7f87bde">buf</a>, ulint <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>, ulint j)</td></tr>
<tr class="separator:a1fa9ce6690d80c14c18e47fa440599fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1fb5d0bc8cea0ee3f2e5b2ed28ac47"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#acc1fb5d0bc8cea0ee3f2e5b2ed28ac47">buf_buddy_alloc_low</a> (<a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, ulint <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>, ibool *lru)</td></tr>
<tr class="separator:acc1fb5d0bc8cea0ee3f2e5b2ed28ac47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eaa236f27ef9d9fdef09d401505ee5c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a2eaa236f27ef9d9fdef09d401505ee5c">buf_buddy_relocate</a> (<a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, void *src, void *dst, ulint <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>)</td></tr>
<tr class="separator:a2eaa236f27ef9d9fdef09d401505ee5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26e62dc0060dd66655887cfb56e34de1"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a26e62dc0060dd66655887cfb56e34de1">buf_buddy_free_low</a> (<a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, void *<a class="el" href="row0merge_8cc.html#ac7f6dbf32ec9428223e605e1b7f87bde">buf</a>, ulint <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>)</td></tr>
<tr class="separator:a26e62dc0060dd66655887cfb56e34de1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a303adcc1d2d4784f47305cea9986649c"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0buddy_8cc.html#a303adcc1d2d4784f47305cea9986649c">i</a></td></tr>
<tr class="separator:a303adcc1d2d4784f47305cea9986649c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Binary buddy allocator for compressed pages</p>
<p>Created December 2006 by Marko Makela </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a273bcb686a09c073cdfff0aaed76ab2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a273bcb686a09c073cdfff0aaed76ab2a">&#9670;&nbsp;</a></span>BUF_BUDDY_LIST_VALIDATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUF_BUDDY_LIST_VALIDATE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bp, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="ut0lst_8h.html#a5ee5232f03e6e636f791bd9ddf0ee899">UT_LIST_VALIDATE</a>(list, <a class="code" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a>,                \</div><div class="line">                         bp-&gt;zip_free[<a class="code" href="buf0buddy_8cc.html#a303adcc1d2d4784f47305cea9986649c">i</a>], <a class="code" href="struct_check_zip_free.html">CheckZipFree</a>(<a class="code" href="buf0buddy_8cc.html#a303adcc1d2d4784f47305cea9986649c">i</a>))</div><div class="ttc" id="struct_check_zip_free_html"><div class="ttname"><a href="struct_check_zip_free.html">CheckZipFree</a></div><div class="ttdef"><b>Definition:</b> buf0buddy.cc:178</div></div>
<div class="ttc" id="buf0buddy_8cc_html_a303adcc1d2d4784f47305cea9986649c"><div class="ttname"><a href="buf0buddy_8cc.html#a303adcc1d2d4784f47305cea9986649c">i</a></div><div class="ttdeci">static ulint i</div><div class="ttdef"><b>Definition:</b> buf0buddy.cc:235</div></div>
<div class="ttc" id="ut0lst_8h_html_a5ee5232f03e6e636f791bd9ddf0ee899"><div class="ttname"><a href="ut0lst_8h.html#a5ee5232f03e6e636f791bd9ddf0ee899">UT_LIST_VALIDATE</a></div><div class="ttdeci">#define UT_LIST_VALIDATE(NAME, TYPE, LIST, FUNCTOR)</div><div class="ttdef"><b>Definition:</b> ut0lst.h:402</div></div>
<div class="ttc" id="structbuf__buddy__free__t_html"><div class="ttname"><a href="structbuf__buddy__free__t.html">buf_buddy_free_t</a></div><div class="ttdef"><b>Definition:</b> buf0buf.h:1777</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aea591dd780263e762dd6a3c11046e558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea591dd780263e762dd6a3c11046e558">&#9670;&nbsp;</a></span>BUF_BUDDY_STAMP_FREE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUF_BUDDY_STAMP_FREE&#160;&#160;&#160;(<a class="el" href="srv0start_8h.html#a208e1662b21f41db9cdbf336db45b01b">SRV_LOG_SPACE_FIRST_ID</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Value that we stamp on all buffers that are currently on the zip_free list. This value is stamped at BUF_BUDDY_STAMP_OFFSET offset </p>

</div>
</div>
<a id="a8287b70f09624750b1ae2ed8941a6d52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8287b70f09624750b1ae2ed8941a6d52">&#9670;&nbsp;</a></span>BUF_BUDDY_STAMP_NONFREE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUF_BUDDY_STAMP_NONFREE&#160;&#160;&#160;(0XFFFFFFFF)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stamp value for non-free buffers. Will be overwritten by a non-zero value by the consumer of the block </p>

</div>
</div>
<a id="ab12ad35745fb119fad66c165f4a7ff27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab12ad35745fb119fad66c165f4a7ff27">&#9670;&nbsp;</a></span>buf_buddy_stamp_nonfree</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define buf_buddy_stamp_nonfree</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="row0merge_8cc.html#ac7f6dbf32ec9428223e605e1b7f87bde">buf</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                            \</div><div class="line">        buf_buddy_mem_invalid(<a class="code" href="dict0load_8cc.html#aae30f95c2598d5fd4ffbc2ea0a34415b">buf</a>, <a class="code" href="buf0buddy_8cc.html#a303adcc1d2d4784f47305cea9986649c">i</a>);                                  \</div><div class="line">        memset(<a class="code" href="dict0load_8cc.html#aae30f95c2598d5fd4ffbc2ea0a34415b">buf</a>-&gt;stamp.bytes + <a class="code" href="buf0buddy_8cc.html#a5f32b438660774b5dc9ba5679fde28e5">BUF_BUDDY_STAMP_OFFSET</a>, 0xff, 4);     \</div><div class="line">} <span class="keywordflow">while</span> (0)</div><div class="ttc" id="buf0buddy_8cc_html_a5f32b438660774b5dc9ba5679fde28e5"><div class="ttname"><a href="buf0buddy_8cc.html#a5f32b438660774b5dc9ba5679fde28e5">BUF_BUDDY_STAMP_OFFSET</a></div><div class="ttdeci">#define BUF_BUDDY_STAMP_OFFSET</div><div class="ttdef"><b>Definition:</b> buf0buddy.cc:70</div></div>
<div class="ttc" id="dict0load_8cc_html_aae30f95c2598d5fd4ffbc2ea0a34415b"><div class="ttname"><a href="dict0load_8cc.html#aae30f95c2598d5fd4ffbc2ea0a34415b">buf</a></div><div class="ttdeci">byte * buf</div><div class="ttdef"><b>Definition:</b> dict0load.cc:1802</div></div>
<div class="ttc" id="buf0buddy_8cc_html_a303adcc1d2d4784f47305cea9986649c"><div class="ttname"><a href="buf0buddy_8cc.html#a303adcc1d2d4784f47305cea9986649c">i</a></div><div class="ttdeci">static ulint i</div><div class="ttdef"><b>Definition:</b> buf0buddy.cc:235</div></div>
</div><!-- fragment --><p>Stamps a buddy nonfree. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5f32b438660774b5dc9ba5679fde28e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f32b438660774b5dc9ba5679fde28e5">&#9670;&nbsp;</a></span>BUF_BUDDY_STAMP_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUF_BUDDY_STAMP_OFFSET&#160;&#160;&#160;<a class="el" href="fil0fil_8h.html#ae0de0429deae04b09d9d19bbb9b4f2ac">FIL_PAGE_ARCH_LOG_NO_OR_SPACE_ID</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When freeing a buf we attempt to coalesce by looking at its buddy and deciding whether it is free or not. To ascertain if the buddy is free we look for BUF_BUDDY_STAMP_FREE at BUF_BUDDY_STAMP_OFFSET within the buddy. The question is how we can be sure that it is safe to look at BUF_BUDDY_STAMP_OFFSET. The answer lies in following invariants: All blocks allocated by buddy allocator are used for compressed page frame. A compressed table always have space_id &lt; SRV_LOG_SPACE_FIRST_ID BUF_BUDDY_STAMP_OFFSET always points to the space_id field in a frame. &ndash; The above is true because we look at these fields when the corresponding buddy block is free which implies that: The block we are looking at must have an address aligned at the same size that its free buddy has. For example, if we have a free block of 8K then its buddy's address must be aligned at 8K as well. It is possible that the block we are looking at may have been further divided into smaller sized blocks but its starting address must still remain the start of a page frame i.e.: it cannot be middle of a block. For example, if we have a free block of size 8K then its buddy may be divided into blocks of, say, 1K, 1K, 2K, 4K but the buddy's address will still be the starting address of first 1K compressed page. What is important to note is that for any given block, the buddy's address cannot be in the middle of a larger block i.e.: in above example, our 8K block cannot have a buddy whose address is aligned on 8K but it is part of a larger 16K block. Offset within <a class="el" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a> where free or non_free stamps are written. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a05e239e44baef98a36e4becaf1d4a77c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05e239e44baef98a36e4becaf1d4a77c">&#9670;&nbsp;</a></span>buf_buddy_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="buf0buddy_8cc.html#a05e239e44baef98a36e4becaf1d4a77c">buf_buddy_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return type of buf_buddy_is_free() </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a05e239e44baef98a36e4becaf1d4a77ca9e83213c20f411b34f00cab5fc99af51"></a>BUF_BUDDY_STATE_FREE&#160;</td><td class="fielddoc"><p>If the buddy to completely free </p>
</td></tr>
<tr><td class="fieldname"><a id="a05e239e44baef98a36e4becaf1d4a77ca277a958365d4f7c756d74ce3d4643354"></a>BUF_BUDDY_STATE_USED&#160;</td><td class="fielddoc"><p>Buddy currently in used </p>
</td></tr>
<tr><td class="fieldname"><a id="a05e239e44baef98a36e4becaf1d4a77ca4738435f95ac13c557a9805ccd39630b"></a>BUF_BUDDY_STATE_PARTIALLY_USED&#160;</td><td class="fielddoc"><p>Some sub-blocks in the buddy are in use </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0e0bbc97ea1003a40ea655a28eb8e12d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e0bbc97ea1003a40ea655a28eb8e12d">&#9670;&nbsp;</a></span>__attribute__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(warn_unused_result)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="struct_check.html">Check</a> if a buddy is stamped free. </p><dl class="section return"><dt>Returns</dt><dd>whether the buddy is free</dd></dl>
<p>&lt; in: block to check</p>
<p>Checks if a buf is free i.e.: in the zip_free[]. </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BUF_BUDDY_STATE_FREE</td><td>if fully free </td></tr>
    <tr><td class="paramname">BUF_BUDDY_STATE_USED</td><td>if currently in use </td></tr>
    <tr><td class="paramname">BUF_BUDDY_STATE_PARTIALLY_USED</td><td>if partially in use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa3c137afeab36f2d32764079ed787e0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3c137afeab36f2d32764079ed787e0b">&#9670;&nbsp;</a></span>buf_buddy_add_to_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void buf_buddy_add_to_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *&#160;</td>
          <td class="paramname"><em>buf_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a block to the head of the appropriate buddy free list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf_pool</td><td>in: buffer pool instance </td></tr>
    <tr><td class="paramname">buf</td><td>in,own: block to be freed </td></tr>
    <tr><td class="paramname">i</td><td>in: index of buf_pool-&gt;zip_free[] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1fa9ce6690d80c14c18e47fa440599fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fa9ce6690d80c14c18e47fa440599fc">&#9670;&nbsp;</a></span>buf_buddy_alloc_from()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* buf_buddy_alloc_from </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *&#160;</td>
          <td class="paramname"><em>buf_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>j</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Allocate a block from a bigger object. </p><dl class="section return"><dt>Returns</dt><dd>allocated block </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf_pool</td><td>in: buffer pool instance </td></tr>
    <tr><td class="paramname">buf</td><td>in: a block that is free to use </td></tr>
    <tr><td class="paramname">i</td><td>in: index of buf_pool-&gt;zip_free[] </td></tr>
    <tr><td class="paramname">j</td><td>in: size of buf as an index of buf_pool-&gt;zip_free[] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acc1fb5d0bc8cea0ee3f2e5b2ed28ac47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc1fb5d0bc8cea0ee3f2e5b2ed28ac47">&#9670;&nbsp;</a></span>buf_buddy_alloc_low()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void* buf_buddy_alloc_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *&#160;</td>
          <td class="paramname"><em>buf_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool *&#160;</td>
          <td class="paramname"><em>lru</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate a block. The thread calling this function must hold buf_pool-&gt;mutex and must not hold buf_pool-&gt;zip_mutex or any block-&gt;mutex. The buf_pool_mutex may be released and reacquired. </p><dl class="section return"><dt>Returns</dt><dd>allocated block, never NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf_pool</td><td>in/out: buffer pool instance </td></tr>
    <tr><td class="paramname">i</td><td>in: index of buf_pool-&gt;zip_free[], or BUF_BUDDY_SIZES </td></tr>
    <tr><td class="paramname">lru</td><td>in: pointer to a variable that will be assigned TRUE if storage was allocated from the LRU list and buf_pool-&gt;mutex was temporarily released </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a315000105ee749ca887c27931e3ea82a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a315000105ee749ca887c27931e3ea82a">&#9670;&nbsp;</a></span>buf_buddy_alloc_zip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a>* buf_buddy_alloc_zip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *&#160;</td>
          <td class="paramname"><em>buf_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Try to allocate a block from buf_pool-&gt;zip_free[]. </p><dl class="section return"><dt>Returns</dt><dd>allocated block, or NULL if buf_pool-&gt;zip_free[] was empty </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf_pool</td><td>in: buffer pool instance </td></tr>
    <tr><td class="paramname">i</td><td>in: index of buf_pool-&gt;zip_free[] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3c0a809a3f02061918f7809e80293a87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c0a809a3f02061918f7809e80293a87">&#9670;&nbsp;</a></span>buf_buddy_block_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void buf_buddy_block_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *&#160;</td>
          <td class="paramname"><em>buf_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Deallocate a buffer frame of UNIV_PAGE_SIZE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf_pool</td><td>in: buffer pool instance </td></tr>
    <tr><td class="paramname">buf</td><td>in: buffer frame to deallocate </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a99334769246743018b31d9e4bb6fe763"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99334769246743018b31d9e4bb6fe763">&#9670;&nbsp;</a></span>buf_buddy_block_register()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void buf_buddy_block_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Allocate a buffer block to the buddy allocator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>in: buffer frame to allocate </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a26e62dc0060dd66655887cfb56e34de1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26e62dc0060dd66655887cfb56e34de1">&#9670;&nbsp;</a></span>buf_buddy_free_low()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void buf_buddy_free_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *&#160;</td>
          <td class="paramname"><em>buf_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocate a block. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf_pool</td><td>in: buffer pool instance </td></tr>
    <tr><td class="paramname">buf</td><td>in: block to be freed, must not be pointed to by the buffer pool </td></tr>
    <tr><td class="paramname">i</td><td>in: index of buf_pool-&gt;zip_free[], or BUF_BUDDY_SIZES </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad61475a0cac75ccf4c0bc0bef4fcb701"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad61475a0cac75ccf4c0bc0bef4fcb701">&#9670;&nbsp;</a></span>buf_buddy_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void* buf_buddy_get </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the offset of the buddy of a compressed page frame. </p><dl class="section return"><dt>Returns</dt><dd>the buddy relative of page </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>in: compressed page </td></tr>
    <tr><td class="paramname">size</td><td>in: page size in bytes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2eaa236f27ef9d9fdef09d401505ee5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eaa236f27ef9d9fdef09d401505ee5c">&#9670;&nbsp;</a></span>buf_buddy_relocate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool buf_buddy_relocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *&#160;</td>
          <td class="paramname"><em>buf_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Try to relocate a block. </p><dl class="section return"><dt>Returns</dt><dd>true if relocated </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf_pool</td><td>in: buffer pool instance </td></tr>
    <tr><td class="paramname">src</td><td>in: block to relocate </td></tr>
    <tr><td class="paramname">dst</td><td>in: free block to relocate to </td></tr>
    <tr><td class="paramname">i</td><td>in: index of buf_pool-&gt;zip_free[] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0a37dbf6c8b5e9a57409053b63da63a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a37dbf6c8b5e9a57409053b63da63a8">&#9670;&nbsp;</a></span>buf_buddy_remove_from_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void buf_buddy_remove_from_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__pool__t.html">buf_pool_t</a> *&#160;</td>
          <td class="paramname"><em>buf_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove a block from the appropriate buddy free list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf_pool</td><td>in: buffer pool instance </td></tr>
    <tr><td class="paramname">buf</td><td>in,own: block to be freed </td></tr>
    <tr><td class="paramname">i</td><td>in: index of buf_pool-&gt;zip_free[] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6de053c39be91e8d38273ff19ce04d31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6de053c39be91e8d38273ff19ce04d31">&#9670;&nbsp;</a></span>buf_buddy_stamp_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void buf_buddy_stamp_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stamps a buddy free. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>in/out: block to stamp </td></tr>
    <tr><td class="paramname">i</td><td>in: block size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a303adcc1d2d4784f47305cea9986649c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a303adcc1d2d4784f47305cea9986649c">&#9670;&nbsp;</a></span>i</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const ulint i</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line">        </div><div class="line"></div><div class="line">        </div><div class="line">        <span class="keywordflow">if</span> (!buf_buddy_stamp_is_free(<a class="code" href="dict0load_8cc.html#aae30f95c2598d5fd4ffbc2ea0a34415b">buf</a>)) {</div><div class="line">                <span class="keywordflow">return</span>(<a class="code" href="buf0buddy_8cc.html#a05e239e44baef98a36e4becaf1d4a77ca277a958365d4f7c756d74ce3d4643354">BUF_BUDDY_STATE_USED</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        </div><div class="line">        <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="dict0load_8cc.html#aae30f95c2598d5fd4ffbc2ea0a34415b">buf</a>-&gt;stamp.size &lt;= <a class="code" href="buf0buddy_8cc.html#a303adcc1d2d4784f47305cea9986649c">i</a>)</div><div class="ttc" id="dict0load_8cc_html_aae30f95c2598d5fd4ffbc2ea0a34415b"><div class="ttname"><a href="dict0load_8cc.html#aae30f95c2598d5fd4ffbc2ea0a34415b">buf</a></div><div class="ttdeci">byte * buf</div><div class="ttdef"><b>Definition:</b> dict0load.cc:1802</div></div>
<div class="ttc" id="buf0buddy_8cc_html_a303adcc1d2d4784f47305cea9986649c"><div class="ttname"><a href="buf0buddy_8cc.html#a303adcc1d2d4784f47305cea9986649c">i</a></div><div class="ttdeci">static ulint i</div><div class="ttdef"><b>Definition:</b> buf0buddy.cc:235</div></div>
<div class="ttc" id="ut0dbg_8h_html_a17113dab7f37e298e889ac8818ab13d0"><div class="ttname"><a href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a></div><div class="ttdeci">#define ut_ad(EXPR)</div><div class="ttdef"><b>Definition:</b> ut0dbg.h:90</div></div>
<div class="ttc" id="buf0buddy_8cc_html_a05e239e44baef98a36e4becaf1d4a77ca277a958365d4f7c756d74ce3d4643354"><div class="ttname"><a href="buf0buddy_8cc.html#a05e239e44baef98a36e4becaf1d4a77ca277a958365d4f7c756d74ce3d4643354">BUF_BUDDY_STATE_USED</a></div><div class="ttdef"><b>Definition:</b> buf0buddy.cc:87</div></div>
</div><!-- fragment --><p>&lt; in: block to check</p>
<p>&lt; in: index of buf_pool-&gt;zip_free[] </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
