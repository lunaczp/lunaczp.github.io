<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: MDL_ticket Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_m_d_l__ticket-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MDL_ticket Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="mdl_8h_source.html">mdl.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MDL_ticket:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_m_d_l__ticket.png" usemap="#MDL_5Fticket_map" alt=""/>
  <map id="MDL_5Fticket_map" name="MDL_5Fticket_map">
<area href="class_m_d_l__wait__for__subgraph.html" alt="MDL_wait_for_subgraph" shape="rect" coords="0,0,151,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a453c69eade5322291a6b3df6833892d5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#a453c69eade5322291a6b3df6833892d5">has_pending_conflicting_lock</a> () const</td></tr>
<tr class="separator:a453c69eade5322291a6b3df6833892d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b0c1bd15feca45b1b67791de5a3a027"><td class="memItemLeft" align="right" valign="top"><a id="a2b0c1bd15feca45b1b67791de5a3a027"></a>
<a class="el" href="class_m_d_l__context.html">MDL_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>get_ctx</b> () const</td></tr>
<tr class="separator:a2b0c1bd15feca45b1b67791de5a3a027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dd08e1eb3ca1bd5842cdb028bcfc5cd"><td class="memItemLeft" align="right" valign="top"><a id="a8dd08e1eb3ca1bd5842cdb028bcfc5cd"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_upgradable_or_exclusive</b> () const</td></tr>
<tr class="separator:a8dd08e1eb3ca1bd5842cdb028bcfc5cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87cffc63ead6571484ac6f142f0b19f"><td class="memItemLeft" align="right" valign="top"><a id="ad87cffc63ead6571484ac6f142f0b19f"></a>
enum_mdl_type&#160;</td><td class="memItemRight" valign="bottom"><b>get_type</b> () const</td></tr>
<tr class="separator:ad87cffc63ead6571484ac6f142f0b19f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb8547f86d05a1eb3990834edc7af9a0"><td class="memItemLeft" align="right" valign="top"><a id="aeb8547f86d05a1eb3990834edc7af9a0"></a>
<a class="el" href="class_m_d_l__lock.html">MDL_lock</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>get_lock</b> () const</td></tr>
<tr class="separator:aeb8547f86d05a1eb3990834edc7af9a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fd3f255fe828cbf0d95a5d02d70d302"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#a4fd3f255fe828cbf0d95a5d02d70d302">downgrade_lock</a> (enum_mdl_type <a class="el" href="trx0undo_8cc.html#a6093ca66dd564a9c407d64ce43838c28">type</a>)</td></tr>
<tr class="separator:a4fd3f255fe828cbf0d95a5d02d70d302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db14474f09df6e82fe7db48cc4463df"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#a3db14474f09df6e82fe7db48cc4463df">has_stronger_or_equal_type</a> (enum_mdl_type <a class="el" href="trx0undo_8cc.html#a6093ca66dd564a9c407d64ce43838c28">type</a>) const</td></tr>
<tr class="separator:a3db14474f09df6e82fe7db48cc4463df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bdbcd1e0281b6ebfe11d6e132cc9e4f"><td class="memItemLeft" align="right" valign="top"><a id="a7bdbcd1e0281b6ebfe11d6e132cc9e4f"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_incompatible_when_granted</b> (enum_mdl_type <a class="el" href="trx0undo_8cc.html#a6093ca66dd564a9c407d64ce43838c28">type</a>) const</td></tr>
<tr class="separator:a7bdbcd1e0281b6ebfe11d6e132cc9e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ee3c2a726b128b58ef8121f00970378"><td class="memItemLeft" align="right" valign="top"><a id="a6ee3c2a726b128b58ef8121f00970378"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_incompatible_when_waiting</b> (enum_mdl_type <a class="el" href="trx0undo_8cc.html#a6093ca66dd564a9c407d64ce43838c28">type</a>) const</td></tr>
<tr class="separator:a6ee3c2a726b128b58ef8121f00970378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1bd23371e97d8bf6b0ff9de43e7e418"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#af1bd23371e97d8bf6b0ff9de43e7e418">accept_visitor</a> (<a class="el" href="class_m_d_l__wait__for__graph__visitor.html">MDL_wait_for_graph_visitor</a> *dvisitor)</td></tr>
<tr class="separator:af1bd23371e97d8bf6b0ff9de43e7e418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3cbfd4b31f7715eae746904e840a02"><td class="memItemLeft" align="right" valign="top">virtual uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#a9f3cbfd4b31f7715eae746904e840a02">get_deadlock_weight</a> () const</td></tr>
<tr class="separator:a9f3cbfd4b31f7715eae746904e840a02"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a74155707577dfd12cc7f47229e4f0d17"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#a74155707577dfd12cc7f47229e4f0d17">next_in_context</a></td></tr>
<tr class="separator:a74155707577dfd12cc7f47229e4f0d17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88281cdb21f74551799ae0940b89aed1"><td class="memItemLeft" align="right" valign="top"><a id="a88281cdb21f74551799ae0940b89aed1"></a>
<a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> **&#160;</td><td class="memItemRight" valign="bottom"><b>prev_in_context</b></td></tr>
<tr class="separator:a88281cdb21f74551799ae0940b89aed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c009e5c097d2159dd142aa7f58e010"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#ad9c009e5c097d2159dd142aa7f58e010">next_in_lock</a></td></tr>
<tr class="separator:ad9c009e5c097d2159dd142aa7f58e010"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a873d87712e75f3e7f58399575571198d"><td class="memItemLeft" align="right" valign="top"><a id="a873d87712e75f3e7f58399575571198d"></a>
<a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> **&#160;</td><td class="memItemRight" valign="bottom"><b>prev_in_lock</b></td></tr>
<tr class="separator:a873d87712e75f3e7f58399575571198d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a51ae7b84f5a61ecf3ae411ee1431f71f"><td class="memItemLeft" align="right" valign="top"><a id="a51ae7b84f5a61ecf3ae411ee1431f71f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>MDL_ticket</b> (<a class="el" href="class_m_d_l__context.html">MDL_context</a> *ctx_arg, enum_mdl_type type_arg, enum_mdl_duration duration_arg)</td></tr>
<tr class="separator:a51ae7b84f5a61ecf3ae411ee1431f71f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cbd8b0056f1abc381e3dc609dca25fe"><td class="memItemLeft" align="right" valign="top"><a id="a3cbd8b0056f1abc381e3dc609dca25fe"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>MDL_ticket</b> (const <a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> &amp;)</td></tr>
<tr class="separator:a3cbd8b0056f1abc381e3dc609dca25fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46195fa8e13cba123d08c70350f86cb4"><td class="memItemLeft" align="right" valign="top"><a id="a46195fa8e13cba123d08c70350f86cb4"></a>
<a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> &amp;)</td></tr>
<tr class="separator:a46195fa8e13cba123d08c70350f86cb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:aeb3ea2a00b6f11c07c18483de8c69060"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#aeb3ea2a00b6f11c07c18483de8c69060">create</a> (<a class="el" href="class_m_d_l__context.html">MDL_context</a> *ctx_arg, enum_mdl_type type_arg, enum_mdl_duration duration_arg)</td></tr>
<tr class="separator:aeb3ea2a00b6f11c07c18483de8c69060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f998c14272dca10b35967828708542d"><td class="memItemLeft" align="right" valign="top"><a id="a5f998c14272dca10b35967828708542d"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>destroy</b> (<a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> *ticket)</td></tr>
<tr class="separator:a5f998c14272dca10b35967828708542d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a027686d37b2f7f1af7d9aaa6acd48448"><td class="memItemLeft" align="right" valign="top">enum enum_mdl_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#a027686d37b2f7f1af7d9aaa6acd48448">m_type</a></td></tr>
<tr class="separator:a027686d37b2f7f1af7d9aaa6acd48448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa81a40be82b1e8015e3c0be5c99d5d72"><td class="memItemLeft" align="right" valign="top">enum_mdl_duration&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#aa81a40be82b1e8015e3c0be5c99d5d72">m_duration</a></td></tr>
<tr class="separator:aa81a40be82b1e8015e3c0be5c99d5d72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae06e96fbda7d5f2ad5a15e583a415f91"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_d_l__context.html">MDL_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#ae06e96fbda7d5f2ad5a15e583a415f91">m_ctx</a></td></tr>
<tr class="separator:ae06e96fbda7d5f2ad5a15e583a415f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac31749048c6f9a807473ef2849bda7fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_d_l__lock.html">MDL_lock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_d_l__ticket.html#ac31749048c6f9a807473ef2849bda7fb">m_lock</a></td></tr>
<tr class="separator:ac31749048c6f9a807473ef2849bda7fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:aab25f1f33d2f55eb5c79f0f7b6bfaecd"><td class="memItemLeft" align="right" valign="top"><a id="aab25f1f33d2f55eb5c79f0f7b6bfaecd"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>MDL_context</b></td></tr>
<tr class="separator:aab25f1f33d2f55eb5c79f0f7b6bfaecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_class_m_d_l__wait__for__subgraph"><td colspan="2" onclick="javascript:toggleInherit('pub_types_class_m_d_l__wait__for__subgraph')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="class_m_d_l__wait__for__subgraph.html">MDL_wait_for_subgraph</a></td></tr>
<tr class="memitem:acfae536effc3a259c78aaae2cc5dc576 inherit pub_types_class_m_d_l__wait__for__subgraph"><td class="memItemLeft" align="right" valign="top"><a id="acfae536effc3a259c78aaae2cc5dc576"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>enum_deadlock_weight</b> { <b>DEADLOCK_WEIGHT_DML</b> = 0, 
<b>DEADLOCK_WEIGHT_DDL</b> = 100
 }</td></tr>
<tr class="separator:acfae536effc3a259c78aaae2cc5dc576 inherit pub_types_class_m_d_l__wait__for__subgraph"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A granted metadata lock.</p>
<dl class="section warning"><dt>Warning</dt><dd><a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> members are private to the MDL subsystem.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Multiple shared locks on a same object are represented by a single ticket. The same does not apply for other lock types.</dd>
<dd>
There are two groups of <a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> members:<ul>
<li>"Externally accessible". These members can be accessed from threads/contexts different than ticket owner in cases when ticket participates in some list of granted or waiting tickets for a lock. Therefore one should change these members before including then to waiting/granted lists or while holding lock protecting those lists.</li>
<li>"Context private". Such members are private to thread/context owning this ticket. I.e. they should not be accessed from other threads/contexts. </li>
</ul>
</dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af1bd23371e97d8bf6b0ff9de43e7e418"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1bd23371e97d8bf6b0ff9de43e7e418">&#9670;&nbsp;</a></span>accept_visitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MDL_ticket::accept_visitor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_m_d_l__wait__for__graph__visitor.html">MDL_wait_for_graph_visitor</a> *&#160;</td>
          <td class="paramname"><em>gvisitor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Implement <a class="el" href="class_m_d_l__wait__for__subgraph.html">MDL_wait_for_subgraph</a> interface.</p>
<p>Traverse a portion of wait-for graph which is reachable through the edge represented by this ticket and search for deadlocks.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TRUE</td><td>A deadlock is found. A pointer to deadlock victim is saved in the visitor. </td></tr>
    <tr><td class="paramname">FALSE</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="class_m_d_l__wait__for__subgraph.html#ad14f796a25430ecabd24572efa22f3f5">MDL_wait_for_subgraph</a>.</p>

</div>
</div>
<a id="aeb3ea2a00b6f11c07c18483de8c69060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb3ea2a00b6f11c07c18483de8c69060">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> * MDL_ticket::create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_m_d_l__context.html">MDL_context</a> *&#160;</td>
          <td class="paramname"><em>ctx_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum_mdl_type&#160;</td>
          <td class="paramname"><em>type_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum_mdl_duration&#160;</td>
          <td class="paramname"><em>duration_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Auxiliary functions needed for creation/destruction of <a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a> objects.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000062">Todo:</a></b></dt><dd>This naive implementation should be replaced with one that saves on memory allocation by reusing released objects. </dd></dl>

</div>
</div>
<a id="a4fd3f255fe828cbf0d95a5d02d70d302"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fd3f255fe828cbf0d95a5d02d70d302">&#9670;&nbsp;</a></span>downgrade_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_ticket::downgrade_lock </td>
          <td>(</td>
          <td class="paramtype">enum_mdl_type&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Downgrade an EXCLUSIVE or SHARED_NO_WRITE lock to shared metadata lock.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of lock to which exclusive lock should be downgraded. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9f3cbfd4b31f7715eae746904e840a02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f3cbfd4b31f7715eae746904e840a02">&#9670;&nbsp;</a></span>get_deadlock_weight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint MDL_ticket::get_deadlock_weight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the 'weight' of this ticket for the victim selection algorithm. Requests with lower weight are preferred to requests with higher weight when choosing a victim. </p>

<p>Implements <a class="el" href="class_m_d_l__wait__for__subgraph.html">MDL_wait_for_subgraph</a>.</p>

</div>
</div>
<a id="a453c69eade5322291a6b3df6833892d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a453c69eade5322291a6b3df6833892d5">&#9670;&nbsp;</a></span>has_pending_conflicting_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MDL_ticket::has_pending_conflicting_lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="struct_check.html">Check</a> if we have any pending locks which conflict with existing shared lock.</p>
<dl class="section pre"><dt>Precondition</dt><dd>The ticket must match an acquired lock.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if there is a conflicting lock request, FALSE otherwise. </dd></dl>

</div>
</div>
<a id="a3db14474f09df6e82fe7db48cc4463df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db14474f09df6e82fe7db48cc4463df">&#9670;&nbsp;</a></span>has_stronger_or_equal_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MDL_ticket::has_stronger_or_equal_type </td>
          <td>(</td>
          <td class="paramtype">enum_mdl_type&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="struct_check.html">Check</a> if ticket represents metadata lock of "stronger" or equal type than specified one. I.e. if metadata lock represented by ticket won't allow any of locks which are not allowed by specified type of lock.</p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if ticket has stronger or equal type FALSE otherwise. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae06e96fbda7d5f2ad5a15e583a415f91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae06e96fbda7d5f2ad5a15e583a415f91">&#9670;&nbsp;</a></span>m_ctx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_d_l__context.html">MDL_context</a>* MDL_ticket::m_ctx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Context of the owner of the metadata lock ticket. Externally accessible. </p>

</div>
</div>
<a id="aa81a40be82b1e8015e3c0be5c99d5d72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa81a40be82b1e8015e3c0be5c99d5d72">&#9670;&nbsp;</a></span>m_duration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum_mdl_duration MDL_ticket::m_duration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Duration of lock represented by this ticket. Context private. Debug-only. </p>

</div>
</div>
<a id="ac31749048c6f9a807473ef2849bda7fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac31749048c6f9a807473ef2849bda7fb">&#9670;&nbsp;</a></span>m_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_d_l__lock.html">MDL_lock</a>* MDL_ticket::m_lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pointer to the lock object for this lock ticket. Externally accessible. </p>

</div>
</div>
<a id="a027686d37b2f7f1af7d9aaa6acd48448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a027686d37b2f7f1af7d9aaa6acd48448">&#9670;&nbsp;</a></span>m_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum enum_mdl_type MDL_ticket::m_type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Type of metadata lock. Externally accessible. </p>

</div>
</div>
<a id="a74155707577dfd12cc7f47229e4f0d17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74155707577dfd12cc7f47229e4f0d17">&#9670;&nbsp;</a></span>next_in_context</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a>* MDL_ticket::next_in_context</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pointers for participating in the list of lock requests for this context. Context private. </p>

</div>
</div>
<a id="ad9c009e5c097d2159dd142aa7f58e010"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c009e5c097d2159dd142aa7f58e010">&#9670;&nbsp;</a></span>next_in_lock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_d_l__ticket.html">MDL_ticket</a>* MDL_ticket::next_in_lock</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pointers for participating in the list of satisfied/pending requests for the lock. Externally accessible. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="mdl_8h_source.html">mdl.h</a></li>
<li>sql/mdl.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
