<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: buf_block_t Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="structbuf__block__t-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">buf_block_t Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="buf0buf_8h_source.html">buf0buf.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Optimistic search field</div></td></tr>
<tr class="memitem:a3a054dc20d73b1e9b1a3915890f275d9"><td class="memItemLeft" align="right" valign="top">ib_uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#a3a054dc20d73b1e9b1a3915890f275d9">modify_clock</a></td></tr>
<tr class="separator:a3a054dc20d73b1e9b1a3915890f275d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Hash search fields (unprotected)</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>NOTE that these fields are NOT protected by any semaphore! </p>
</div></td></tr>
<tr class="memitem:acb908f99682168e39a9dfd69624f7954"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#acb908f99682168e39a9dfd69624f7954">n_hash_helps</a></td></tr>
<tr class="separator:acb908f99682168e39a9dfd69624f7954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa022f9d553a64b925d89b65c8899e295"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#aa022f9d553a64b925d89b65c8899e295">n_fields</a></td></tr>
<tr class="separator:aa022f9d553a64b925d89b65c8899e295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe6cd7addaf06fbc6012bccef4819cdf"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#afe6cd7addaf06fbc6012bccef4819cdf">n_bytes</a></td></tr>
<tr class="separator:afe6cd7addaf06fbc6012bccef4819cdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d44bf91e8033075da1ea9145d966ab8"><td class="memItemLeft" align="right" valign="top">ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#a0d44bf91e8033075da1ea9145d966ab8">left_side</a></td></tr>
<tr class="separator:a0d44bf91e8033075da1ea9145d966ab8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Hash search fields</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These 5 fields may only be modified when we have an x-latch on btr_search_latch AND</p><ul>
<li>we are holding an s-latch or x-latch on <a class="el" href="structbuf__block__t.html#a84194c0e8cc98af09907235f52e7ae16">buf_block_t::lock</a> or</li>
<li>we know that buf_block_t::buf_fix_count == 0.</li>
</ul>
<p>An exception to this is when we init or create a page in the buffer pool in <a class="el" href="buf0buf_8cc.html">buf0buf.cc</a>.</p>
<p>Another exception is that assigning block-&gt;index = NULL is allowed whenever holding an x-latch on btr_search_latch. </p>
</div></td></tr>
<tr class="memitem:abd502c27ab099e000f52980eb5320a5d"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#abd502c27ab099e000f52980eb5320a5d">curr_n_fields</a>:10</td></tr>
<tr class="separator:abd502c27ab099e000f52980eb5320a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1feaf77a181565201cf1e76ae69a890"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#ae1feaf77a181565201cf1e76ae69a890">curr_n_bytes</a>:15</td></tr>
<tr class="separator:ae1feaf77a181565201cf1e76ae69a890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab266dbdd4987a973d17481a3adda93a7"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#ab266dbdd4987a973d17481a3adda93a7">curr_left_side</a>:1</td></tr>
<tr class="separator:ab266dbdd4987a973d17481a3adda93a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe5e0c130f4eb214c713eab5cc530733"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#abe5e0c130f4eb214c713eab5cc530733">index</a></td></tr>
<tr class="separator:abe5e0c130f4eb214c713eab5cc530733"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
General fields</h2></td></tr>
<tr class="memitem:a275b67563d761a5581aa734a383f5ee2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbuf__page__t.html">buf_page_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#a275b67563d761a5581aa734a383f5ee2">page</a></td></tr>
<tr class="separator:a275b67563d761a5581aa734a383f5ee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ef8d133a86de0277832fc291bb7f081"><td class="memItemLeft" align="right" valign="top">byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#a8ef8d133a86de0277832fc291bb7f081">frame</a></td></tr>
<tr class="separator:a8ef8d133a86de0277832fc291bb7f081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a633e35f46dcb07789f728c15d020fd75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structib__mutex__t.html">ib_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#a633e35f46dcb07789f728c15d020fd75">mutex</a></td></tr>
<tr class="separator:a633e35f46dcb07789f728c15d020fd75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84194c0e8cc98af09907235f52e7ae16"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrw__lock__t.html">rw_lock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#a84194c0e8cc98af09907235f52e7ae16">lock</a></td></tr>
<tr class="separator:a84194c0e8cc98af09907235f52e7ae16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a2fe504c95e66fee175149cc7943b05"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#a9a2fe504c95e66fee175149cc7943b05">lock_hash_val</a>:32</td></tr>
<tr class="separator:a9a2fe504c95e66fee175149cc7943b05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f9289c3aa6bef989bed69096003377e"><td class="memItemLeft" align="right" valign="top">ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#a3f9289c3aa6bef989bed69096003377e">check_index_page_at_flush</a></td></tr>
<tr class="separator:a3f9289c3aa6bef989bed69096003377e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a4e45a83762965ff4cd839aff952a9a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuf__block__t.html#a4a4e45a83762965ff4cd839aff952a9a">UT_LIST_NODE_T</a> (<a class="el" href="structbuf__block__t.html">buf_block_t</a>) unzip_LRU</td></tr>
<tr class="separator:a4a4e45a83762965ff4cd839aff952a9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The buffer control block structure </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a4a4e45a83762965ff4cd839aff952a9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a4e45a83762965ff4cd839aff952a9a">&#9670;&nbsp;</a></span>UT_LIST_NODE_T()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">buf_block_t::UT_LIST_NODE_T </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>node of the decompressed LRU list; a block is in the unzip_LRU list if page.state == BUF_BLOCK_FILE_PAGE and page.zip.data != NULL </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a3f9289c3aa6bef989bed69096003377e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f9289c3aa6bef989bed69096003377e">&#9670;&nbsp;</a></span>check_index_page_at_flush</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ibool buf_block_t::check_index_page_at_flush</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TRUE if we know that this is an index page, and want the database to check its consistency before flush; note that there may be pages in the buffer pool which are index pages, but this flag is not set because we do not keep track of all pages; NOT protected by any mutex </p>

</div>
</div>
<a id="ab266dbdd4987a973d17481a3adda93a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab266dbdd4987a973d17481a3adda93a7">&#9670;&nbsp;</a></span>curr_left_side</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned buf_block_t::curr_left_side</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TRUE or FALSE in hash indexing </p>

</div>
</div>
<a id="ae1feaf77a181565201cf1e76ae69a890"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1feaf77a181565201cf1e76ae69a890">&#9670;&nbsp;</a></span>curr_n_bytes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned buf_block_t::curr_n_bytes</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>number of bytes in hash indexing </p>

</div>
</div>
<a id="abd502c27ab099e000f52980eb5320a5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd502c27ab099e000f52980eb5320a5d">&#9670;&nbsp;</a></span>curr_n_fields</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned buf_block_t::curr_n_fields</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>prefix length for hash indexing: number of full fields </p>

</div>
</div>
<a id="a8ef8d133a86de0277832fc291bb7f081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ef8d133a86de0277832fc291bb7f081">&#9670;&nbsp;</a></span>frame</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte* buf_block_t::frame</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>pointer to buffer frame which is of size UNIV_PAGE_SIZE, and aligned to an address divisible by UNIV_PAGE_SIZE </p>

</div>
</div>
<a id="abe5e0c130f4eb214c713eab5cc530733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe5e0c130f4eb214c713eab5cc530733">&#9670;&nbsp;</a></span>index</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdict__index__t.html">dict_index_t</a>* buf_block_t::index</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Index for which the adaptive hash index has been created, or NULL if the page does not exist in the index. Note that it does not guarantee that the index is complete, though: there may have been hash collisions, record deletions, etc. </p>

</div>
</div>
<a id="a0d44bf91e8033075da1ea9145d966ab8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d44bf91e8033075da1ea9145d966ab8">&#9670;&nbsp;</a></span>left_side</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ibool buf_block_t::left_side</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TRUE or FALSE, depending on whether the leftmost record of several records with the same prefix should be indexed in the hash index </p>

</div>
</div>
<a id="a84194c0e8cc98af09907235f52e7ae16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84194c0e8cc98af09907235f52e7ae16">&#9670;&nbsp;</a></span>lock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrw__lock__t.html">rw_lock_t</a> buf_block_t::lock</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>read-write lock of the buffer frame </p>

</div>
</div>
<a id="a9a2fe504c95e66fee175149cc7943b05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a2fe504c95e66fee175149cc7943b05">&#9670;&nbsp;</a></span>lock_hash_val</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned buf_block_t::lock_hash_val</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>hashed value of the page address in the record lock hash table; protected by <a class="el" href="structbuf__block__t.html#a84194c0e8cc98af09907235f52e7ae16">buf_block_t::lock</a> (or <a class="el" href="structbuf__block__t.html#a633e35f46dcb07789f728c15d020fd75">buf_block_t::mutex</a>, buf_pool-&gt;mutex in <a class="el" href="buf0buf_8cc.html#a35978421b8e05e91ad4f4bd48b1db416">buf_page_get_gen()</a>, <a class="el" href="buf0buf_8cc.html#a6424ffc76b8af1be289e341334f14905">buf_page_init_for_read()</a> and <a class="el" href="buf0buf_8cc.html#aa46fda4f90104f3919b4577d11caf957">buf_page_create()</a>) </p>

</div>
</div>
<a id="a3a054dc20d73b1e9b1a3915890f275d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a054dc20d73b1e9b1a3915890f275d9">&#9670;&nbsp;</a></span>modify_clock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ib_uint64_t buf_block_t::modify_clock</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>this clock is incremented every time a pointer to a record on the page may become obsolete; this is used in the optimistic cursor positioning: if the modify clock has not changed, we know that the pointer is still valid; this field may be changed if the thread (1) owns the pool mutex and the page is not bufferfixed, or (2) the thread has an x-latch on the block </p>

</div>
</div>
<a id="a633e35f46dcb07789f728c15d020fd75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a633e35f46dcb07789f728c15d020fd75">&#9670;&nbsp;</a></span>mutex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structib__mutex__t.html">ib_mutex_t</a> buf_block_t::mutex</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>mutex protecting this block: state (also protected by the buffer pool mutex), io_fix, buf_fix_count, and accessed; we introduce this new mutex in InnoDB-5.1 to relieve contention on the buffer pool mutex </p>

</div>
</div>
<a id="afe6cd7addaf06fbc6012bccef4819cdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe6cd7addaf06fbc6012bccef4819cdf">&#9670;&nbsp;</a></span>n_bytes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint buf_block_t::n_bytes</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>recommended prefix: number of bytes in an incomplete field </p>

</div>
</div>
<a id="aa022f9d553a64b925d89b65c8899e295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa022f9d553a64b925d89b65c8899e295">&#9670;&nbsp;</a></span>n_fields</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint buf_block_t::n_fields</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>recommended prefix length for hash search: number of full fields </p>

</div>
</div>
<a id="acb908f99682168e39a9dfd69624f7954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb908f99682168e39a9dfd69624f7954">&#9670;&nbsp;</a></span>n_hash_helps</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint buf_block_t::n_hash_helps</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>counter which controls building of a new hash index for the page </p>

</div>
</div>
<a id="a275b67563d761a5581aa734a383f5ee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a275b67563d761a5581aa734a383f5ee2">&#9670;&nbsp;</a></span>page</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbuf__page__t.html">buf_page_t</a> buf_block_t::page</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>page information; this must be the first field, so that buf_pool-&gt;page_hash can point to <a class="el" href="structbuf__page__t.html">buf_page_t</a> or <a class="el" href="structbuf__block__t.html">buf_block_t</a> </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>storage/innobase/include/<a class="el" href="buf0buf_8h_source.html">buf0buf.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
