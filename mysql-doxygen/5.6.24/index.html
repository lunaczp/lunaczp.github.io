<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">PERFORMANCE SCHEMA Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Introduction</h1>
<p>libevent is an event notification library for developing scalable network servers. The libevent API provides a mechanism to execute a callback function when a specific event occurs on a file descriptor or after a timeout has been reached. Furthermore, libevent also support callbacks due to signals or regular timeouts.</p>
<p>libevent is meant to replace the event loop found in event driven network servers. An application just needs to call <a class="el" href="event_8h.html#a1f4991bceb8aaf33545d1fc857230b51">event_dispatch()</a> and then add or remove events dynamically without having to change the event loop.</p>
<p>Currently, libevent supports /dev/poll, kqueue(2), select(2), poll(2) and epoll(4). It also has experimental support for real-time signals. The internal event mechanism is completely independent of the exposed event API, and a simple update of libevent can provide new functionality without having to redesign the applications. As a result, Libevent allows for portable application development and provides the most scalable event notification mechanism available on an operating system. Libevent can also be used for multi-threaded aplications; see Steven Grimm's explanation. Libevent should compile on Linux, *BSD, Mac OS X, Solaris and Windows.</p>
<h1><a class="anchor" id="usage"></a>
Standard usage</h1>
<p>Every program that uses libevent must include the &lt;<a class="el" href="event_8h.html">event.h</a>&gt; header, and pass the -levent flag to the linker. Before using any of the functions in the library, you must call <a class="el" href="event_8h.html#a1bf74386dd3725e1538fed2d70c1c113">event_init()</a> or <a class="el" href="event_8h.html#a4c16f1203aebc67f94791ae0240b7353">event_base_new()</a> to perform one-time initialization of the libevent library.</p>
<h1><a class="anchor" id="event"></a>
Event notification</h1>
<p>For each file descriptor that you wish to monitor, you must declare an event structure and call <a class="el" href="event_8h.html#a24235e12d151db1782f792e14c83cf82">event_set()</a> to initialize the members of the structure. To enable notification, you add the structure to the list of monitored events by calling <a class="el" href="event_8h.html#a44df7b40859b56f2c866adb02dabdd9e">event_add()</a>. The event structure must remain allocated as long as it is active, so it should be allocated on the heap. Finally, you call <a class="el" href="event_8h.html#a1f4991bceb8aaf33545d1fc857230b51">event_dispatch()</a> to loop and dispatch events.</p>
<h1><a class="anchor" id="bufferevent"></a>
I/O Buffers</h1>
<p>libevent provides an abstraction on top of the regular event callbacks. This abstraction is called a buffered event. A buffered event provides input and output buffers that get filled and drained automatically. The user of a buffered event no longer deals directly with the I/O, but instead is reading from input and writing to output buffers.</p>
<p>Once initialized via <a class="el" href="event_8h.html#a3110aae725315e58a1fe0c667efe7619">bufferevent_new()</a>, the bufferevent structure can be used repeatedly with <a class="el" href="event_8h.html#a1b9a3412e8c8e122c745b33d46b9643e">bufferevent_enable()</a> and <a class="el" href="event_8h.html#aa15582fe250247aa98d4897527215727">bufferevent_disable()</a>. Instead of reading and writing directly to a socket, you would call <a class="el" href="event_8h.html#a6bd435529e20a39b24fead9ddcd966ba">bufferevent_read()</a> and <a class="el" href="event_8h.html#abc606695cd6bb2e3f25c4330d0c9e3ab">bufferevent_write()</a>.</p>
<p>When read enabled the bufferevent will try to read from the file descriptor and call the read callback. The write callback is executed whenever the output buffer is drained below the write low watermark, which is 0 by default.</p>
<h1><a class="anchor" id="timers"></a>
Timers</h1>
<p>libevent can also be used to create timers that invoke a callback after a certain amount of time has expired. The <a class="el" href="event_8h.html#afa5d72155d72931332ed0656fc8fb0a1">evtimer_set()</a> function prepares an event struct to be used as a timer. To activate the timer, call <a class="el" href="event_8h.html#a6ea3ca87057c66fd9f5a9fda9b911f8b">evtimer_add()</a>. Timers can be deactivated by calling <a class="el" href="event_8h.html#a22f7e7b422e9098d9362626d47b77525">evtimer_del()</a>.</p>
<h1><a class="anchor" id="timeouts"></a>
Timeouts</h1>
<p>In addition to simple timers, libevent can assign timeout events to file descriptors that are triggered whenever a certain amount of time has passed with no activity on a file descriptor. The <a class="el" href="event_8h.html#a85e9253a4d75703692dd912be4a87aab">timeout_set()</a> function initializes an event struct for use as a timeout. Once initialized, the event must be activated by using <a class="el" href="event_8h.html#afaf6ea49aab66ec47acd9f5b629bfe5e">timeout_add()</a>. To cancel the timeout, call <a class="el" href="event_8h.html#a8febdc39e7def3c49deb1e9faa7fc537">timeout_del()</a>.</p>
<h1><a class="anchor" id="evdns"></a>
Asynchronous DNS resolution</h1>
<p>libevent provides an asynchronous DNS resolver that should be used instead of the standard DNS resolver functions. These functions can be imported by including the &lt;<a class="el" href="evdns_8h.html">evdns.h</a>&gt; header in your program. Before using any of the resolver functions, you must call <a class="el" href="evdns_8h.html#afce412359a059f87cba10658dbd16b53">evdns_init()</a> to initialize the library. To convert a hostname to an IP address, you call the <a class="el" href="evdns_8h.html#a68e22e497f71fc97e7b85512319867ee">evdns_resolve_ipv4()</a> function. To perform a reverse lookup, you would call the <a class="el" href="evdns_8h.html#a8b2c2c8984d5596ab12dc6fdc0fb2018">evdns_resolve_reverse()</a> function. All of these functions use callbacks to avoid blocking while the lookup is performed.</p>
<h1><a class="anchor" id="evhttp"></a>
Event-driven HTTP servers</h1>
<p>libevent provides a very simple event-driven HTTP server that can be embedded in your program and used to service HTTP requests.</p>
<p>To use this capability, you need to include the &lt;<a class="el" href="evhttp_8h.html">evhttp.h</a>&gt; header in your program. You create the server by calling <a class="el" href="evhttp_8h.html#ab8c84271a97fd85957cf72b1161b8216">evhttp_new()</a>. Add addresses and ports to listen on with <a class="el" href="evhttp_8h.html#ac0d2930caef8350823771b49c2f31835">evhttp_bind_socket()</a>. You then register one or more callbacks to handle incoming requests. Each URI can be assigned a callback via the <a class="el" href="evhttp_8h.html#aee3424d22267077998cd80c2c33eb528">evhttp_set_cb()</a> function. A generic callback function can also be registered via <a class="el" href="evhttp_8h.html#aafdab2577d468fba4c7f3cd478cf2e1e">evhttp_set_gencb()</a>; this callback will be invoked if no other callbacks have been registered for a given URI.</p>
<h1><a class="anchor" id="evrpc"></a>
A framework for RPC servers and clients</h1>
<p>libevents provides a framework for creating RPC servers and clients. It takes care of marshaling and unmarshaling all data structures.</p>
<h1><a class="anchor" id="api"></a>
API Reference</h1>
<p>To browse the complete documentation of the libevent API, click on any of the following links.</p>
<p><a class="el" href="event_8h.html">event.h</a> The primary libevent header</p>
<p><a class="el" href="evdns_8h.html">evdns.h</a> Asynchronous DNS resolution</p>
<p><a class="el" href="evhttp_8h.html">evhttp.h</a> An embedded libevent-based HTTP server</p>
<p><a class="el" href="evrpc_8h.html">evrpc.h</a> A framework for creating RPC servers and clients </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
