<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: engine_interface_v1 Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structengine__interface__v1-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">engine_interface_v1 Struct Reference<div class="ingroups"><a class="el" href="group___engine.html">Storage Engine API</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="engine_8h_source.html">engine.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:acb4a9ddd1b457a5392de8d61ae381ca8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structengine__interface.html">engine_interface</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#acb4a9ddd1b457a5392de8d61ae381ca8">interface</a></td></tr>
<tr class="separator:acb4a9ddd1b457a5392de8d61ae381ca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2135904d1e154b89226cfd6890bfc6b"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structengine__info.html">engine_info</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#ad2135904d1e154b89226cfd6890bfc6b">get_info</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle)</td></tr>
<tr class="separator:ad2135904d1e154b89226cfd6890bfc6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4271481ef65ddd9e19e21af3aef8b229"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#a4271481ef65ddd9e19e21af3aef8b229">initialize</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const char *config_str)</td></tr>
<tr class="separator:a4271481ef65ddd9e19e21af3aef8b229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af521ef75ffaa559c83ac9d7af943f0e4"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#af521ef75ffaa559c83ac9d7af943f0e4">destroy</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const bool force)</td></tr>
<tr class="separator:af521ef75ffaa559c83ac9d7af943f0e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9407fff83d01b51efbfc03d431c77141"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#a9407fff83d01b51efbfc03d431c77141">allocate</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, item **item, const void *key, const size_t nkey, const size_t nbytes, const int <a class="el" href="handler0alter_8cc.html#a4069e5feb5d17fbac4d832518d169cdd">flags</a>, const rel_time_t exptime)</td></tr>
<tr class="separator:a9407fff83d01b51efbfc03d431c77141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c643876f6d62998971930e89374f8ae"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#a8c643876f6d62998971930e89374f8ae">remove</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, const void *key, const size_t nkey, uint64_t cas, uint16_t vbucket)</td></tr>
<tr class="separator:a8c643876f6d62998971930e89374f8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a269a963a4158646863a87b4069e4a0c7"><td class="memItemLeft" align="right" valign="top"><a id="a269a963a4158646863a87b4069e4a0c7"></a>
ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><b>bind</b> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, const void *<a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>, const size_t name_len)</td></tr>
<tr class="separator:a269a963a4158646863a87b4069e4a0c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee925bf1864887946c2dc7df74fb190b"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#aee925bf1864887946c2dc7df74fb190b">release</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, item *item)</td></tr>
<tr class="separator:aee925bf1864887946c2dc7df74fb190b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92385a9d2474435f85c615f45f76f85d"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#a92385a9d2474435f85c615f45f76f85d">clean_engine</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, void *engine_data)</td></tr>
<tr class="separator:a92385a9d2474435f85c615f45f76f85d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa87dbc017ca65eb9403aa0e96fe876fd"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#aa87dbc017ca65eb9403aa0e96fe876fd">get</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, item **item, const void *key, const int nkey, uint16_t vbucket)</td></tr>
<tr class="separator:aa87dbc017ca65eb9403aa0e96fe876fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab159a5e583ace450f90981088b8f2b8f"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#ab159a5e583ace450f90981088b8f2b8f">store</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, item *item, uint64_t *cas, ENGINE_STORE_OPERATION operation, uint16_t vbucket)</td></tr>
<tr class="separator:ab159a5e583ace450f90981088b8f2b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6988351a59bc70f615fbd7342dce71"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#afd6988351a59bc70f615fbd7342dce71">arithmetic</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, const void *key, const int nkey, const bool increment, const bool create, const uint64_t delta, const uint64_t initial, const rel_time_t exptime, uint64_t *cas, uint64_t *result, uint16_t vbucket)</td></tr>
<tr class="separator:afd6988351a59bc70f615fbd7342dce71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ce92614765740c22b50e43d4b8cb037"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#a7ce92614765740c22b50e43d4b8cb037">flush</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, time_t when)</td></tr>
<tr class="separator:a7ce92614765740c22b50e43d4b8cb037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a807cedf634ec810283bf02380da8584f"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#a807cedf634ec810283bf02380da8584f">get_stats</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, const char *stat_key, int nkey, <a class="el" href="group___engine.html#gacd0112eec954e1e92962bc0d8aff5d96">ADD_STAT</a> add_stat)</td></tr>
<tr class="separator:a807cedf634ec810283bf02380da8584f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaeabdba765f3a043596415c2fdc8bb9"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#acaeabdba765f3a043596415c2fdc8bb9">reset_stats</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie)</td></tr>
<tr class="separator:acaeabdba765f3a043596415c2fdc8bb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7032069309d0fc78b43b73114cd22b1b"><td class="memItemLeft" align="right" valign="top">void *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#a7032069309d0fc78b43b73114cd22b1b">get_stats_struct</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie)</td></tr>
<tr class="separator:a7032069309d0fc78b43b73114cd22b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c0bbe43e9d01509b12945a7f3566ed3"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#a3c0bbe43e9d01509b12945a7f3566ed3">aggregate_stats</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, void(*callback)(void *, void *), void *)</td></tr>
<tr class="separator:a3c0bbe43e9d01509b12945a7f3566ed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7ef35ce56dd2889067c55f101179612"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#ab7ef35ce56dd2889067c55f101179612">unknown_command</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, <a class="el" href="unionprotocol__binary__request__header.html">protocol_binary_request_header</a> *<a class="el" href="structrequest.html">request</a>, <a class="el" href="group___engine.html#ga8bb79ab44dc192cae02c9d50f89bc6e2">ADD_RESPONSE</a> response)</td></tr>
<tr class="separator:ab7ef35ce56dd2889067c55f101179612"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3d8d0055eebb31a89a3420bc2a983e1"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#ab3d8d0055eebb31a89a3420bc2a983e1">tap_notify</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, void *engine_specific, uint16_t nengine, uint8_t ttl, uint16_t tap_flags, tap_event_t tap_event, uint32_t tap_seqno, const void *key, size_t nkey, uint32_t <a class="el" href="handler0alter_8cc.html#a4069e5feb5d17fbac4d832518d169cdd">flags</a>, uint32_t exptime, uint64_t cas, const void *<a class="el" href="row0sel_8cc.html#ad5785aee834440a0628434c5e5ab94d2">data</a>, size_t ndata, uint16_t vbucket)</td></tr>
<tr class="separator:ab3d8d0055eebb31a89a3420bc2a983e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ccae87696556eeb8cfc2fcfc8e11f9d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___engine.html#ga18337f714e9a050bc1bc9ba42d1ae42d">TAP_ITERATOR</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#a6ccae87696556eeb8cfc2fcfc8e11f9d">get_tap_iterator</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, const void *client, size_t nclient, uint32_t <a class="el" href="handler0alter_8cc.html#a4069e5feb5d17fbac4d832518d169cdd">flags</a>, const void *userdata, size_t nuserdata)</td></tr>
<tr class="separator:a6ccae87696556eeb8cfc2fcfc8e11f9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a651a9a2ba3ab4a0af1587ff9141074a2"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#a651a9a2ba3ab4a0af1587ff9141074a2">item_set_cas</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, item *item, uint64_t cas)</td></tr>
<tr class="separator:a651a9a2ba3ab4a0af1587ff9141074a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4fae5a345ad83c97a06761c414c505e"><td class="memItemLeft" align="right" valign="top">bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#af4fae5a345ad83c97a06761c414c505e">get_item_info</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, const item *item, <a class="el" href="structitem__info.html">item_info</a> *<a class="el" href="structitem__info.html">item_info</a>)</td></tr>
<tr class="separator:af4fae5a345ad83c97a06761c414c505e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6733584149fe2b24b6bcd024a95a084"><td class="memItemLeft" align="right" valign="top">size_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html#ac6733584149fe2b24b6bcd024a95a084">errinfo</a> )(<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, char *buffer, size_t buffsz)</td></tr>
<tr class="separator:ac6733584149fe2b24b6bcd024a95a084"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Definition of the first version of the engine interface </p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a3c0bbe43e9d01509b12945a7f3566ed3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c0bbe43e9d01509b12945a7f3566ed3">&#9670;&nbsp;</a></span>aggregate_stats</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* engine_interface_v1::aggregate_stats) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, void(*callback)(void *, void *), void *)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Aggregate stats among all per-connection stats. Set to NULL if you don't need it. </p>

</div>
</div>
<a id="a9407fff83d01b51efbfc03d431c77141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9407fff83d01b51efbfc03d431c77141">&#9670;&nbsp;</a></span>allocate</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* engine_interface_v1::allocate) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, item **item, const void *key, const size_t nkey, const size_t nbytes, const int <a class="el" href="handler0alter_8cc.html#a4069e5feb5d17fbac4d832518d169cdd">flags</a>, const rel_time_t exptime)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate an item.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The cookie provided by the frontend </td></tr>
    <tr><td class="paramname">output</td><td>variable that will receive the item </td></tr>
    <tr><td class="paramname">key</td><td>the item's key </td></tr>
    <tr><td class="paramname">nkey</td><td>the length of the key </td></tr>
    <tr><td class="paramname">nbytes</td><td>the number of bytes that will make up the value of this item. </td></tr>
    <tr><td class="paramname">flags</td><td>the item's flags </td></tr>
    <tr><td class="paramname">exptime</td><td>the maximum lifetime of this item</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ENGINE_SUCCESS if all goes well </dd></dl>

</div>
</div>
<a id="afd6988351a59bc70f615fbd7342dce71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd6988351a59bc70f615fbd7342dce71">&#9670;&nbsp;</a></span>arithmetic</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* engine_interface_v1::arithmetic) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, const void *key, const int nkey, const bool increment, const bool create, const uint64_t delta, const uint64_t initial, const rel_time_t exptime, uint64_t *cas, uint64_t *result, uint16_t vbucket)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform an increment or decrement operation on an item.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The cookie provided by the frontend </td></tr>
    <tr><td class="paramname">key</td><td>the key to look up </td></tr>
    <tr><td class="paramname">nkey</td><td>the length of the key </td></tr>
    <tr><td class="paramname">increment</td><td>if true, increment the value, else decrement </td></tr>
    <tr><td class="paramname">create</td><td>if true, create the item if it's missing </td></tr>
    <tr><td class="paramname">delta</td><td>the amount to increment or decrement. </td></tr>
    <tr><td class="paramname">initial</td><td>when creating, specifies the initial value </td></tr>
    <tr><td class="paramname">exptime</td><td>when creating, specifies the expiration time </td></tr>
    <tr><td class="paramname">cas</td><td>output CAS value </td></tr>
    <tr><td class="paramname">result</td><td>output arithmetic value </td></tr>
    <tr><td class="paramname">vbucket</td><td>the virtual bucket id</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ENGINE_SUCCESS if all goes well </dd></dl>

</div>
</div>
<a id="a92385a9d2474435f85c615f45f76f85d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92385a9d2474435f85c615f45f76f85d">&#9670;&nbsp;</a></span>clean_engine</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* engine_interface_v1::clean_engine) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, void *engine_data)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clean up a connection when it is disconnected</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The cookie provided by the frontend </td></tr>
    <tr><td class="paramname">engine_data</td><td>Engine specific resource to clean up </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af521ef75ffaa559c83ac9d7af943f0e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af521ef75ffaa559c83ac9d7af943f0e4">&#9670;&nbsp;</a></span>destroy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* engine_interface_v1::destroy) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const bool force)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tear down this engine.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">force</td><td>the flag indicating the force shutdown or not. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac6733584149fe2b24b6bcd024a95a084"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6733584149fe2b24b6bcd024a95a084">&#9670;&nbsp;</a></span>errinfo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t(* engine_interface_v1::errinfo) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, char *buffer, size_t buffsz)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get extra error information for an operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The connection cookie </td></tr>
    <tr><td class="paramname">buffer</td><td>Where to store the info </td></tr>
    <tr><td class="paramname">buffsz</td><td>The size of the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes written to the buffer </dd></dl>

</div>
</div>
<a id="a7ce92614765740c22b50e43d4b8cb037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce92614765740c22b50e43d4b8cb037">&#9670;&nbsp;</a></span>flush</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* engine_interface_v1::flush) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, time_t when)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flush the cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The cookie provided by the frontend </td></tr>
    <tr><td class="paramname">when</td><td>time at which the flush should take effect</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ENGINE_SUCCESS if all goes well </dd></dl>

</div>
</div>
<a id="aa87dbc017ca65eb9403aa0e96fe876fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa87dbc017ca65eb9403aa0e96fe876fd">&#9670;&nbsp;</a></span>get</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* engine_interface_v1::get) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, item **item, const void *key, const int nkey, uint16_t vbucket)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve an item.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The cookie provided by the frontend </td></tr>
    <tr><td class="paramname">item</td><td>output variable that will receive the located item </td></tr>
    <tr><td class="paramname">key</td><td>the key to look up </td></tr>
    <tr><td class="paramname">nkey</td><td>the length of the key </td></tr>
    <tr><td class="paramname">vbucket</td><td>the virtual bucket id</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ENGINE_SUCCESS if all goes well </dd></dl>

</div>
</div>
<a id="ad2135904d1e154b89226cfd6890bfc6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2135904d1e154b89226cfd6890bfc6b">&#9670;&nbsp;</a></span>get_info</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structengine__info.html">engine_info</a>*(* engine_interface_v1::get_info) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get a description of this engine.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a stringz description of this engine </dd></dl>

</div>
</div>
<a id="af4fae5a345ad83c97a06761c414c505e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4fae5a345ad83c97a06761c414c505e">&#9670;&nbsp;</a></span>get_item_info</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool(* engine_interface_v1::get_item_info) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, const item *item, <a class="el" href="structitem__info.html">item_info</a> *<a class="el" href="structitem__info.html">item_info</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get information about an item.</p>
<p>The loader of the module may need the pointers to the actual data within an item. Instead of having to create multiple functions to get each individual item, this function will get all of them.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine that owns the object </td></tr>
    <tr><td class="paramname">cookie</td><td>connection cookie for this item </td></tr>
    <tr><td class="paramname">item</td><td>the item to request information about </td></tr>
    <tr><td class="paramname"><a class="el" href="structitem__info.html">item_info</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful </dd></dl>

</div>
</div>
<a id="a807cedf634ec810283bf02380da8584f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a807cedf634ec810283bf02380da8584f">&#9670;&nbsp;</a></span>get_stats</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* engine_interface_v1::get_stats) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, const char *stat_key, int nkey, <a class="el" href="group___engine.html#gacd0112eec954e1e92962bc0d8aff5d96">ADD_STAT</a> add_stat)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get statistics from the engine.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The cookie provided by the frontend </td></tr>
    <tr><td class="paramname">stat_key</td><td>optional argument to stats </td></tr>
    <tr><td class="paramname">nkey</td><td>the length of the stat_key </td></tr>
    <tr><td class="paramname">add_stat</td><td>callback to feed results to the output</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ENGINE_SUCCESS if all goes well </dd></dl>

</div>
</div>
<a id="a7032069309d0fc78b43b73114cd22b1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7032069309d0fc78b43b73114cd22b1b">&#9670;&nbsp;</a></span>get_stats_struct</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void*(* engine_interface_v1::get_stats_struct) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get an array of per-thread stats. Set to NULL if you don't need it. </p>

</div>
</div>
<a id="a6ccae87696556eeb8cfc2fcfc8e11f9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ccae87696556eeb8cfc2fcfc8e11f9d">&#9670;&nbsp;</a></span>get_tap_iterator</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___engine.html#ga18337f714e9a050bc1bc9ba42d1ae42d">TAP_ITERATOR</a>(* engine_interface_v1::get_tap_iterator) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, const void *client, size_t nclient, uint32_t <a class="el" href="handler0alter_8cc.html#a4069e5feb5d17fbac4d832518d169cdd">flags</a>, const void *userdata, size_t nuserdata)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get (or create) a Tap iterator for this connection. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The connection cookie </td></tr>
    <tr><td class="paramname">client</td><td>The "name" of the client </td></tr>
    <tr><td class="paramname">nclient</td><td>The number of bytes in the client name </td></tr>
    <tr><td class="paramname">flags</td><td>Tap connection flags </td></tr>
    <tr><td class="paramname">userdata</td><td>Specific userdata the engine may know how to use </td></tr>
    <tr><td class="paramname">nuserdata</td><td>The size of the userdata </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a tap iterator to iterate through the event stream </dd></dl>

</div>
</div>
<a id="a4271481ef65ddd9e19e21af3aef8b229"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4271481ef65ddd9e19e21af3aef8b229">&#9670;&nbsp;</a></span>initialize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* engine_interface_v1::initialize) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const char *config_str)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize an engine instance. This is called <em>after</em> creation, but before the engine may be used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">config_str</td><td>configuration this engine needs to initialize itself. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acb4a9ddd1b457a5392de8d61ae381ca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb4a9ddd1b457a5392de8d61ae381ca8">&#9670;&nbsp;</a></span>interface</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structengine__interface.html">engine_interface</a> engine_interface_v1::interface</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Engine info. </p>

</div>
</div>
<a id="a651a9a2ba3ab4a0af1587ff9141074a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a651a9a2ba3ab4a0af1587ff9141074a2">&#9670;&nbsp;</a></span>item_set_cas</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* engine_interface_v1::item_set_cas) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, item *item, uint64_t cas)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the CAS id on an item. </p>

</div>
</div>
<a id="aee925bf1864887946c2dc7df74fb190b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee925bf1864887946c2dc7df74fb190b">&#9670;&nbsp;</a></span>release</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* engine_interface_v1::release) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, item *item)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Indicate that a caller who received an item no longer needs it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The cookie provided by the frontend </td></tr>
    <tr><td class="paramname">item</td><td>the item to be released </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8c643876f6d62998971930e89374f8ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c643876f6d62998971930e89374f8ae">&#9670;&nbsp;</a></span>remove</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* engine_interface_v1::remove) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, const void *key, const size_t nkey, uint64_t cas, uint16_t vbucket)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove an item.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The cookie provided by the frontend </td></tr>
    <tr><td class="paramname">key</td><td>the key identifying the item to be removed </td></tr>
    <tr><td class="paramname">nkey</td><td>the length of the key </td></tr>
    <tr><td class="paramname">vbucket</td><td>the virtual bucket id</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ENGINE_SUCCESS if all goes well </dd></dl>

</div>
</div>
<a id="acaeabdba765f3a043596415c2fdc8bb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaeabdba765f3a043596415c2fdc8bb9">&#9670;&nbsp;</a></span>reset_stats</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* engine_interface_v1::reset_stats) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset the stats.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The cookie provided by the frontend </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab159a5e583ace450f90981088b8f2b8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab159a5e583ace450f90981088b8f2b8f">&#9670;&nbsp;</a></span>store</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* engine_interface_v1::store) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, item *item, uint64_t *cas, ENGINE_STORE_OPERATION operation, uint16_t vbucket)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Store an item.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The cookie provided by the frontend </td></tr>
    <tr><td class="paramname">item</td><td>the item to store </td></tr>
    <tr><td class="paramname">cas</td><td>the CAS value for conditional sets </td></tr>
    <tr><td class="paramname">operation</td><td>the type of store operation to perform. </td></tr>
    <tr><td class="paramname">vbucket</td><td>the virtual bucket id</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ENGINE_SUCCESS if all goes well </dd></dl>

</div>
</div>
<a id="ab3d8d0055eebb31a89a3420bc2a983e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3d8d0055eebb31a89a3420bc2a983e1">&#9670;&nbsp;</a></span>tap_notify</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* engine_interface_v1::tap_notify) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, void *engine_specific, uint16_t nengine, uint8_t ttl, uint16_t tap_flags, tap_event_t tap_event, uint32_t tap_seqno, const void *key, size_t nkey, uint32_t <a class="el" href="handler0alter_8cc.html#a4069e5feb5d17fbac4d832518d169cdd">flags</a>, uint32_t exptime, uint64_t cas, const void *<a class="el" href="row0sel_8cc.html#ad5785aee834440a0628434c5e5ab94d2">data</a>, size_t ndata, uint16_t vbucket)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback for all incoming TAP messages. It is up to the engine to determine what to do with the event. The core will create and send a TAP_ACK message if the flag section contains TAP_FLAG_SEND_ACK with the status byte mapped from the return code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>identification for the tap stream </td></tr>
    <tr><td class="paramname">engine_specific</td><td>pointer to engine specific data (received) </td></tr>
    <tr><td class="paramname">nengine_specific</td><td>number of bytes of engine specific data </td></tr>
    <tr><td class="paramname">ttl</td><td>ttl for this item (Tap stream hops) </td></tr>
    <tr><td class="paramname">tap_flags</td><td>tap flags for this object </td></tr>
    <tr><td class="paramname">tap_event</td><td>the tap event from over the wire </td></tr>
    <tr><td class="paramname">tap_seqno</td><td>sequence number for this item </td></tr>
    <tr><td class="paramname">key</td><td>the key in the message </td></tr>
    <tr><td class="paramname">nkey</td><td>the number of bytes in the key </td></tr>
    <tr><td class="paramname">flags</td><td>the flags for the item </td></tr>
    <tr><td class="paramname">exptime</td><td>the expiry time for the object </td></tr>
    <tr><td class="paramname">cas</td><td>the cas for the item </td></tr>
    <tr><td class="paramname">data</td><td>the data for the item </td></tr>
    <tr><td class="paramname">ndata</td><td>the number of bytes in the object </td></tr>
    <tr><td class="paramname">vbucket</td><td>the virtual bucket for the object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ENGINE_SUCCESS for success </dd></dl>

</div>
</div>
<a id="ab7ef35ce56dd2889067c55f101179612"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7ef35ce56dd2889067c55f101179612">&#9670;&nbsp;</a></span>unknown_command</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* engine_interface_v1::unknown_command) (<a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> *handle, const void *cookie, <a class="el" href="unionprotocol__binary__request__header.html">protocol_binary_request_header</a> *<a class="el" href="structrequest.html">request</a>, <a class="el" href="group___engine.html#ga8bb79ab44dc192cae02c9d50f89bc6e2">ADD_RESPONSE</a> response)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Any unknown command will be considered engine specific.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the engine handle </td></tr>
    <tr><td class="paramname">cookie</td><td>The cookie provided by the frontend </td></tr>
    <tr><td class="paramname">request</td><td>pointer to request header to be filled in </td></tr>
    <tr><td class="paramname">response</td><td>function to transmit data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ENGINE_SUCCESS if all goes well </dd></dl>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>plugin/innodb_memcached/daemon_memcached/include/memcached/<a class="el" href="engine_8h_source.html">engine.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
