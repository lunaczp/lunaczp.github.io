<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: storage/innobase/trx/trx0roll.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_7d6b8692e14baa729600e27a3e4f8b7c.html">trx</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">trx0roll.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="trx0roll_8h_source.html">trx0roll.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fsp0fsp_8h_source.html">fsp0fsp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mach0data_8h_source.html">mach0data.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0rseg_8h_source.html">trx0rseg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0trx_8h_source.html">trx0trx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0undo_8h_source.html">trx0undo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0rec_8h_source.html">trx0rec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="que0que_8h_source.html">que0que.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="usr0sess_8h_source.html">usr0sess.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0start_8h_source.html">srv0start.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="read0read_8h_source.html">read0read.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0undo_8h_source.html">row0undo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0mysql_8h_source.html">row0mysql.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lock0lock_8h_source.html">lock0lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pars0pars_8h_source.html">pars0pars.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0mon_8h_source.html">srv0mon.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0sys_8h_source.html">trx0sys.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae09962769f3e62dd7cd1ff67c5b27b0a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ae09962769f3e62dd7cd1ff67c5b27b0a">TRX_ROLL_TRUNC_THRESHOLD</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ae09962769f3e62dd7cd1ff67c5b27b0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad2e1a5e5d202b00e407fed95641386fc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ad2e1a5e5d202b00e407fed95641386fc">trx_rollback_finish</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>)</td></tr>
<tr class="separator:ad2e1a5e5d202b00e407fed95641386fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7b5e8cee53125996fd329e60b8d8b53"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ab7b5e8cee53125996fd329e60b8d8b53">trx_rollback_to_savepoint_low</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, <a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *savept)</td></tr>
<tr class="separator:ab7b5e8cee53125996fd329e60b8d8b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a101255efc192f2f225a1c7b3a9a02007"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a101255efc192f2f225a1c7b3a9a02007">trx_rollback_to_savepoint</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, <a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *savept)</td></tr>
<tr class="separator:a101255efc192f2f225a1c7b3a9a02007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a265e70bdcbb3f320d82b35183caa3604"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a265e70bdcbb3f320d82b35183caa3604">trx_rollback_for_mysql_low</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>)</td></tr>
<tr class="separator:a265e70bdcbb3f320d82b35183caa3604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28892bc9bfe884abc920af7b1fbf9644"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a28892bc9bfe884abc920af7b1fbf9644">trx_rollback_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>)</td></tr>
<tr class="separator:a28892bc9bfe884abc920af7b1fbf9644"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcd951be749548cb92f2d4e4c17d30ac"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#afcd951be749548cb92f2d4e4c17d30ac">trx_rollback_last_sql_stat_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>)</td></tr>
<tr class="separator:afcd951be749548cb92f2d4e4c17d30ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee470c82dfb3744b37e700763b3a9a8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#abee470c82dfb3744b37e700763b3a9a8">trx_savepoint_find</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, const char *<a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>)</td></tr>
<tr class="separator:abee470c82dfb3744b37e700763b3a9a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad65f3dd677b26922f503c5928e679629"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ad65f3dd677b26922f503c5928e679629">trx_roll_savepoint_free</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *<a class="el" href="trx0roll_8cc.html#a32620d4133835b002e79bc2c121ba916">savep</a>)</td></tr>
<tr class="separator:ad65f3dd677b26922f503c5928e679629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6b0495b710e31dd958216cd69dada42"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ad6b0495b710e31dd958216cd69dada42">trx_roll_savepoints_free</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *<a class="el" href="trx0roll_8cc.html#a32620d4133835b002e79bc2c121ba916">savep</a>)</td></tr>
<tr class="separator:ad6b0495b710e31dd958216cd69dada42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1af4924bcca7323d1bdd642228ec30d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#af1af4924bcca7323d1bdd642228ec30d">__attribute__</a> ((nonnull, warn_unused_result)) <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_to_savepoint_for_mysql_low(<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a></td></tr>
<tr class="separator:af1af4924bcca7323d1bdd642228ec30d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa18d6b9de8d2261ac960679579c26dbc"><td class="memItemLeft" align="right" valign="top"><a id="aa18d6b9de8d2261ac960679579c26dbc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ut_ad</b> (<a class="el" href="trx0trx_8h.html#aeb57f17392e58a415fa4988da01ce360">trx_state_eq</a>(<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, TRX_STATE_ACTIVE))</td></tr>
<tr class="separator:aa18d6b9de8d2261ac960679579c26dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e9f67c721c77283fc104783885ce978"><td class="memItemLeft" align="right" valign="top"><a id="a7e9f67c721c77283fc104783885ce978"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ut_ad</b> (<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>-&gt;in_mysql_trx_list)</td></tr>
<tr class="separator:a7e9f67c721c77283fc104783885ce978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a945cc21b9e60cc71e177815c75c37e90"><td class="memItemLeft" align="right" valign="top"><a id="a945cc21b9e60cc71e177815c75c37e90"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>trx_roll_savepoints_free</b> (<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, <a class="el" href="ut0lst_8h.html#abee09ef35b3c906a78bacab7d71288bd">UT_LIST_GET_NEXT</a>(trx_savepoints, <a class="el" href="trx0roll_8cc.html#a32620d4133835b002e79bc2c121ba916">savep</a>))</td></tr>
<tr class="separator:a945cc21b9e60cc71e177815c75c37e90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bbf525580ceed2d9d550510f3739968"><td class="memItemLeft" align="right" valign="top"><a id="a9bbf525580ceed2d9d550510f3739968"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>trx_mark_sql_stat_end</b> (<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>)</td></tr>
<tr class="separator:a9bbf525580ceed2d9d550510f3739968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8a38a920be18271daddbe60e7a8d7d"><td class="memItemLeft" align="right" valign="top"><a id="a2b8a38a920be18271daddbe60e7a8d7d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>return</b> (<a class="el" href="row0import_8cc.html#a52482fdd3721e7db69dc740aefee8ad4">err</a>)</td></tr>
<tr class="separator:a2b8a38a920be18271daddbe60e7a8d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61626639a04c562c87713f0c808344b6"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a61626639a04c562c87713f0c808344b6">trx_rollback_to_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, const char *savepoint_name, ib_int64_t *<a class="el" href="trx0roll_8cc.html#aace15df0c2ae2cbbebd64b14ba704c5b">mysql_binlog_cache_pos</a>)</td></tr>
<tr class="separator:a61626639a04c562c87713f0c808344b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fbc2f937ddde8a32f160cd0d5c2d553"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a7fbc2f937ddde8a32f160cd0d5c2d553">trx_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, const char *savepoint_name, ib_int64_t binlog_cache_pos)</td></tr>
<tr class="separator:a7fbc2f937ddde8a32f160cd0d5c2d553"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a029a49b8a42642382331eab2114a4a2b"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a029a49b8a42642382331eab2114a4a2b">trx_release_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, const char *savepoint_name)</td></tr>
<tr class="separator:a029a49b8a42642382331eab2114a4a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a371b0b4d385584cf0b015aa325024a0b"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a371b0b4d385584cf0b015aa325024a0b">trx_is_recv</a> (const <a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>)</td></tr>
<tr class="separator:a371b0b4d385584cf0b015aa325024a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6994b07193b7edec487f31182487d03d"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="structtrx__savept__t.html">trx_savept_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a6994b07193b7edec487f31182487d03d">trx_savept_take</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>)</td></tr>
<tr class="separator:a6994b07193b7edec487f31182487d03d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af88b4d0f76bd2eb463c33c7973f11036"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#af88b4d0f76bd2eb463c33c7973f11036">trx_rollback_active</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>)</td></tr>
<tr class="separator:af88b4d0f76bd2eb463c33c7973f11036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af406eab4d8b235ac320d238c42239c91"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#af406eab4d8b235ac320d238c42239c91">trx_rollback_resurrected</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, ibool all)</td></tr>
<tr class="separator:af406eab4d8b235ac320d238c42239c91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c61b83e16d2b5d52d1fdb599206cdf5"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a0c61b83e16d2b5d52d1fdb599206cdf5">trx_rollback_or_clean_recovered</a> (ibool all)</td></tr>
<tr class="separator:a0c61b83e16d2b5d52d1fdb599206cdf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcac0bd27ab376e9ba5425786c33809c"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN os_thread_ret_t <a class="el" href="os0thread_8h.html#a973a9b61391e09b9846b41b469363aa5">DECLARE_THREAD</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#afcac0bd27ab376e9ba5425786c33809c">trx_rollback_or_clean_all_recovered</a> (void *arg <a class="el" href="trx0undo_8cc.html#aa965850120c0683c58e8c762cdc0fb17">__attribute__</a>((unused)))</td></tr>
<tr class="separator:afcac0bd27ab376e9ba5425786c33809c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a30aaf7caff330211ec830c86bb1375"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a5a30aaf7caff330211ec830c86bb1375">trx_undo_arr_create</a> (ulint n_cells)</td></tr>
<tr class="separator:a5a30aaf7caff330211ec830c86bb1375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab40628101f74f78481b93bc8d69b175e"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ab40628101f74f78481b93bc8d69b175e">trx_undo_arr_free</a> (<a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a> *arr)</td></tr>
<tr class="separator:ab40628101f74f78481b93bc8d69b175e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf35facbbf04aca4f480bc0d7c148ebc"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#acf35facbbf04aca4f480bc0d7c148ebc">trx_undo_arr_store_info</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> undo_no)</td></tr>
<tr class="separator:acf35facbbf04aca4f480bc0d7c148ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ab08588adaf9c4bfc74e79def1aee36"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a5ab08588adaf9c4bfc74e79def1aee36">trx_undo_arr_remove_info</a> (<a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a> *arr, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> undo_no)</td></tr>
<tr class="separator:a5ab08588adaf9c4bfc74e79def1aee36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad23a42a643cca66f231ac21e30c3edfd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ad23a42a643cca66f231ac21e30c3edfd">trx_undo_arr_get_biggest</a> (const <a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a> *arr)</td></tr>
<tr class="separator:ad23a42a643cca66f231ac21e30c3edfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86a324ee9a10ce820fd83622a5b0286a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a86a324ee9a10ce820fd83622a5b0286a">trx_roll_try_truncate</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>)</td></tr>
<tr class="separator:a86a324ee9a10ce820fd83622a5b0286a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63c1c5bddcbe97a73748b64edd7f7169"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a63c1c5bddcbe97a73748b64edd7f7169">trx_roll_pop_top_rec</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *<a class="el" href="trx0undo_8cc.html#a532b14c0c1ea32ce4a61aef488490807">undo</a>, <a class="el" href="structmtr__t.html">mtr_t</a> *<a class="el" href="trx0undo_8cc.html#a9013d42949ecc21fdd8de523420df8ba">mtr</a>)</td></tr>
<tr class="separator:a63c1c5bddcbe97a73748b64edd7f7169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18bcf3803e0465f253734386f0e05853"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a18bcf3803e0465f253734386f0e05853">trx_roll_pop_top_rec_of_trx</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> <a class="el" href="ibuf0ibuf_8cc.html#a2dfd6b5310e6dd7028210bb6a8d13549">limit</a>, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *<a class="el" href="btr0cur_8cc.html#ad1c4f16d584f1fabcea984746cf904a1">roll_ptr</a>, <a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="el" href="trx0rec_8cc.html#a18459ed20cf7df7b5953ca0f9f3fea33">heap</a>)</td></tr>
<tr class="separator:a18bcf3803e0465f253734386f0e05853"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab156037385d2a0067f2c4e91113a09a5"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ab156037385d2a0067f2c4e91113a09a5">trx_undo_rec_reserve</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> undo_no)</td></tr>
<tr class="separator:ab156037385d2a0067f2c4e91113a09a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c075d82bc33fc4266239fcdc0f6b5ca"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a0c075d82bc33fc4266239fcdc0f6b5ca">trx_undo_rec_release</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> undo_no)</td></tr>
<tr class="separator:a0c075d82bc33fc4266239fcdc0f6b5ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54a60b40f5c2ac1023cbd755b432ca57"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structque__fork__t.html">que_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a54a60b40f5c2ac1023cbd755b432ca57">trx_roll_graph_build</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>)</td></tr>
<tr class="separator:a54a60b40f5c2ac1023cbd755b432ca57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeee8a47791a80019b8d8d6e8bb336bb6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#aeee8a47791a80019b8d8d6e8bb336bb6">trx_rollback_start</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, ib_id_t roll_limit)</td></tr>
<tr class="separator:aeee8a47791a80019b8d8d6e8bb336bb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbf49219b481f5ac29ff1164c770415f"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="structroll__node__t.html">roll_node_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#adbf49219b481f5ac29ff1164c770415f">roll_node_create</a> (<a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="el" href="trx0rec_8cc.html#a18459ed20cf7df7b5953ca0f9f3fea33">heap</a>)</td></tr>
<tr class="separator:adbf49219b481f5ac29ff1164c770415f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2418c7146c80869f19950235f425a585"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a2418c7146c80869f19950235f425a585">trx_rollback_step</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *<a class="el" href="row0upd_8cc.html#a6a975f02e8f3909627020f06146ee9dd">thr</a>)</td></tr>
<tr class="separator:a2418c7146c80869f19950235f425a585"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5a1eff4d854c6e5144b0f2084e5355ca"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a5a1eff4d854c6e5144b0f2084e5355ca">trx_rollback_or_clean_is_active</a></td></tr>
<tr class="separator:a5a1eff4d854c6e5144b0f2084e5355ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9da4a2de8f19d092d328a5147adbc43"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ac9da4a2de8f19d092d328a5147adbc43">trx_roll_crash_recv_trx</a> = NULL</td></tr>
<tr class="separator:ac9da4a2de8f19d092d328a5147adbc43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0537f6be87635c0d58a82c35b96cf2c4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a0537f6be87635c0d58a82c35b96cf2c4">trx_roll_max_undo_no</a></td></tr>
<tr class="separator:a0537f6be87635c0d58a82c35b96cf2c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6602423933207992600930ceaa258936"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a6602423933207992600930ceaa258936">trx_roll_progress_printed_pct</a></td></tr>
<tr class="separator:a6602423933207992600930ceaa258936"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32620d4133835b002e79bc2c121ba916"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a32620d4133835b002e79bc2c121ba916">savep</a></td></tr>
<tr class="separator:a32620d4133835b002e79bc2c121ba916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aace15df0c2ae2cbbebd64b14ba704c5b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> ib_int64_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#aace15df0c2ae2cbbebd64b14ba704c5b">mysql_binlog_cache_pos</a></td></tr>
<tr class="separator:aace15df0c2ae2cbbebd64b14ba704c5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac577b63e4fe186e72965280ce66850f2"><td class="memItemLeft" align="right" valign="top"><a id="ac577b63e4fe186e72965280ce66850f2"></a>
<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>&#160;</td><td class="memItemRight" valign="bottom"><b>op_info</b> = &quot;rollback <a class="el" href="ha__innodb_8cc.html#a255ec67df7b761df35e13aa7183c4bd2">to</a> <a class="el" href="row0merge_8cc.html#aaba8987b345486af51614561bddd051b">a</a> savepoint&quot;</td></tr>
<tr class="separator:ac577b63e4fe186e72965280ce66850f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52482fdd3721e7db69dc740aefee8ad4"><td class="memItemLeft" align="right" valign="top"><a id="a52482fdd3721e7db69dc740aefee8ad4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>err</b> = <a class="el" href="trx0roll_8cc.html#a101255efc192f2f225a1c7b3a9a02007">trx_rollback_to_savepoint</a>(<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, &amp;<a class="el" href="trx0roll_8cc.html#a32620d4133835b002e79bc2c121ba916">savep</a>-&gt;savept)</td></tr>
<tr class="separator:a52482fdd3721e7db69dc740aefee8ad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Transaction rollback</p>
<p>Created 3/26/1996 Heikki Tuuri </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae09962769f3e62dd7cd1ff67c5b27b0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae09962769f3e62dd7cd1ff67c5b27b0a">&#9670;&nbsp;</a></span>TRX_ROLL_TRUNC_THRESHOLD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_ROLL_TRUNC_THRESHOLD&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This many pages must be undone before a truncate is tried within rollback </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af1af4924bcca7323d1bdd642228ec30d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1af4924bcca7323d1bdd642228ec30d">&#9670;&nbsp;</a></span>__attribute__()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(nonnull, warn_unused_result)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Rolls back a transaction back to a named savepoint. Modifications after the savepoint are undone but InnoDB does NOT release the corresponding locks which are stored in memory. If a lock is 'implicit', that is, a new inserted row holds a lock where the lock information is carried by the trx id stored in the row, these locks are naturally released in the rollback. Savepoints which were set after this savepoint are deleted. </p><dl class="section return"><dt>Returns</dt><dd>if no savepoint of the name found then DB_NO_SAVEPOINT, otherwise DB_SUCCESS </dd></dl>

</div>
</div>
<a id="adbf49219b481f5ac29ff1164c770415f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbf49219b481f5ac29ff1164c770415f">&#9670;&nbsp;</a></span>roll_node_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="structroll__node__t.html">roll_node_t</a>* roll_node_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a rollback command node struct. </p><dl class="section return"><dt>Returns</dt><dd>own: rollback node struct </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">heap</td><td>in: mem heap where created </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a371b0b4d385584cf0b015aa325024a0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a371b0b4d385584cf0b015aa325024a0b">&#9670;&nbsp;</a></span>trx_is_recv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ibool trx_is_recv </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determines if this transaction is rolling back an incomplete transaction in crash recovery. </p><dl class="section return"><dt>Returns</dt><dd>TRUE if trx is an incomplete transaction that is being rolled back in crash recovery </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a029a49b8a42642382331eab2114a4a2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a029a49b8a42642382331eab2114a4a2b">&#9670;&nbsp;</a></span>trx_release_savepoint_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_release_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases only the named savepoint. Savepoints which were set after this savepoint are left as is. </p><dl class="section return"><dt>Returns</dt><dd>if no savepoint of the name found then DB_NO_SAVEPOINT, otherwise DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a54a60b40f5c2ac1023cbd755b432ca57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54a60b40f5c2ac1023cbd755b432ca57">&#9670;&nbsp;</a></span>trx_roll_graph_build()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structque__fork__t.html">que_t</a>* trx_roll_graph_build </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Builds an undo 'query' graph for a transaction. The actual rollback is performed by executing this query graph like a query subprocedure call. The reply about the completion of the rollback will be sent by this graph. </p><dl class="section return"><dt>Returns</dt><dd>own: the query graph </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: trx handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a63c1c5bddcbe97a73748b64edd7f7169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63c1c5bddcbe97a73748b64edd7f7169">&#9670;&nbsp;</a></span>trx_roll_pop_top_rec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_roll_pop_top_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pops the topmost undo log record in a single undo log and updates the info about the topmost record in the undo log memory struct. </p><dl class="section return"><dt>Returns</dt><dd>undo log record, the page s-latched </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">undo</td><td>in: undo log </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a18bcf3803e0465f253734386f0e05853"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18bcf3803e0465f253734386f0e05853">&#9670;&nbsp;</a></span>trx_roll_pop_top_rec_of_trx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_roll_pop_top_rec_of_trx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pops the topmost record when the two undo logs of a transaction are seen as a single stack of records ordered by their undo numbers. Inserts the undo number of the popped undo record to the array of currently processed undo numbers in the transaction. When the query thread finishes processing of this undo record, it must be released with trx_undo_rec_release. </p><dl class="section return"><dt>Returns</dt><dd>undo log record copied to heap, NULL if none left, or if the undo number of the top record would be less than the limit </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">limit</td><td>in: least undo number we need </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>out: roll pointer to undo record </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap where copied </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad65f3dd677b26922f503c5928e679629"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad65f3dd677b26922f503c5928e679629">&#9670;&nbsp;</a></span>trx_roll_savepoint_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_roll_savepoint_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Frees a single savepoint struct. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savep</td><td>in: savepoint to free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad6b0495b710e31dd958216cd69dada42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6b0495b710e31dd958216cd69dada42">&#9670;&nbsp;</a></span>trx_roll_savepoints_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_roll_savepoints_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees savepoint structs starting from savep. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savep</td><td>in: free all savepoints starting with this savepoint i </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a86a324ee9a10ce820fd83622a5b0286a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86a324ee9a10ce820fd83622a5b0286a">&#9670;&nbsp;</a></span>trx_roll_try_truncate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_roll_try_truncate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tries truncate the undo logs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af88b4d0f76bd2eb463c33c7973f11036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af88b4d0f76bd2eb463c33c7973f11036">&#9670;&nbsp;</a></span>trx_rollback_active()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_rollback_active </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Roll back an active transaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad2e1a5e5d202b00e407fed95641386fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2e1a5e5d202b00e407fed95641386fc">&#9670;&nbsp;</a></span>trx_rollback_finish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_rollback_finish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Finishes a transaction rollback. in: transaction</p>
<p>Finishes a transaction rollback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a28892bc9bfe884abc920af7b1fbf9644"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28892bc9bfe884abc920af7b1fbf9644">&#9670;&nbsp;</a></span>trx_rollback_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback a transaction used in MySQL. </p><dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a265e70bdcbb3f320d82b35183caa3604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a265e70bdcbb3f320d82b35183caa3604">&#9670;&nbsp;</a></span>trx_rollback_for_mysql_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_for_mysql_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Rollback a transaction used in MySQL. </p><dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afcd951be749548cb92f2d4e4c17d30ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcd951be749548cb92f2d4e4c17d30ac">&#9670;&nbsp;</a></span>trx_rollback_last_sql_stat_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_last_sql_stat_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback the latest SQL statement for MySQL. </p><dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afcac0bd27ab376e9ba5425786c33809c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcac0bd27ab376e9ba5425786c33809c">&#9670;&nbsp;</a></span>trx_rollback_or_clean_all_recovered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN os_thread_ret_t <a class="el" href="os0thread_8h.html#a973a9b61391e09b9846b41b469363aa5">DECLARE_THREAD</a>() trx_rollback_or_clean_all_recovered </td>
          <td>(</td>
          <td class="paramtype">void *arg &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused)</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback or clean up any incomplete transactions which were encountered in crash recovery. If the transaction already was committed, then we clean up a possible insert undo log. If the transaction was not yet committed, then we roll it back. Note: this is done in a background thread. </p><dl class="section return"><dt>Returns</dt><dd>a dummy parameter </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">__attribute__</td><td>in: a dummy parameter required by os_thread_create </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0c61b83e16d2b5d52d1fdb599206cdf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c61b83e16d2b5d52d1fdb599206cdf5">&#9670;&nbsp;</a></span>trx_rollback_or_clean_recovered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_rollback_or_clean_recovered </td>
          <td>(</td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>all</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback or clean up any incomplete transactions which were encountered in crash recovery. If the transaction already was committed, then we clean up a possible insert undo log. If the transaction was not yet committed, then we roll it back. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">all</td><td>in: FALSE=roll back dictionary transactions; TRUE=roll back all non-PREPARED transactions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af406eab4d8b235ac320d238c42239c91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af406eab4d8b235ac320d238c42239c91">&#9670;&nbsp;</a></span>trx_rollback_resurrected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool trx_rollback_resurrected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>all</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Rollback or clean up any resurrected incomplete transactions. It assumes that the caller holds the <a class="el" href="structtrx__sys__t.html#a163b5ed9c772c2bc25419ef691cbb43f">trx_sys_t::mutex</a> and it will release the lock if it does a clean up or rollback. </p><dl class="section return"><dt>Returns</dt><dd>TRUE if the transaction was cleaned up or rolled back and trx_sys-&gt;mutex was released. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction to rollback or clean </td></tr>
    <tr><td class="paramname">all</td><td>in: FALSE=roll back dictionary transactions; TRUE=roll back all non-PREPARED transactions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeee8a47791a80019b8d8d6e8bb336bb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeee8a47791a80019b8d8d6e8bb336bb6">&#9670;&nbsp;</a></span>trx_rollback_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structque__thr__t.html">que_thr_t</a>* trx_rollback_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_id_t&#160;</td>
          <td class="paramname"><em>roll_limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Starts a rollback operation, creates the UNDO graph that will do the actual undo operation. </p><dl class="section return"><dt>Returns</dt><dd>query graph thread that will perform the UNDO operations. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">roll_limit</td><td>in: rollback to undo no (for partial undo), 0 if we are rolling back the entire transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2418c7146c80869f19950235f425a585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2418c7146c80869f19950235f425a585">&#9670;&nbsp;</a></span>trx_rollback_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="structque__thr__t.html">que_thr_t</a>* trx_rollback_step </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Performs an execution step for a rollback command node in a query graph. </p><dl class="section return"><dt>Returns</dt><dd>query thread to run next, or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a101255efc192f2f225a1c7b3a9a02007"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a101255efc192f2f225a1c7b3a9a02007">&#9670;&nbsp;</a></span>trx_rollback_to_savepoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_to_savepoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savept</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback a transaction to a given savepoint or do a complete rollback. </p><dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savept</td><td>in: pointer to savepoint undo number, if partial rollback requested, or NULL for complete rollback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a61626639a04c562c87713f0c808344b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61626639a04c562c87713f0c808344b6">&#9670;&nbsp;</a></span>trx_rollback_to_savepoint_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_to_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_int64_t *&#160;</td>
          <td class="paramname"><em>mysql_binlog_cache_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rolls back a transaction back to a named savepoint. Modifications after the savepoint are undone but InnoDB does NOT release the corresponding locks which are stored in memory. If a lock is 'implicit', that is, a new inserted row holds a lock where the lock information is carried by the trx id stored in the row, these locks are naturally released in the rollback. Savepoints which were set after this savepoint are deleted. </p><dl class="section return"><dt>Returns</dt><dd>if no savepoint of the name found then DB_NO_SAVEPOINT, otherwise DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
    <tr><td class="paramname">mysql_binlog_cache_pos</td><td>out: the MySQL binlog cache position corresponding to this savepoint; MySQL needs this information to remove the binlog entries of the queries executed after the savepoint </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab7b5e8cee53125996fd329e60b8d8b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7b5e8cee53125996fd329e60b8d8b53">&#9670;&nbsp;</a></span>trx_rollback_to_savepoint_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_rollback_to_savepoint_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savept</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Rollback a transaction used in MySQL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savept</td><td>in: pointer to savepoint undo number, if partial rollback requested, or NULL for complete rollback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abee470c82dfb3744b37e700763b3a9a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee470c82dfb3744b37e700763b3a9a8">&#9670;&nbsp;</a></span>trx_savepoint_find()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a>* trx_savepoint_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Search for a savepoint using name. </p><dl class="section return"><dt>Returns</dt><dd>savepoint if found else NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">name</td><td>in: savepoint name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7fbc2f937ddde8a32f160cd0d5c2d553"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fbc2f937ddde8a32f160cd0d5c2d553">&#9670;&nbsp;</a></span>trx_savepoint_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_int64_t&#160;</td>
          <td class="paramname"><em>binlog_cache_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a named savepoint. If the transaction is not yet started, starts it. If there is already a savepoint of the same name, this call erases that old savepoint and replaces it with a new. Savepoints are deleted in a transaction commit or rollback. </p><dl class="section return"><dt>Returns</dt><dd>always DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
    <tr><td class="paramname">binlog_cache_pos</td><td>in: MySQL binlog cache position corresponding to this connection at the time of the savepoint </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6994b07193b7edec487f31182487d03d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6994b07193b7edec487f31182487d03d">&#9670;&nbsp;</a></span>trx_savept_take()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="structtrx__savept__t.html">trx_savept_t</a> trx_savept_take </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a transaction savepoint taken at this point in time. </p><dl class="section return"><dt>Returns</dt><dd>savepoint </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5a30aaf7caff330211ec830c86bb1375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a30aaf7caff330211ec830c86bb1375">&#9670;&nbsp;</a></span>trx_undo_arr_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a>* trx_undo_arr_create </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_cells</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates an undo number array. </p><dl class="section return"><dt>Returns</dt><dd>own: undo number array </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n_cells</td><td>Number of cells </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab40628101f74f78481b93bc8d69b175e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab40628101f74f78481b93bc8d69b175e">&#9670;&nbsp;</a></span>trx_undo_arr_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_undo_arr_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a> *&#160;</td>
          <td class="paramname"><em>arr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees an undo number array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arr</td><td>in: undo number array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad23a42a643cca66f231ac21e30c3edfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad23a42a643cca66f231ac21e30c3edfd">&#9670;&nbsp;</a></span>trx_undo_arr_get_biggest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> trx_undo_arr_get_biggest </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a> *&#160;</td>
          <td class="paramname"><em>arr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the biggest undo number in an array. </p><dl class="section return"><dt>Returns</dt><dd>biggest value, 0 if the array is empty </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arr</td><td>in: undo number array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5ab08588adaf9c4bfc74e79def1aee36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ab08588adaf9c4bfc74e79def1aee36">&#9670;&nbsp;</a></span>trx_undo_arr_remove_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_undo_arr_remove_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__undo__arr__t.html">trx_undo_arr_t</a> *&#160;</td>
          <td class="paramname"><em>arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>undo_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Removes an undo number from the array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arr</td><td>in: undo number array </td></tr>
    <tr><td class="paramname">undo_no</td><td>in: undo number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acf35facbbf04aca4f480bc0d7c148ebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf35facbbf04aca4f480bc0d7c148ebc">&#9670;&nbsp;</a></span>trx_undo_arr_store_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool trx_undo_arr_store_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>undo_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Stores info of an undo log record to the array if it is not stored yet. </p><dl class="section return"><dt>Returns</dt><dd>FALSE if the record already existed in the array </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">undo_no</td><td>in: undo number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0c075d82bc33fc4266239fcdc0f6b5ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c075d82bc33fc4266239fcdc0f6b5ca">&#9670;&nbsp;</a></span>trx_undo_rec_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_undo_rec_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>undo_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases a reserved undo record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
    <tr><td class="paramname">undo_no</td><td>in: undo number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab156037385d2a0067f2c4e91113a09a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab156037385d2a0067f2c4e91113a09a5">&#9670;&nbsp;</a></span>trx_undo_rec_reserve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ibool trx_undo_rec_reserve </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>undo_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reserves an undo log record for a query thread to undo. This should be called if the query thread gets the undo log record not using the pop function above. </p><dl class="section return"><dt>Returns</dt><dd>TRUE if succeeded </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
    <tr><td class="paramname">undo_no</td><td>in: undo number of the record </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aace15df0c2ae2cbbebd64b14ba704c5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aace15df0c2ae2cbbebd64b14ba704c5b">&#9670;&nbsp;</a></span>mysql_binlog_cache_pos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">* mysql_binlog_cache_pos</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div><div class="line">        <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="btr0cur_8cc.html#aa2089f0f61b443ddde99d203fc1603fc">err</a></div><div class="ttc" id="db0err_8h_html_a6fdd08971b32ee513b20967238f1654d"><div class="ttname"><a href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a></div><div class="ttdeci">dberr_t</div><div class="ttdef"><b>Definition:</b> db0err.h:30</div></div>
<div class="ttc" id="btr0cur_8cc_html_aa2089f0f61b443ddde99d203fc1603fc"><div class="ttname"><a href="btr0cur_8cc.html#aa2089f0f61b443ddde99d203fc1603fc">err</a></div><div class="ttdeci">dberr_t err</div><div class="ttdef"><b>Definition:</b> btr0cur.cc:1149</div></div>
</div><!-- fragment --><p>&lt; out: the MySQL binlog cache position corresponding to this savepoint; MySQL needs this information to remove the binlog entries of the queries executed after the savepoint </p>

</div>
</div>
<a id="a32620d4133835b002e79bc2c121ba916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32620d4133835b002e79bc2c121ba916">&#9670;&nbsp;</a></span>savep</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a>* savep</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&lt; in/out: transaction in/out: savepoint </p>

</div>
</div>
<a id="ac9da4a2de8f19d092d328a5147adbc43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9da4a2de8f19d092d328a5147adbc43">&#9670;&nbsp;</a></span>trx_roll_crash_recv_trx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structtrx__t.html">trx_t</a>* trx_roll_crash_recv_trx = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>In crash recovery, the current trx to be rolled back; NULL otherwise </p>

</div>
</div>
<a id="a0537f6be87635c0d58a82c35b96cf2c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0537f6be87635c0d58a82c35b96cf2c4">&#9670;&nbsp;</a></span>trx_roll_max_undo_no</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> trx_roll_max_undo_no</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>In crash recovery we set this to the undo n:o of the current trx to be rolled back. Then we can print how many % the rollback has progressed. </p>

</div>
</div>
<a id="a6602423933207992600930ceaa258936"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6602423933207992600930ceaa258936">&#9670;&nbsp;</a></span>trx_roll_progress_printed_pct</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ulint trx_roll_progress_printed_pct</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Auxiliary variable which tells the previous progress % we printed </p>

</div>
</div>
<a id="a5a1eff4d854c6e5144b0f2084e5355ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a1eff4d854c6e5144b0f2084e5355ca">&#9670;&nbsp;</a></span>trx_rollback_or_clean_is_active</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trx_rollback_or_clean_is_active</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>true if <a class="el" href="trx0roll_8cc.html#afcac0bd27ab376e9ba5425786c33809c">trx_rollback_or_clean_all_recovered()</a> thread is active </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
