<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: storage/innobase/buf/buf0dblwr.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_19e7dc57837d445aa8a255d4d3e40a16.html">buf</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">buf0dblwr.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="buf0dblwr_8h_source.html">buf0dblwr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buf0buf_8h_source.html">buf0buf.h</a>&quot;</code><br />
<code>#include &quot;buf0checksum.h&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0start_8h_source.html">srv0start.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0srv_8h_source.html">srv0srv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="page0zip_8h_source.html">page0zip.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0sys_8h_source.html">trx0sys.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a58dec8fb6e33784d5b37f37a1d46fe47"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#a58dec8fb6e33784d5b37f37a1d46fe47">buf_dblwr_page_inside</a> (ulint <a class="el" href="ibuf0ibuf_8cc.html#a4856a6e725a44f73f3d7a0201373c5b7">page_no</a>)</td></tr>
<tr class="separator:a58dec8fb6e33784d5b37f37a1d46fe47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac223789c27e1724667506e6696fa4b3"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#aac223789c27e1724667506e6696fa4b3">buf_dblwr_get</a> (<a class="el" href="structmtr__t.html">mtr_t</a> *<a class="el" href="trx0undo_8cc.html#a9013d42949ecc21fdd8de523420df8ba">mtr</a>)</td></tr>
<tr class="separator:aac223789c27e1724667506e6696fa4b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb16d37d97343dccaa3eddb72bcfe63c"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#acb16d37d97343dccaa3eddb72bcfe63c">buf_dblwr_sync_datafiles</a> ()</td></tr>
<tr class="separator:acb16d37d97343dccaa3eddb72bcfe63c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af15e906fc603ed387abb74b575a63cbc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#af15e906fc603ed387abb74b575a63cbc">buf_dblwr_init</a> (byte *doublewrite)</td></tr>
<tr class="separator:af15e906fc603ed387abb74b575a63cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae04da9c9db457c394e73e851b4c6e9b9"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#ae04da9c9db457c394e73e851b4c6e9b9">buf_dblwr_create</a> (void)</td></tr>
<tr class="separator:ae04da9c9db457c394e73e851b4c6e9b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad26efaa199ea803573631d5e3ffb7ad7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#ad26efaa199ea803573631d5e3ffb7ad7">buf_dblwr_init_or_load_pages</a> (<a class="el" href="os0file_8h.html#a63fac270d46d4a195e833a6672729041">os_file_t</a> <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a>, char *path, bool load_corrupt_pages)</td></tr>
<tr class="separator:ad26efaa199ea803573631d5e3ffb7ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accb6ac4e14e5a19c71d33d296f38dabd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#accb6ac4e14e5a19c71d33d296f38dabd">buf_dblwr_process</a> ()</td></tr>
<tr class="separator:accb6ac4e14e5a19c71d33d296f38dabd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab38a1ad857f80aedfedb20060def6560"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#ab38a1ad857f80aedfedb20060def6560">buf_dblwr_free</a> (void)</td></tr>
<tr class="separator:ab38a1ad857f80aedfedb20060def6560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebaae47cdb7bef8e22f3e114f852890c"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#aebaae47cdb7bef8e22f3e114f852890c">buf_dblwr_update</a> (const <a class="el" href="structbuf__page__t.html">buf_page_t</a> *<a class="el" href="buf0lru_8cc.html#a9ffdaebdcefba1fd5f70092d43ca5d98">bpage</a>, <a class="el" href="buf0types_8h.html#a7b34944f1921a4bf7c1a28abfb86d73c">buf_flush_t</a> flush_type)</td></tr>
<tr class="separator:aebaae47cdb7bef8e22f3e114f852890c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f38ca92ffa0f0638ab95074364648c3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#a2f38ca92ffa0f0638ab95074364648c3">buf_dblwr_check_page_lsn</a> (const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="el" href="fsp0fsp_8cc.html#a69e3109c6b8c8d21dfc851e276de8389">page</a>)</td></tr>
<tr class="separator:a2f38ca92ffa0f0638ab95074364648c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83aa40606923238a95d7f66936c36c15"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#a83aa40606923238a95d7f66936c36c15">buf_dblwr_assert_on_corrupt_block</a> (const <a class="el" href="structbuf__block__t.html">buf_block_t</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>)</td></tr>
<tr class="separator:a83aa40606923238a95d7f66936c36c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a585866654c90ded5dbe0ad036f10ee76"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#a585866654c90ded5dbe0ad036f10ee76">buf_dblwr_check_block</a> (const <a class="el" href="structbuf__block__t.html">buf_block_t</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>)</td></tr>
<tr class="separator:a585866654c90ded5dbe0ad036f10ee76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca5b372742e71965a6b81639801a7602"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#aca5b372742e71965a6b81639801a7602">buf_dblwr_write_block_to_datafile</a> (const <a class="el" href="structbuf__page__t.html">buf_page_t</a> *<a class="el" href="buf0lru_8cc.html#a9ffdaebdcefba1fd5f70092d43ca5d98">bpage</a>, bool <a class="el" href="ibuf0ibuf_8cc.html#a6265893dd43b2df4e241408f9e736f2e">sync</a>)</td></tr>
<tr class="separator:aca5b372742e71965a6b81639801a7602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad42546734bec0119ef4bd40b93bf666"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#aad42546734bec0119ef4bd40b93bf666">buf_dblwr_flush_buffered_writes</a> (void)</td></tr>
<tr class="separator:aad42546734bec0119ef4bd40b93bf666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd7745e181e732943f2149caad02e720"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#abd7745e181e732943f2149caad02e720">buf_dblwr_add_to_batch</a> (<a class="el" href="structbuf__page__t.html">buf_page_t</a> *<a class="el" href="buf0lru_8cc.html#a9ffdaebdcefba1fd5f70092d43ca5d98">bpage</a>)</td></tr>
<tr class="separator:abd7745e181e732943f2149caad02e720"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73cf2f53e3e0581d5a538cbd492e27cf"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#a73cf2f53e3e0581d5a538cbd492e27cf">buf_dblwr_write_single_page</a> (<a class="el" href="structbuf__page__t.html">buf_page_t</a> *<a class="el" href="buf0lru_8cc.html#a9ffdaebdcefba1fd5f70092d43ca5d98">bpage</a>, bool <a class="el" href="ibuf0ibuf_8cc.html#a6265893dd43b2df4e241408f9e736f2e">sync</a>)</td></tr>
<tr class="separator:a73cf2f53e3e0581d5a538cbd492e27cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa366c32cffe88d5b7c1b656b5ddc73d1"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="structbuf__dblwr__t.html">buf_dblwr_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#aa366c32cffe88d5b7c1b656b5ddc73d1">buf_dblwr</a> = NULL</td></tr>
<tr class="separator:aa366c32cffe88d5b7c1b656b5ddc73d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15c06ab65b7033fd1bb9c87374e3e08e"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buf0dblwr_8cc.html#a15c06ab65b7033fd1bb9c87374e3e08e">buf_dblwr_being_created</a> = FALSE</td></tr>
<tr class="separator:a15c06ab65b7033fd1bb9c87374e3e08e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Doublwrite buffer module</p>
<p>Created 2011/12/19 </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="abd7745e181e732943f2149caad02e720"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd7745e181e732943f2149caad02e720">&#9670;&nbsp;</a></span>buf_dblwr_add_to_batch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void buf_dblwr_add_to_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__page__t.html">buf_page_t</a> *&#160;</td>
          <td class="paramname"><em>bpage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Posts a buffer page for writing. If the doublewrite memory buffer is full, calls buf_dblwr_flush_buffered_writes and waits for for free space to appear. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bpage</td><td>in: buffer block to write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a83aa40606923238a95d7f66936c36c15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83aa40606923238a95d7f66936c36c15">&#9670;&nbsp;</a></span>buf_dblwr_assert_on_corrupt_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void buf_dblwr_assert_on_corrupt_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Asserts when a corrupt block is find during writing out data to the disk. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>in: block to check </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a585866654c90ded5dbe0ad036f10ee76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a585866654c90ded5dbe0ad036f10ee76">&#9670;&nbsp;</a></span>buf_dblwr_check_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void buf_dblwr_check_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="struct_check.html">Check</a> the LSN values on the page with which this block is associated. Also validate the page if the option is set. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>in: block to check </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2f38ca92ffa0f0638ab95074364648c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f38ca92ffa0f0638ab95074364648c3">&#9670;&nbsp;</a></span>buf_dblwr_check_page_lsn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void buf_dblwr_check_page_lsn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="struct_check.html">Check</a> the LSN values on the page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>in: page to check </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae04da9c9db457c394e73e851b4c6e9b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae04da9c9db457c394e73e851b4c6e9b9">&#9670;&nbsp;</a></span>buf_dblwr_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void buf_dblwr_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates the doublewrite buffer to a new InnoDB installation. The header of the doublewrite buffer is placed on the trx system header page. </p>

</div>
</div>
<a id="aad42546734bec0119ef4bd40b93bf666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad42546734bec0119ef4bd40b93bf666">&#9670;&nbsp;</a></span>buf_dblwr_flush_buffered_writes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void buf_dblwr_flush_buffered_writes </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flushes possible buffered writes from the doublewrite memory buffer to disk, and also wakes up the aio thread if simulated aio is used. It is very important to call this function after a batch of writes has been posted, and also when we may have to wait for a page latch! Otherwise a deadlock of threads can occur. </p>

</div>
</div>
<a id="ab38a1ad857f80aedfedb20060def6560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab38a1ad857f80aedfedb20060def6560">&#9670;&nbsp;</a></span>buf_dblwr_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void buf_dblwr_free </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees doublewrite buffer. </p>

</div>
</div>
<a id="aac223789c27e1724667506e6696fa4b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac223789c27e1724667506e6696fa4b3">&#9670;&nbsp;</a></span>buf_dblwr_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE byte* buf_dblwr_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calls <a class="el" href="buf0buf_8h.html#af42256ee94cebb3086096244fcbb872d">buf_page_get()</a> on the TRX_SYS_PAGE and returns a pointer to the doublewrite buffer within it. </p><dl class="section return"><dt>Returns</dt><dd>pointer to the doublewrite buffer within the filespace header page. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mtr</td><td>in/out: MTR to hold the page latch </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af15e906fc603ed387abb74b575a63cbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af15e906fc603ed387abb74b575a63cbc">&#9670;&nbsp;</a></span>buf_dblwr_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void buf_dblwr_init </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>doublewrite</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates or initialializes the doublewrite buffer at a database start. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doublewrite</td><td>in: pointer to the doublewrite buf header on trx sys page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad26efaa199ea803573631d5e3ffb7ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad26efaa199ea803573631d5e3ffb7ad7">&#9670;&nbsp;</a></span>buf_dblwr_init_or_load_pages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buf_dblwr_init_or_load_pages </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os0file_8h.html#a63fac270d46d4a195e833a6672729041">os_file_t</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>load_corrupt_pages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>At a database startup initializes the doublewrite buffer memory structure if we already have a doublewrite buffer created in the data files. If we are upgrading to an InnoDB version which supports multiple tablespaces, then this function performs the necessary update operations. If we are in a crash recovery, this function loads the pages from double write buffer into memory. </p>

</div>
</div>
<a id="a58dec8fb6e33784d5b37f37a1d46fe47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58dec8fb6e33784d5b37f37a1d46fe47">&#9670;&nbsp;</a></span>buf_dblwr_page_inside()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ibool buf_dblwr_page_inside </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determines if a page number is located inside the doublewrite buffer. </p><dl class="section return"><dt>Returns</dt><dd>TRUE if the location is inside the two blocks of the doublewrite buffer </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page_no</td><td>in: page number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="accb6ac4e14e5a19c71d33d296f38dabd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accb6ac4e14e5a19c71d33d296f38dabd">&#9670;&nbsp;</a></span>buf_dblwr_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buf_dblwr_process </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process the double write buffer pages. </p>

</div>
</div>
<a id="acb16d37d97343dccaa3eddb72bcfe63c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb16d37d97343dccaa3eddb72bcfe63c">&#9670;&nbsp;</a></span>buf_dblwr_sync_datafiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void buf_dblwr_sync_datafiles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flush a batch of writes to the datafiles that have already been written to the dblwr buffer on disk. </p>

</div>
</div>
<a id="aebaae47cdb7bef8e22f3e114f852890c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebaae47cdb7bef8e22f3e114f852890c">&#9670;&nbsp;</a></span>buf_dblwr_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void buf_dblwr_update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbuf__page__t.html">buf_page_t</a> *&#160;</td>
          <td class="paramname"><em>bpage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="buf0types_8h.html#a7b34944f1921a4bf7c1a28abfb86d73c">buf_flush_t</a>&#160;</td>
          <td class="paramname"><em>flush_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the doublewrite buffer when an IO request is completed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bpage</td><td>in: buffer block descriptor </td></tr>
    <tr><td class="paramname">flush_type</td><td>in: flush type </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aca5b372742e71965a6b81639801a7602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca5b372742e71965a6b81639801a7602">&#9670;&nbsp;</a></span>buf_dblwr_write_block_to_datafile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void buf_dblwr_write_block_to_datafile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbuf__page__t.html">buf_page_t</a> *&#160;</td>
          <td class="paramname"><em>bpage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>sync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Writes a page that has already been written to the doublewrite buffer to the datafile. It is the job of the caller to sync the datafile. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bpage</td><td>in: page to write </td></tr>
    <tr><td class="paramname">sync</td><td>in: true if sync IO is requested </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a73cf2f53e3e0581d5a538cbd492e27cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73cf2f53e3e0581d5a538cbd492e27cf">&#9670;&nbsp;</a></span>buf_dblwr_write_single_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void buf_dblwr_write_single_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__page__t.html">buf_page_t</a> *&#160;</td>
          <td class="paramname"><em>bpage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>sync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes a page to the doublewrite buffer on disk, sync it, then write the page to the datafile and sync the datafile. This function is used for single page flushes. If all the buffers allocated for single page flushes in the doublewrite buffer are in use we wait here for one to become free. We are guaranteed that a slot will become free because any thread that is using a slot must also release the slot before leaving this function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bpage</td><td>in: buffer block to write </td></tr>
    <tr><td class="paramname">sync</td><td>in: true if sync IO requested </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa366c32cffe88d5b7c1b656b5ddc73d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa366c32cffe88d5b7c1b656b5ddc73d1">&#9670;&nbsp;</a></span>buf_dblwr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="structbuf__dblwr__t.html">buf_dblwr_t</a>* buf_dblwr = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The doublewrite buffer </p>

</div>
</div>
<a id="a15c06ab65b7033fd1bb9c87374e3e08e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15c06ab65b7033fd1bb9c87374e3e08e">&#9670;&nbsp;</a></span>buf_dblwr_being_created</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ibool buf_dblwr_being_created = FALSE</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set to TRUE when the doublewrite buffer is being created </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
