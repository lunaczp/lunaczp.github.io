<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: libevent/evrpc.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e0cb8418b6001d8d6e6585f045be2b6d.html">libevent</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">evrpc.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="evrpc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevrpc.html">evrpc</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevrpc__req__generic.html">evrpc_req_generic</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevrpc__status.html">evrpc_status</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevrpc__request__wrapper.html">evrpc_request_wrapper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae9eff66229e154543551a936c59dd8fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#ae9eff66229e154543551a936c59dd8fa">EVRPC_STRUCT</a>(rpcname)&#160;&#160;&#160;struct evrpc_req__##rpcname</td></tr>
<tr class="separator:ae9eff66229e154543551a936c59dd8fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa526799df545537b2dc67358b0dfaa15"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#aa526799df545537b2dc67358b0dfaa15">EVRPC_HEADER</a>(rpcname,  reqstruct,  rplystruct)</td></tr>
<tr class="separator:aa526799df545537b2dc67358b0dfaa15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7abcafae087e3c4dce6a4cd85346114"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#af7abcafae087e3c4dce6a4cd85346114">EVRPC_GENERATE</a>(rpcname,  reqstruct,  rplystruct)</td></tr>
<tr class="separator:af7abcafae087e3c4dce6a4cd85346114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af78e1869994ee9597a9a0785d25fbf0b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#af78e1869994ee9597a9a0785d25fbf0b">EVRPC_REQUEST_HTTP</a>(rpc_req)&#160;&#160;&#160;(rpc_req)-&gt;http_req</td></tr>
<tr class="separator:af78e1869994ee9597a9a0785d25fbf0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36d6ba276baf3c95df69db35a2ef1527"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#a36d6ba276baf3c95df69db35a2ef1527">EVRPC_REQUEST_DONE</a>(rpc_req)</td></tr>
<tr class="separator:a36d6ba276baf3c95df69db35a2ef1527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e854a2f6f4769bdc2bdff1ac1013b30"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>EVRPC_REGISTER_OBJECT</b>(rpc,  <a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>,  <a class="el" href="structrequest.html">request</a>,  <a class="el" href="structreply.html">reply</a>)</td></tr>
<tr class="separator:a1e854a2f6f4769bdc2bdff1ac1013b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb204281e2555a1e91ff3885747d0533"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#abb204281e2555a1e91ff3885747d0533">EVRPC_REGISTER</a>(base,  <a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>,  <a class="el" href="structrequest.html">request</a>,  <a class="el" href="structreply.html">reply</a>,  callback,  cbarg)</td></tr>
<tr class="separator:abb204281e2555a1e91ff3885747d0533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab646cdf50e026accddcd9fe23b35837b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#ab646cdf50e026accddcd9fe23b35837b">EVRPC_UNREGISTER</a>(base,  <a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>)&#160;&#160;&#160;evrpc_unregister_rpc(base, #<a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>)</td></tr>
<tr class="separator:ab646cdf50e026accddcd9fe23b35837b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf6d2f686d073aba2347ab6ff554dd74"><td class="memItemLeft" align="right" valign="top"><a id="acf6d2f686d073aba2347ab6ff554dd74"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EVRPC_STATUS_ERR_NONE</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:acf6d2f686d073aba2347ab6ff554dd74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acacba766a443828607d212a51088356e"><td class="memItemLeft" align="right" valign="top"><a id="acacba766a443828607d212a51088356e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EVRPC_STATUS_ERR_TIMEOUT</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:acacba766a443828607d212a51088356e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62f6c06dc0d45364fc818d526c1e0b8f"><td class="memItemLeft" align="right" valign="top"><a id="a62f6c06dc0d45364fc818d526c1e0b8f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EVRPC_STATUS_ERR_BADPAYLOAD</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a62f6c06dc0d45364fc818d526c1e0b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52d298b64c4ff681b6100f830d1564c7"><td class="memItemLeft" align="right" valign="top"><a id="a52d298b64c4ff681b6100f830d1564c7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EVRPC_STATUS_ERR_UNSTARTED</b>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a52d298b64c4ff681b6100f830d1564c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89c82fa02639d7693d4f6648b2bb2cde"><td class="memItemLeft" align="right" valign="top"><a id="a89c82fa02639d7693d4f6648b2bb2cde"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EVRPC_STATUS_ERR_HOOKABORTED</b>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a89c82fa02639d7693d4f6648b2bb2cde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff0efcd7cb8b966256b5127960bd2c81"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#aff0efcd7cb8b966256b5127960bd2c81">EVRPC_MAKE_REQUEST</a>(<a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>,  pool,  <a class="el" href="structrequest.html">request</a>,  <a class="el" href="structreply.html">reply</a>,  cb,  cbarg)&#160;&#160;&#160;evrpc_send_request_##<a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>(pool, <a class="el" href="structrequest.html">request</a>, <a class="el" href="structreply.html">reply</a>, cb, cbarg)</td></tr>
<tr class="separator:aff0efcd7cb8b966256b5127960bd2c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bb283bd7893b9855e2f23013891fc82"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#a1bb283bd7893b9855e2f23013891fc82">INPUT</a>&#160;&#160;&#160;<a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835ba2a62d2e1147edb5b460c1abb17be9734">EVRPC_INPUT</a></td></tr>
<tr class="separator:a1bb283bd7893b9855e2f23013891fc82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61a3c9a18380aafb6e430e79bf596557"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#a61a3c9a18380aafb6e430e79bf596557">OUTPUT</a>&#160;&#160;&#160;<a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835bad63587ff3a66808e422f1ca48c9db85e">EVRPC_OUTPUT</a></td></tr>
<tr class="separator:a61a3c9a18380aafb6e430e79bf596557"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a66eff7ea6bdd17e53fde6c4d9dc1835b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835b">EVRPC_HOOK_TYPE</a> { <a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835ba2a62d2e1147edb5b460c1abb17be9734">EVRPC_INPUT</a>, 
<a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835bad63587ff3a66808e422f1ca48c9db85e">EVRPC_OUTPUT</a>
 }</td></tr>
<tr class="separator:a66eff7ea6bdd17e53fde6c4d9dc1835b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aca904025a4a1cb8d22164da3afe32b5a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structevrpc__base.html">evrpc_base</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#aca904025a4a1cb8d22164da3afe32b5a">evrpc_init</a> (struct <a class="el" href="structevhttp.html">evhttp</a> *server)</td></tr>
<tr class="separator:aca904025a4a1cb8d22164da3afe32b5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64a8951f0d52f698a96808f276b32f39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#a64a8951f0d52f698a96808f276b32f39">evrpc_free</a> (struct <a class="el" href="structevrpc__base.html">evrpc_base</a> *base)</td></tr>
<tr class="separator:a64a8951f0d52f698a96808f276b32f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaa7d70da1d9fdcb767279b55944be65"><td class="memItemLeft" align="right" valign="top"><a id="abaa7d70da1d9fdcb767279b55944be65"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>evrpc_register_rpc</b> (struct <a class="el" href="structevrpc__base.html">evrpc_base</a> *, struct <a class="el" href="structevrpc.html">evrpc</a> *, void(*)(struct <a class="el" href="structevrpc__req__generic.html">evrpc_req_generic</a> *, void *), void *)</td></tr>
<tr class="separator:abaa7d70da1d9fdcb767279b55944be65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b44b5ae7bad525a830eddfed03f561e"><td class="memItemLeft" align="right" valign="top"><a id="a6b44b5ae7bad525a830eddfed03f561e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>evrpc_unregister_rpc</b> (struct <a class="el" href="structevrpc__base.html">evrpc_base</a> *base, const char *<a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>)</td></tr>
<tr class="separator:a6b44b5ae7bad525a830eddfed03f561e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae977dbd4fcc878ad934f2bfb964a49e"><td class="memItemLeft" align="right" valign="top"><a id="aae977dbd4fcc878ad934f2bfb964a49e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>evrpc_make_request</b> (struct <a class="el" href="structevrpc__request__wrapper.html">evrpc_request_wrapper</a> *)</td></tr>
<tr class="separator:aae977dbd4fcc878ad934f2bfb964a49e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e87434603994a71d26676ddfb1e2033"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structevrpc__pool.html">evrpc_pool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#a8e87434603994a71d26676ddfb1e2033">evrpc_pool_new</a> (struct <a class="el" href="structevent__base.html">event_base</a> *base)</td></tr>
<tr class="separator:a8e87434603994a71d26676ddfb1e2033"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d3e64475898ca58fd93b7f8919b3a01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#a8d3e64475898ca58fd93b7f8919b3a01">evrpc_pool_free</a> (struct <a class="el" href="structevrpc__pool.html">evrpc_pool</a> *pool)</td></tr>
<tr class="separator:a8d3e64475898ca58fd93b7f8919b3a01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99802aa537ff1a33356e932e18917326"><td class="memItemLeft" align="right" valign="top"><a id="a99802aa537ff1a33356e932e18917326"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>evrpc_pool_add_connection</b> (struct <a class="el" href="structevrpc__pool.html">evrpc_pool</a> *, struct <a class="el" href="structevhttp__connection.html">evhttp_connection</a> *)</td></tr>
<tr class="separator:a99802aa537ff1a33356e932e18917326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17dae9e4a25a500e521baf5a2c1c5c0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#a17dae9e4a25a500e521baf5a2c1c5c0a">evrpc_pool_set_timeout</a> (struct <a class="el" href="structevrpc__pool.html">evrpc_pool</a> *pool, int timeout_in_secs)</td></tr>
<tr class="separator:a17dae9e4a25a500e521baf5a2c1c5c0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b2f0465645a027b72edf03f9901798b"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#a1b2f0465645a027b72edf03f9901798b">evrpc_add_hook</a> (void *vbase, enum <a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835b">EVRPC_HOOK_TYPE</a> hook_type, int(*cb)(struct <a class="el" href="structevhttp__request.html">evhttp_request</a> *, struct <a class="el" href="structevbuffer.html">evbuffer</a> *, void *), void *cb_arg)</td></tr>
<tr class="separator:a1b2f0465645a027b72edf03f9901798b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3969ea92840d165cab55a3228efcdbc6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evrpc_8h.html#a3969ea92840d165cab55a3228efcdbc6">evrpc_remove_hook</a> (void *vbase, enum <a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835b">EVRPC_HOOK_TYPE</a> hook_type, void *handle)</td></tr>
<tr class="separator:a3969ea92840d165cab55a3228efcdbc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This header files provides basic support for an RPC server and client.</p>
<p>To support RPCs in a server, every supported RPC command needs to be defined and registered.</p>
<p><a class="el" href="evrpc_8h.html#aa526799df545537b2dc67358b0dfaa15">EVRPC_HEADER(SendCommand, Request, Reply)</a>;</p>
<p>SendCommand is the name of the RPC command. Request is the name of a structure generated by event_rpcgen.py. It contains all parameters relating to the SendCommand RPC. The server needs to fill in the Reply structure. Reply is the name of a structure generated by event_rpcgen.py. It contains the answer to the RPC.</p>
<p>To register an RPC with an HTTP server, you need to first create an RPC base with:</p>
<p>struct <a class="el" href="structevrpc__base.html">evrpc_base</a> *base = evrpc_init(http);</p>
<p>A specific RPC can then be registered with</p>
<p><a class="el" href="evrpc_8h.html#abb204281e2555a1e91ff3885747d0533">EVRPC_REGISTER(base, SendCommand, Request, Reply,  FunctionCB, arg)</a>;</p>
<p>when the server receives an appropriately formatted RPC, the user callback is invokved. The callback needs to fill in the reply structure.</p>
<p>void FunctionCB(EVRPC_STRUCT(SendCommand)* rpc, void *arg);</p>
<p>To send the reply, call <a class="el" href="evrpc_8h.html#a36d6ba276baf3c95df69db35a2ef1527">EVRPC_REQUEST_DONE(rpc)</a>;</p>
<p>See the regression test for an example. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af7abcafae087e3c4dce6a4cd85346114"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7abcafae087e3c4dce6a4cd85346114">&#9670;&nbsp;</a></span>EVRPC_GENERATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVRPC_GENERATE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">rpcname, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">reqstruct, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">rplystruct&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generates the code for receiving and sending an RPC message</p>
<p>EVRPC_GENERATE is used to create the code corresponding to sending and receiving a particular RPC message</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rpcname</td><td>the name of the RPC </td></tr>
    <tr><td class="paramname">reqstruct</td><td>the name of the RPC request structure </td></tr>
    <tr><td class="paramname">replystruct</td><td>the name of the RPC reply structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="evrpc_8h.html#aa526799df545537b2dc67358b0dfaa15">EVRPC_HEADER()</a> </dd></dl>

</div>
</div>
<a id="aa526799df545537b2dc67358b0dfaa15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa526799df545537b2dc67358b0dfaa15">&#9670;&nbsp;</a></span>EVRPC_HEADER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVRPC_HEADER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">rpcname, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">reqstruct, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">rplystruct&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="evrpc_8h.html#ae9eff66229e154543551a936c59dd8fa">EVRPC_STRUCT</a>(rpcname) { \</div><div class="line">        struct reqstruct* <a class="code" href="structrequest.html">request</a>; \</div><div class="line">        struct rplystruct* <a class="code" href="structreply.html">reply</a>; \</div><div class="line">        struct <a class="code" href="structevrpc.html">evrpc</a>* rpc; \</div><div class="line">        struct <a class="code" href="structevhttp__request.html">evhttp_request</a>* http_req; \</div><div class="line">        void (*done)(<span class="keyword">struct </span><a class="code" href="structevrpc__status.html">evrpc_status</a> *, \</div><div class="line">            struct <a class="code" href="structevrpc.html">evrpc</a>* rpc, <span class="keywordtype">void</span> *request, <span class="keywordtype">void</span> *reply);          \</div><div class="line">};                                                                   \</div><div class="line">int evrpc_send_request_##rpcname(<span class="keyword">struct</span> <a class="code" href="structevrpc__pool.html">evrpc_pool</a> *, \</div><div class="line">    <span class="keyword">struct</span> reqstruct *, <span class="keyword">struct</span> rplystruct *, \</div><div class="line">    <span class="keywordtype">void</span> (*)(<span class="keyword">struct</span> <a class="code" href="structevrpc__status.html">evrpc_status</a> *, \</div><div class="line">        <span class="keyword">struct</span> reqstruct *, <span class="keyword">struct</span> rplystruct *, <span class="keywordtype">void</span> *cbarg),  \</div><div class="line">    <span class="keywordtype">void</span> *);</div><div class="ttc" id="evrpc_8h_html_ae9eff66229e154543551a936c59dd8fa"><div class="ttname"><a href="evrpc_8h.html#ae9eff66229e154543551a936c59dd8fa">EVRPC_STRUCT</a></div><div class="ttdeci">#define EVRPC_STRUCT(rpcname)</div><div class="ttdef"><b>Definition:</b> evrpc.h:113</div></div>
<div class="ttc" id="structreply_html"><div class="ttname"><a href="structreply.html">reply</a></div><div class="ttdef"><b>Definition:</b> evdns.c:205</div></div>
<div class="ttc" id="structevrpc__status_html"><div class="ttname"><a href="structevrpc__status.html">evrpc_status</a></div><div class="ttdef"><b>Definition:</b> evrpc.h:328</div></div>
<div class="ttc" id="structrequest_html"><div class="ttname"><a href="structrequest.html">request</a></div><div class="ttdef"><b>Definition:</b> evdns.c:173</div></div>
<div class="ttc" id="structevrpc_html"><div class="ttname"><a href="structevrpc.html">evrpc</a></div><div class="ttdef"><b>Definition:</b> evrpc.h:74</div></div>
<div class="ttc" id="structevhttp__request_html"><div class="ttname"><a href="structevhttp__request.html">evhttp_request</a></div><div class="ttdef"><b>Definition:</b> evhttp.h:188</div></div>
<div class="ttc" id="structevrpc__pool_html"><div class="ttname"><a href="structevrpc__pool.html">evrpc_pool</a></div><div class="ttdef"><b>Definition:</b> evrpc-internal.h:74</div></div>
</div><!-- fragment --><p>Creates the definitions and prototypes for an RPC</p>
<p>You need to use EVRPC_HEADER to create structures and function prototypes needed by the server and client implementation. The structures have to be defined in an .rpc file and converted to source code via event_rpcgen.py</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rpcname</td><td>the name of the RPC </td></tr>
    <tr><td class="paramname">reqstruct</td><td>the name of the RPC request structure </td></tr>
    <tr><td class="paramname">replystruct</td><td>the name of the RPC reply structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="evrpc_8h.html#af7abcafae087e3c4dce6a4cd85346114">EVRPC_GENERATE()</a> </dd></dl>

</div>
</div>
<a id="aff0efcd7cb8b966256b5127960bd2c81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff0efcd7cb8b966256b5127960bd2c81">&#9670;&nbsp;</a></span>EVRPC_MAKE_REQUEST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVRPC_MAKE_REQUEST</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pool, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="structrequest.html">request</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="structreply.html">reply</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cbarg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;evrpc_send_request_##<a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>(pool, <a class="el" href="structrequest.html">request</a>, <a class="el" href="structreply.html">reply</a>, cb, cbarg)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>launches an RPC and sends it to the server</p>
<p><a class="el" href="evrpc_8h.html#aff0efcd7cb8b966256b5127960bd2c81">EVRPC_MAKE_REQUEST()</a> is used by the client to send an RPC to the server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the RPC </td></tr>
    <tr><td class="paramname">pool</td><td>the <a class="el" href="structevrpc__pool.html">evrpc_pool</a> that contains the connection objects over which the request should be sent. </td></tr>
    <tr><td class="paramname">request</td><td>a pointer to the RPC request structure - it contains the data to be sent to the server. </td></tr>
    <tr><td class="paramname">reply</td><td>a pointer to the RPC reply structure. It is going to be filled if the request was answered successfully </td></tr>
    <tr><td class="paramname">cb</td><td>the callback to invoke when the RPC request has been answered </td></tr>
    <tr><td class="paramname">cbarg</td><td>an additional argument to be passed to the client </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

</div>
</div>
<a id="abb204281e2555a1e91ff3885747d0533"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb204281e2555a1e91ff3885747d0533">&#9670;&nbsp;</a></span>EVRPC_REGISTER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVRPC_REGISTER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">base, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="structrequest.html">request</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="structreply.html">reply</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">callback, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cbarg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">    struct <a class="code" href="structevrpc.html">evrpc</a>* rpc = (<span class="keyword">struct </span><a class="code" href="structevrpc.html">evrpc</a> *)calloc(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structevrpc.html">evrpc</a>)); \</div><div class="line">    EVRPC_REGISTER_OBJECT(rpc, <a class="code" href="dict0crea_8cc.html#a818a1a2220ac8bb3b1077acfab8b9d77">name</a>, <a class="code" href="structrequest.html">request</a>, <a class="code" href="structreply.html">reply</a>); \</div><div class="line">    evrpc_register_rpc(base, rpc, \</div><div class="line">        (<span class="keywordtype">void</span> (*)(<span class="keyword">struct</span> <a class="code" href="structevrpc__req__generic.html">evrpc_req_generic</a>*, <span class="keywordtype">void</span> *))callback, cbarg);  \</div><div class="line">  } <span class="keywordflow">while</span> (0)</div><div class="ttc" id="dict0crea_8cc_html_a818a1a2220ac8bb3b1077acfab8b9d77"><div class="ttname"><a href="dict0crea_8cc.html#a818a1a2220ac8bb3b1077acfab8b9d77">name</a></div><div class="ttdeci">static const char const char * name</div><div class="ttdef"><b>Definition:</b> dict0crea.cc:1472</div></div>
<div class="ttc" id="structevrpc__req__generic_html"><div class="ttname"><a href="structevrpc__req__generic.html">evrpc_req_generic</a></div><div class="ttdef"><b>Definition:</b> evrpc.h:119</div></div>
<div class="ttc" id="structreply_html"><div class="ttname"><a href="structreply.html">reply</a></div><div class="ttdef"><b>Definition:</b> evdns.c:205</div></div>
<div class="ttc" id="structrequest_html"><div class="ttname"><a href="structrequest.html">request</a></div><div class="ttdef"><b>Definition:</b> evdns.c:173</div></div>
<div class="ttc" id="structevrpc_html"><div class="ttname"><a href="structevrpc.html">evrpc</a></div><div class="ttdef"><b>Definition:</b> evrpc.h:74</div></div>
</div><!-- fragment --><p>register RPCs with the HTTP Server</p>
<p>registers a new RPC with the HTTP server, each RPC needs to have a unique name under which it can be identified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">base</td><td>the <a class="el" href="structevrpc__base.html">evrpc_base</a> structure in which the RPC should be registered. </td></tr>
    <tr><td class="paramname">name</td><td>the name of the RPC </td></tr>
    <tr><td class="paramname">request</td><td>the name of the RPC request structure </td></tr>
    <tr><td class="paramname">reply</td><td>the name of the RPC reply structure </td></tr>
    <tr><td class="paramname">callback</td><td>the callback that should be invoked when the RPC is received. The callback has the following prototype void (<em>callback)(<a class="el" href="evrpc_8h.html#ae9eff66229e154543551a936c59dd8fa">EVRPC_STRUCT(Message)</a></em> rpc, void *arg) </td></tr>
    <tr><td class="paramname">cbarg</td><td>an additional parameter that can be passed to the callback. The parameter can be used to carry around state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1e854a2f6f4769bdc2bdff1ac1013b30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e854a2f6f4769bdc2bdff1ac1013b30">&#9670;&nbsp;</a></span>EVRPC_REGISTER_OBJECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVRPC_REGISTER_OBJECT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">rpc, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="structrequest.html">request</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="structreply.html">reply</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">    (rpc)-&gt;uri = strdup(#<a class="code" href="dict0crea_8cc.html#a818a1a2220ac8bb3b1077acfab8b9d77">name</a>); \</div><div class="line">    if ((rpc)-&gt;uri == NULL) {                    \</div><div class="line">      fprintf(stderr, <span class="stringliteral">&quot;failed to register object\n&quot;</span>);   \</div><div class="line">      exit(1);                                          \</div><div class="line">    } \</div><div class="line">    (rpc)-&gt;request_new = (<span class="keywordtype">void</span> *(*)(void))<a class="code" href="structrequest.html">request</a>##_new; \</div><div class="line">    (rpc)-&gt;request_free = (<span class="keywordtype">void</span> (*)(<span class="keywordtype">void</span> *))<a class="code" href="structrequest.html">request</a>##_free; \</div><div class="line">    (rpc)-&gt;request_unmarshal = (<span class="keywordtype">int</span> (*)(<span class="keywordtype">void</span> *, <span class="keyword">struct </span><a class="code" href="structevbuffer.html">evbuffer</a> *))<a class="code" href="structrequest.html">request</a>##_unmarshal; \</div><div class="line">    (rpc)-&gt;reply_new = (<span class="keywordtype">void</span> *(*)(void))<a class="code" href="structreply.html">reply</a>##_new; \</div><div class="line">    (rpc)-&gt;reply_free = (<span class="keywordtype">void</span> (*)(<span class="keywordtype">void</span> *))<a class="code" href="structreply.html">reply</a>##_free; \</div><div class="line">    (rpc)-&gt;reply_complete = (<span class="keywordtype">int</span> (*)(<span class="keywordtype">void</span> *))<a class="code" href="structreply.html">reply</a>##_complete; \</div><div class="line">    (rpc)-&gt;reply_marshal = (<span class="keywordtype">void</span> (*)(<span class="keyword">struct </span><a class="code" href="structevbuffer.html">evbuffer</a>*, <span class="keywordtype">void</span> *))<a class="code" href="structreply.html">reply</a>##_marshal; \</div><div class="line">  } <span class="keywordflow">while</span> (0)</div><div class="ttc" id="dict0crea_8cc_html_a818a1a2220ac8bb3b1077acfab8b9d77"><div class="ttname"><a href="dict0crea_8cc.html#a818a1a2220ac8bb3b1077acfab8b9d77">name</a></div><div class="ttdeci">static const char const char * name</div><div class="ttdef"><b>Definition:</b> dict0crea.cc:1472</div></div>
<div class="ttc" id="structevbuffer_html"><div class="ttname"><a href="structevbuffer.html">evbuffer</a></div><div class="ttdef"><b>Definition:</b> event.h:722</div></div>
<div class="ttc" id="structreply_html"><div class="ttname"><a href="structreply.html">reply</a></div><div class="ttdef"><b>Definition:</b> evdns.c:205</div></div>
<div class="ttc" id="structrequest_html"><div class="ttname"><a href="structrequest.html">request</a></div><div class="ttdef"><b>Definition:</b> evdns.c:173</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a36d6ba276baf3c95df69db35a2ef1527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36d6ba276baf3c95df69db35a2ef1527">&#9670;&nbsp;</a></span>EVRPC_REQUEST_DONE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVRPC_REQUEST_DONE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">rpc_req</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">  struct <a class="code" href="structevrpc__req__generic.html">evrpc_req_generic</a> *_req = (<span class="keyword">struct </span><a class="code" href="structevrpc__req__generic.html">evrpc_req_generic</a> *)(rpc_req); \</div><div class="line">  _req-&gt;done(_req); \</div><div class="line">} <span class="keywordflow">while</span> (0)</div><div class="ttc" id="structevrpc__req__generic_html"><div class="ttname"><a href="structevrpc__req__generic.html">evrpc_req_generic</a></div><div class="ttdef"><b>Definition:</b> evrpc.h:119</div></div>
</div><!-- fragment --><p>Creates the reply to an RPC request</p>
<p>EVRPC_REQUEST_DONE is used to answer a request; the reply is expected to have been filled in. The request and reply pointers become invalid after this call has finished.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rpc_req</td><td>the rpc request structure provided to the server callback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af78e1869994ee9597a9a0785d25fbf0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af78e1869994ee9597a9a0785d25fbf0b">&#9670;&nbsp;</a></span>EVRPC_REQUEST_HTTP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVRPC_REQUEST_HTTP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">rpc_req</td><td>)</td>
          <td>&#160;&#160;&#160;(rpc_req)-&gt;http_req</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provides access to the HTTP request object underlying an RPC</p>
<p>Access to the underlying http object; can be used to look at headers or for getting the remote ip address</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rpc_req</td><td>the rpc request structure provided to the server callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an struct <a class="el" href="structevhttp__request.html">evhttp_request</a> object that can be inspected for HTTP headers or sender information. </dd></dl>

</div>
</div>
<a id="ae9eff66229e154543551a936c59dd8fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9eff66229e154543551a936c59dd8fa">&#9670;&nbsp;</a></span>EVRPC_STRUCT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVRPC_STRUCT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">rpcname</td><td>)</td>
          <td>&#160;&#160;&#160;struct evrpc_req__##rpcname</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The type of a specific RPC Message</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rpcname</td><td>the name of the RPC message </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab646cdf50e026accddcd9fe23b35837b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab646cdf50e026accddcd9fe23b35837b">&#9670;&nbsp;</a></span>EVRPC_UNREGISTER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVRPC_UNREGISTER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">base, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;evrpc_unregister_rpc(base, #<a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unregisters an already registered RPC</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">base</td><td>the <a class="el" href="structevrpc__base.html">evrpc_base</a> object from which to unregister an RPC </td></tr>
    <tr><td class="paramname">name</td><td>the name of the rpc to unregister </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error or 0 when successful. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="evrpc_8h.html#abb204281e2555a1e91ff3885747d0533">EVRPC_REGISTER()</a> </dd></dl>

</div>
</div>
<a id="a1bb283bd7893b9855e2f23013891fc82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bb283bd7893b9855e2f23013891fc82">&#9670;&nbsp;</a></span>INPUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INPUT&#160;&#160;&#160;<a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835ba2a62d2e1147edb5b460c1abb17be9734">EVRPC_INPUT</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deprecated alias for EVRPC_INPUT. Not available on windows, where it conflicts with platform headers. </p>

</div>
</div>
<a id="a61a3c9a18380aafb6e430e79bf596557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61a3c9a18380aafb6e430e79bf596557">&#9670;&nbsp;</a></span>OUTPUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OUTPUT&#160;&#160;&#160;<a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835bad63587ff3a66808e422f1ca48c9db85e">EVRPC_OUTPUT</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deprecated alias for EVRPC_OUTPUT. Not available on windows, where it conflicts with platform headers. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a66eff7ea6bdd17e53fde6c4d9dc1835b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66eff7ea6bdd17e53fde6c4d9dc1835b">&#9670;&nbsp;</a></span>EVRPC_HOOK_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835b">EVRPC_HOOK_TYPE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hooks for changing the input and output of RPCs; this can be used to implement compression, authentication, encryption, ... </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a66eff7ea6bdd17e53fde6c4d9dc1835ba2a62d2e1147edb5b460c1abb17be9734"></a>EVRPC_INPUT&#160;</td><td class="fielddoc"><p>apply the function to an input hook </p>
</td></tr>
<tr><td class="fieldname"><a id="a66eff7ea6bdd17e53fde6c4d9dc1835bad63587ff3a66808e422f1ca48c9db85e"></a>EVRPC_OUTPUT&#160;</td><td class="fielddoc"><p>apply the function to an output hook </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1b2f0465645a027b72edf03f9901798b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b2f0465645a027b72edf03f9901798b">&#9670;&nbsp;</a></span>evrpc_add_hook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* evrpc_add_hook </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vbase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835b">EVRPC_HOOK_TYPE</a>&#160;</td>
          <td class="paramname"><em>hook_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(struct <a class="el" href="structevhttp__request.html">evhttp_request</a> *, struct <a class="el" href="structevbuffer.html">evbuffer</a> *, void *)&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cb_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>adds a processing hook to either an rpc base or rpc pool</p>
<p>If a hook returns -1, the processing is aborted.</p>
<p>The add functions return handles that can be used for removing hooks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vbase</td><td>a pointer to either struct <a class="el" href="structevrpc__base.html">evrpc_base</a> or struct <a class="el" href="structevrpc__pool.html">evrpc_pool</a> </td></tr>
    <tr><td class="paramname">hook_type</td><td>either INPUT or OUTPUT </td></tr>
    <tr><td class="paramname">cb</td><td>the callback to call when the hook is activated </td></tr>
    <tr><td class="paramname">cb_arg</td><td>an additional argument for the callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a handle to the hook so it can be removed later </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="evrpc_8h.html#a3969ea92840d165cab55a3228efcdbc6">evrpc_remove_hook()</a> </dd></dl>

</div>
</div>
<a id="a64a8951f0d52f698a96808f276b32f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64a8951f0d52f698a96808f276b32f39">&#9670;&nbsp;</a></span>evrpc_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evrpc_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevrpc__base.html">evrpc_base</a> *&#160;</td>
          <td class="paramname"><em>base</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees the evrpc base</p>
<p>For now, you are responsible for making sure that no rpcs are ongoing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">base</td><td>the <a class="el" href="structevrpc__base.html">evrpc_base</a> object to be freed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="evrpc_8h.html#aca904025a4a1cb8d22164da3afe32b5a">evrpc_init</a> </dd></dl>

</div>
</div>
<a id="aca904025a4a1cb8d22164da3afe32b5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca904025a4a1cb8d22164da3afe32b5a">&#9670;&nbsp;</a></span>evrpc_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structevrpc__base.html">evrpc_base</a>* evrpc_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevhttp.html">evhttp</a> *&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new rpc base from which RPC requests can be received</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>a pointer to an existing HTTP server </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a newly allocated <a class="el" href="structevrpc__base.html">evrpc_base</a> struct </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="evrpc_8h.html#a64a8951f0d52f698a96808f276b32f39">evrpc_free()</a> </dd></dl>

</div>
</div>
<a id="a8d3e64475898ca58fd93b7f8919b3a01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d3e64475898ca58fd93b7f8919b3a01">&#9670;&nbsp;</a></span>evrpc_pool_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evrpc_pool_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevrpc__pool.html">evrpc_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>frees an rpc connection pool</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>a pointer to an <a class="el" href="structevrpc__pool.html">evrpc_pool</a> allocated via <a class="el" href="evrpc_8h.html#a8e87434603994a71d26676ddfb1e2033">evrpc_pool_new()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="evrpc_8h.html#a8e87434603994a71d26676ddfb1e2033">evrpc_pool_new()</a> </dd></dl>

</div>
</div>
<a id="a8e87434603994a71d26676ddfb1e2033"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e87434603994a71d26676ddfb1e2033">&#9670;&nbsp;</a></span>evrpc_pool_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structevrpc__pool.html">evrpc_pool</a>* evrpc_pool_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevent__base.html">event_base</a> *&#160;</td>
          <td class="paramname"><em>base</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>creates an rpc connection pool</p>
<p>a pool has a number of connections associated with it. rpc requests are always made via a pool.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">base</td><td>a pointer to an struct event_based object; can be left NULL in singled-threaded applications </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a newly allocated struct <a class="el" href="structevrpc__pool.html">evrpc_pool</a> object </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="evrpc_8h.html#a8d3e64475898ca58fd93b7f8919b3a01">evrpc_pool_free()</a> </dd></dl>

</div>
</div>
<a id="a17dae9e4a25a500e521baf5a2c1c5c0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17dae9e4a25a500e521baf5a2c1c5c0a">&#9670;&nbsp;</a></span>evrpc_pool_set_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evrpc_pool_set_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevrpc__pool.html">evrpc_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout_in_secs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the timeout in secs after which a request has to complete. The RPC is completely aborted if it does not complete by then. Setting the timeout to 0 means that it never timeouts and can be used to implement callback type RPCs.</p>
<p>Any connection already in the pool will be updated with the new timeout. Connections added to the pool after set_timeout has be called receive the pool timeout only if no timeout has been set for the connection itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>a pointer to a struct <a class="el" href="structevrpc__pool.html">evrpc_pool</a> object </td></tr>
    <tr><td class="paramname">timeout_in_secs</td><td>the number of seconds after which a request should timeout and a failure be returned to the callback. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3969ea92840d165cab55a3228efcdbc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3969ea92840d165cab55a3228efcdbc6">&#9670;&nbsp;</a></span>evrpc_remove_hook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int evrpc_remove_hook </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vbase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="evrpc_8h.html#a66eff7ea6bdd17e53fde6c4d9dc1835b">EVRPC_HOOK_TYPE</a>&#160;</td>
          <td class="paramname"><em>hook_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>removes a previously added hook</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vbase</td><td>a pointer to either struct <a class="el" href="structevrpc__base.html">evrpc_base</a> or struct <a class="el" href="structevrpc__pool.html">evrpc_pool</a> </td></tr>
    <tr><td class="paramname">hook_type</td><td>either INPUT or OUTPUT </td></tr>
    <tr><td class="paramname">handle</td><td>a handle returned by <a class="el" href="evrpc_8h.html#a1b2f0465645a027b72edf03f9901798b">evrpc_add_hook()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success or 0 on failure </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="evrpc_8h.html#a1b2f0465645a027b72edf03f9901798b">evrpc_add_hook()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
