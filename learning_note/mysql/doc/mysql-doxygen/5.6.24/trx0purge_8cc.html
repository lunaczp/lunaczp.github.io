<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: storage/innobase/trx/trx0purge.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_7d6b8692e14baa729600e27a3e4f8b7c.html">trx</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">trx0purge.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="trx0purge_8h_source.html">trx0purge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fsp0fsp_8h_source.html">fsp0fsp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mach0data_8h_source.html">mach0data.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0rseg_8h_source.html">trx0rseg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0trx_8h_source.html">trx0trx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0roll_8h_source.html">trx0roll.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="read0read_8h_source.html">read0read.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fut0fut_8h_source.html">fut0fut.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="que0que_8h_source.html">que0que.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0purge_8h_source.html">row0purge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0upd_8h_source.html">row0upd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0rec_8h_source.html">trx0rec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0srv_8h_source.html">srv0srv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0start_8h_source.html">srv0start.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="os0thread_8h_source.html">os0thread.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0mon_8h_source.html">srv0mon.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mtr0log_8h_source.html">mtr0log.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9df4199555184ff95a6d389c00c67f0a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structque__fork__t.html">que_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a9df4199555184ff95a6d389c00c67f0a">trx_purge_graph_build</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, ulint n_purge_threads)</td></tr>
<tr class="separator:a9df4199555184ff95a6d389c00c67f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72bf05503e676fac41c1ba3a82649fd8"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a72bf05503e676fac41c1ba3a82649fd8">trx_purge_sys_create</a> (ulint n_purge_threads, <a class="el" href="structib__bh__t.html">ib_bh_t</a> *ib_bh)</td></tr>
<tr class="separator:a72bf05503e676fac41c1ba3a82649fd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad97767c84ac34dc281a2e3a849bbae83"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#ad97767c84ac34dc281a2e3a849bbae83">trx_purge_sys_close</a> (void)</td></tr>
<tr class="separator:ad97767c84ac34dc281a2e3a849bbae83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a599e4e3ff112e2c1829597ac1690697b"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a599e4e3ff112e2c1829597ac1690697b">trx_purge_add_update_undo_to_history</a> (<a class="el" href="structtrx__t.html">trx_t</a> *<a class="el" href="trx0trx_8cc.html#a33c6bd3ec7adfebaac8ed4906004b2ab">trx</a>, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="el" href="trx0undo_8cc.html#ab40556d40757c211cdec0f2f55e2d8f4">undo_page</a>, <a class="el" href="structmtr__t.html">mtr_t</a> *<a class="el" href="trx0undo_8cc.html#a9013d42949ecc21fdd8de523420df8ba">mtr</a>)</td></tr>
<tr class="separator:a599e4e3ff112e2c1829597ac1690697b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa58b98f66c59df2e94fafc6625c4d57f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#aa58b98f66c59df2e94fafc6625c4d57f">trx_purge_free_segment</a> (<a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *<a class="el" href="trx0undo_8cc.html#a408337eae997db8afa7e03c1bd6804c7">rseg</a>, <a class="el" href="structfil__addr__t.html">fil_addr_t</a> hdr_addr, ulint n_removed_logs)</td></tr>
<tr class="separator:aa58b98f66c59df2e94fafc6625c4d57f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a324e5af1f29e781d298a1f2638cf0d6d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a324e5af1f29e781d298a1f2638cf0d6d">trx_purge_truncate_rseg_history</a> (<a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *<a class="el" href="trx0undo_8cc.html#a408337eae997db8afa7e03c1bd6804c7">rseg</a>, const <a class="el" href="structpurge__iter__t.html">purge_iter_t</a> *<a class="el" href="ibuf0ibuf_8cc.html#a2dfd6b5310e6dd7028210bb6a8d13549">limit</a>)</td></tr>
<tr class="separator:a324e5af1f29e781d298a1f2638cf0d6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a838af36dd80b0450c07d63bb2344b961"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a838af36dd80b0450c07d63bb2344b961">trx_purge_truncate_history</a> (<a class="el" href="structpurge__iter__t.html">purge_iter_t</a> *<a class="el" href="ibuf0ibuf_8cc.html#a2dfd6b5310e6dd7028210bb6a8d13549">limit</a>, const <a class="el" href="structread__view__t.html">read_view_t</a> *view)</td></tr>
<tr class="separator:a838af36dd80b0450c07d63bb2344b961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1dcbb16d4f841ec7ab804f201ab4db"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#acc1dcbb16d4f841ec7ab804f201ab4db">trx_purge_rseg_get_next_history_log</a> (<a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *<a class="el" href="trx0undo_8cc.html#a408337eae997db8afa7e03c1bd6804c7">rseg</a>, ulint *<a class="el" href="trx0purge_8cc.html#af5055eb5023c8c89fff6fda119561ef6">n_pages_handled</a>)</td></tr>
<tr class="separator:acc1dcbb16d4f841ec7ab804f201ab4db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37d5538ff0eae0492723bf7ba80f1550"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a37d5538ff0eae0492723bf7ba80f1550">trx_purge_get_rseg_with_min_trx_id</a> (<a class="el" href="structtrx__purge__t.html">trx_purge_t</a> *<a class="el" href="trx0rec_8cc.html#ac116509c25dbed6bb658d3e852f55b3b">purge_sys</a>)</td></tr>
<tr class="separator:a37d5538ff0eae0492723bf7ba80f1550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0319e894386af190132b54d353576c9f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a0319e894386af190132b54d353576c9f">trx_purge_read_undo_rec</a> (<a class="el" href="structtrx__purge__t.html">trx_purge_t</a> *<a class="el" href="trx0rec_8cc.html#ac116509c25dbed6bb658d3e852f55b3b">purge_sys</a>, ulint <a class="el" href="row0merge_8cc.html#acbd6f0665ead771e112f93b23cf27faf">zip_size</a>)</td></tr>
<tr class="separator:a0319e894386af190132b54d353576c9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a628c446e5dbf3f78632e5011984628fe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a628c446e5dbf3f78632e5011984628fe">trx_purge_choose_next_log</a> (void)</td></tr>
<tr class="separator:a628c446e5dbf3f78632e5011984628fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab855f5c2456ffcd2d566212f9cabc565"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#ab855f5c2456ffcd2d566212f9cabc565">trx_purge_get_next_rec</a> (ulint *<a class="el" href="trx0purge_8cc.html#af5055eb5023c8c89fff6fda119561ef6">n_pages_handled</a>, <a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="el" href="trx0rec_8cc.html#a18459ed20cf7df7b5953ca0f9f3fea33">heap</a>)</td></tr>
<tr class="separator:ab855f5c2456ffcd2d566212f9cabc565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e6b0a7feb77fb96310bb79349b0d57f"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a1e6b0a7feb77fb96310bb79349b0d57f">__attribute__</a> ((warn_unused_result, nonnull)) <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *trx_purge_fetch_next_rec(<a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *<a class="el" href="btr0cur_8cc.html#ad1c4f16d584f1fabcea984746cf904a1">roll_ptr</a></td></tr>
<tr class="separator:a1e6b0a7feb77fb96310bb79349b0d57f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c23061ad814adbabffec89c883e0a97"><td class="memItemLeft" align="right" valign="top"><a id="a8c23061ad814adbabffec89c883e0a97"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>return</b> (<a class="el" href="trx0purge_8cc.html#ab855f5c2456ffcd2d566212f9cabc565">trx_purge_get_next_rec</a>(<a class="el" href="trx0purge_8cc.html#af5055eb5023c8c89fff6fda119561ef6">n_pages_handled</a>, <a class="el" href="trx0rec_8cc.html#a18459ed20cf7df7b5953ca0f9f3fea33">heap</a>))</td></tr>
<tr class="separator:a8c23061ad814adbabffec89c883e0a97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48729e3fffbd1b027ee98a7ac5b9a7c8"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a48729e3fffbd1b027ee98a7ac5b9a7c8">trx_purge_attach_undo_recs</a> (ulint n_purge_threads, <a class="el" href="structtrx__purge__t.html">trx_purge_t</a> *<a class="el" href="trx0rec_8cc.html#ac116509c25dbed6bb658d3e852f55b3b">purge_sys</a>, <a class="el" href="structpurge__iter__t.html">purge_iter_t</a> *<a class="el" href="ibuf0ibuf_8cc.html#a2dfd6b5310e6dd7028210bb6a8d13549">limit</a>, ulint batch_size)</td></tr>
<tr class="separator:a48729e3fffbd1b027ee98a7ac5b9a7c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a094928abbc72d1b03f7ffd3de52cf6"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a8a094928abbc72d1b03f7ffd3de52cf6">trx_purge_dml_delay</a> (void)</td></tr>
<tr class="separator:a8a094928abbc72d1b03f7ffd3de52cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae162a1e64538f847a1be4a9d09867e41"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#ae162a1e64538f847a1be4a9d09867e41">trx_purge_wait_for_workers_to_complete</a> (<a class="el" href="structtrx__purge__t.html">trx_purge_t</a> *<a class="el" href="trx0rec_8cc.html#ac116509c25dbed6bb658d3e852f55b3b">purge_sys</a>)</td></tr>
<tr class="separator:ae162a1e64538f847a1be4a9d09867e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e61aaed5696e77f011dbb0202cda124"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a6e61aaed5696e77f011dbb0202cda124">trx_purge_truncate</a> (void)</td></tr>
<tr class="separator:a6e61aaed5696e77f011dbb0202cda124"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a539826a2d1a4c604b42b8fb0963fece2"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a539826a2d1a4c604b42b8fb0963fece2">trx_purge</a> (ulint n_purge_threads, ulint batch_size, bool truncate)</td></tr>
<tr class="separator:a539826a2d1a4c604b42b8fb0963fece2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6d5bf264859601dadb8cc15eccf59de"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="trx0purge_8h.html#a24f2aad063c0ba63115ceda360bc552c">purge_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#ae6d5bf264859601dadb8cc15eccf59de">trx_purge_state</a> (void)</td></tr>
<tr class="separator:ae6d5bf264859601dadb8cc15eccf59de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9273029566e7c0a8e5baa28dc8c2cfc"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#ae9273029566e7c0a8e5baa28dc8c2cfc">trx_purge_stop</a> (void)</td></tr>
<tr class="separator:ae9273029566e7c0a8e5baa28dc8c2cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4054bf057626352d0a8efbbbde02c2be"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a4054bf057626352d0a8efbbbde02c2be">trx_purge_run</a> (void)</td></tr>
<tr class="separator:a4054bf057626352d0a8efbbbde02c2be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab6b974e779b2c5c91475671a0b0faf9e"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ulong&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#ab6b974e779b2c5c91475671a0b0faf9e">srv_max_purge_lag</a> = 0</td></tr>
<tr class="separator:ab6b974e779b2c5c91475671a0b0faf9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf31e3770f8a6660fa1f12be23d21948"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ulong&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#acf31e3770f8a6660fa1f12be23d21948">srv_max_purge_lag_delay</a> = 0</td></tr>
<tr class="separator:acf31e3770f8a6660fa1f12be23d21948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ef2bbe4198535ecaee72672ad5ea952"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="structtrx__purge__t.html">trx_purge_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#a6ef2bbe4198535ecaee72672ad5ea952">purge_sys</a> = NULL</td></tr>
<tr class="separator:a6ef2bbe4198535ecaee72672ad5ea952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3e66ed45848b79a16681788315785d6"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#aa3e66ed45848b79a16681788315785d6">trx_purge_dummy_rec</a></td></tr>
<tr class="separator:aa3e66ed45848b79a16681788315785d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5055eb5023c8c89fff6fda119561ef6"><td class="memItemLeft" align="right" valign="top">static ulint *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#af5055eb5023c8c89fff6fda119561ef6">n_pages_handled</a></td></tr>
<tr class="separator:af5055eb5023c8c89fff6fda119561ef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8a768835e021f3f2cd248e283eaedfe"><td class="memItemLeft" align="right" valign="top">static ulint <a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0purge_8cc.html#ad8a768835e021f3f2cd248e283eaedfe">heap</a></td></tr>
<tr class="separator:ad8a768835e021f3f2cd248e283eaedfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Purge old versions</p>
<p>Created 3/26/1996 Heikki Tuuri </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1e6b0a7feb77fb96310bb79349b0d57f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e6b0a7feb77fb96310bb79349b0d57f">&#9670;&nbsp;</a></span>__attribute__()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(warn_unused_result, nonnull)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Fetches the next undo log record from the history list to purge. It must be released with the corresponding release function. </p><dl class="section return"><dt>Returns</dt><dd>copy of an undo log record or pointer to trx_purge_dummy_rec, if the whole undo log can skipped in purge; NULL if none left </dd></dl>

</div>
</div>
<a id="a539826a2d1a4c604b42b8fb0963fece2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a539826a2d1a4c604b42b8fb0963fece2">&#9670;&nbsp;</a></span>trx_purge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ulint trx_purge </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_purge_threads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>truncate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function runs a purge batch. </p><dl class="section return"><dt>Returns</dt><dd>number of undo log pages handled in the batch </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n_purge_threads</td><td>in: number of purge tasks to submit to the work queue </td></tr>
    <tr><td class="paramname">batch_size</td><td>in: the maximum number of records to purge in one batch </td></tr>
    <tr><td class="paramname">truncate</td><td>in: truncate history if true </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a599e4e3ff112e2c1829597ac1690697b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a599e4e3ff112e2c1829597ac1690697b">&#9670;&nbsp;</a></span>trx_purge_add_update_undo_to_history()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_purge_add_update_undo_to_history </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds the update undo log as the first log in the history list. Removes the update undo log segment from the rseg slot if it is too big for reuse. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">undo_page</td><td>in: update undo log header page, x-latched </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a48729e3fffbd1b027ee98a7ac5b9a7c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48729e3fffbd1b027ee98a7ac5b9a7c8">&#9670;&nbsp;</a></span>trx_purge_attach_undo_recs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint trx_purge_attach_undo_recs </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_purge_threads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__purge__t.html">trx_purge_t</a> *&#160;</td>
          <td class="paramname"><em>purge_sys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpurge__iter__t.html">purge_iter_t</a> *&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>batch_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function runs a purge batch. </p><dl class="section return"><dt>Returns</dt><dd>number of undo log pages handled in the batch </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n_purge_threads</td><td>in: number of purge threads </td></tr>
    <tr><td class="paramname">purge_sys</td><td>in/out: purge instance </td></tr>
    <tr><td class="paramname">limit</td><td>out: records read up to </td></tr>
    <tr><td class="paramname">batch_size</td><td>in: no. of pages to purge </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a628c446e5dbf3f78632e5011984628fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a628c446e5dbf3f78632e5011984628fe">&#9670;&nbsp;</a></span>trx_purge_choose_next_log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_purge_choose_next_log </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Chooses the next undo log to purge and updates the info in purge_sys. This function is used to initialize purge_sys when the next record to purge is not known, and also to update the purge system info on the next record when purge has handled the whole undo log for a transaction. </p>

</div>
</div>
<a id="a8a094928abbc72d1b03f7ffd3de52cf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a094928abbc72d1b03f7ffd3de52cf6">&#9670;&nbsp;</a></span>trx_purge_dml_delay()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint trx_purge_dml_delay </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calculate the DML delay required. </p><dl class="section return"><dt>Returns</dt><dd>delay in microseconds or ULINT_MAX </dd></dl>

</div>
</div>
<a id="aa58b98f66c59df2e94fafc6625c4d57f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa58b98f66c59df2e94fafc6625c4d57f">&#9670;&nbsp;</a></span>trx_purge_free_segment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_purge_free_segment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfil__addr__t.html">fil_addr_t</a>&#160;</td>
          <td class="paramname"><em>hdr_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_removed_logs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Frees an undo log segment which is in the history list. Cuts the end of the history list at the youngest undo log in this segment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rseg</td><td>in: rollback segment </td></tr>
    <tr><td class="paramname">hdr_addr</td><td>in: the file address of log_hdr </td></tr>
    <tr><td class="paramname">n_removed_logs</td><td>in: count of how many undo logs we will cut off from the end of the history list </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab855f5c2456ffcd2d566212f9cabc565"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab855f5c2456ffcd2d566212f9cabc565">&#9670;&nbsp;</a></span>trx_purge_get_next_rec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_purge_get_next_rec </td>
          <td>(</td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>n_pages_handled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the next record to purge and updates the info in the purge system. </p><dl class="section return"><dt>Returns</dt><dd>copy of an undo log record or pointer to the dummy undo log record </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n_pages_handled</td><td>in/out: number of UNDO pages handled </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap where copied </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a37d5538ff0eae0492723bf7ba80f1550"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37d5538ff0eae0492723bf7ba80f1550">&#9670;&nbsp;</a></span>trx_purge_get_rseg_with_min_trx_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint trx_purge_get_rseg_with_min_trx_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__purge__t.html">trx_purge_t</a> *&#160;</td>
          <td class="paramname"><em>purge_sys</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Chooses the rollback segment with the smallest trx_id. </p><dl class="section return"><dt>Returns</dt><dd>zip_size if log is for a compressed table, ULINT_UNDEFINED if no rollback segments to purge, 0 for non compressed tables. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">purge_sys</td><td>in/out: purge instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9df4199555184ff95a6d389c00c67f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9df4199555184ff95a6d389c00c67f0a">&#9670;&nbsp;</a></span>trx_purge_graph_build()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structque__fork__t.html">que_t</a>* trx_purge_graph_build </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_purge_threads</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Builds a purge 'query' graph. The actual purge is performed by executing this query graph. </p><dl class="section return"><dt>Returns</dt><dd>own: the query graph </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">n_purge_threads</td><td>in: number of purge threads </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0319e894386af190132b54d353576c9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0319e894386af190132b54d353576c9f">&#9670;&nbsp;</a></span>trx_purge_read_undo_rec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_purge_read_undo_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__purge__t.html">trx_purge_t</a> *&#160;</td>
          <td class="paramname"><em>purge_sys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>zip_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Position the purge sys "iterator" on the undo record to use for purging. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">purge_sys</td><td>in/out: purge instance </td></tr>
    <tr><td class="paramname">zip_size</td><td>in: block size or 0 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acc1dcbb16d4f841ec7ab804f201ab4db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc1dcbb16d4f841ec7ab804f201ab4db">&#9670;&nbsp;</a></span>trx_purge_rseg_get_next_history_log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_purge_rseg_get_next_history_log </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>n_pages_handled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Updates the last not yet purged history log info in rseg when we have purged a whole undo log. Advances also purge_sys-&gt;purge_trx_no past the purged log. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rseg</td><td>in: rollback segment </td></tr>
    <tr><td class="paramname">n_pages_handled</td><td>in/out: number of UNDO pages handled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4054bf057626352d0a8efbbbde02c2be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4054bf057626352d0a8efbbbde02c2be">&#9670;&nbsp;</a></span>trx_purge_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_purge_run </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resume purge, move to PURGE_STATE_RUN. </p>

</div>
</div>
<a id="ae6d5bf264859601dadb8cc15eccf59de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6d5bf264859601dadb8cc15eccf59de">&#9670;&nbsp;</a></span>trx_purge_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="trx0purge_8h.html#a24f2aad063c0ba63115ceda360bc552c">purge_state_t</a> trx_purge_state </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the purge state. </p><dl class="section return"><dt>Returns</dt><dd>purge state. </dd></dl>

</div>
</div>
<a id="ae9273029566e7c0a8e5baa28dc8c2cfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9273029566e7c0a8e5baa28dc8c2cfc">&#9670;&nbsp;</a></span>trx_purge_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_purge_stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop purge and wait for it to stop, move to PURGE_STATE_STOP. </p>

</div>
</div>
<a id="ad97767c84ac34dc281a2e3a849bbae83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad97767c84ac34dc281a2e3a849bbae83">&#9670;&nbsp;</a></span>trx_purge_sys_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_purge_sys_close </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees the global purge system control structure. </p>

</div>
</div>
<a id="a72bf05503e676fac41c1ba3a82649fd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72bf05503e676fac41c1ba3a82649fd8">&#9670;&nbsp;</a></span>trx_purge_sys_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void trx_purge_sys_create </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_purge_threads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structib__bh__t.html">ib_bh_t</a> *&#160;</td>
          <td class="paramname"><em>ib_bh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates the global purge system control structure and inits the history mutex. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n_purge_threads</td><td>in: number of purge threads </td></tr>
    <tr><td class="paramname">ib_bh</td><td>in, own: UNDO log min binary heap </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6e61aaed5696e77f011dbb0202cda124"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e61aaed5696e77f011dbb0202cda124">&#9670;&nbsp;</a></span>trx_purge_truncate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_purge_truncate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Remove old historical changes from the rollback segments. </p>

</div>
</div>
<a id="a838af36dd80b0450c07d63bb2344b961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a838af36dd80b0450c07d63bb2344b961">&#9670;&nbsp;</a></span>trx_purge_truncate_history()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_purge_truncate_history </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpurge__iter__t.html">purge_iter_t</a> *&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structread__view__t.html">read_view_t</a> *&#160;</td>
          <td class="paramname"><em>view</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Removes unnecessary history data from rollback segments. NOTE that when this function is called, the caller must not have any latches on undo log pages! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">limit</td><td>in: truncate limit </td></tr>
    <tr><td class="paramname">view</td><td>in: purge view </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a324e5af1f29e781d298a1f2638cf0d6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a324e5af1f29e781d298a1f2638cf0d6d">&#9670;&nbsp;</a></span>trx_purge_truncate_rseg_history()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_purge_truncate_rseg_history </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpurge__iter__t.html">purge_iter_t</a> *&#160;</td>
          <td class="paramname"><em>limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Removes unnecessary history data from a rollback segment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rseg</td><td>in: rollback segment </td></tr>
    <tr><td class="paramname">limit</td><td>in: truncate offset </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae162a1e64538f847a1be4a9d09867e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae162a1e64538f847a1be4a9d09867e41">&#9670;&nbsp;</a></span>trx_purge_wait_for_workers_to_complete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_purge_wait_for_workers_to_complete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__purge__t.html">trx_purge_t</a> *&#160;</td>
          <td class="paramname"><em>purge_sys</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Wait for pending purge jobs to complete. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">purge_sys</td><td>in: purge instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad8a768835e021f3f2cd248e283eaedfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8a768835e021f3f2cd248e283eaedfe">&#9670;&nbsp;</a></span>heap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint <a class="el" href="structmem__block__info__t.html">mem_heap_t</a>* heap</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div><div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="trx0purge_8cc.html#a6ef2bbe4198535ecaee72672ad5ea952">purge_sys</a>-&gt;<a class="code" href="structtrx__purge__t.html#a2b44af8dfd3013c02fafec9b4fdb2e74">next_stored</a>) {</div><div class="line">                <a class="code" href="trx0purge_8cc.html#a628c446e5dbf3f78632e5011984628fe">trx_purge_choose_next_log</a>();</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span> (!<a class="code" href="trx0purge_8cc.html#a6ef2bbe4198535ecaee72672ad5ea952">purge_sys</a>-&gt;<a class="code" href="structtrx__purge__t.html#a2b44af8dfd3013c02fafec9b4fdb2e74">next_stored</a>) {</div><div class="line"></div><div class="line">                        <span class="keywordflow">if</span> (srv_print_thread_releases) {</div><div class="line">                                fprintf(stderr,</div><div class="line">                                        <span class="stringliteral">&quot;Purge: No logs left in the&quot;</span></div><div class="line">                                        <span class="stringliteral">&quot; history list\n&quot;</span>);</div><div class="line">                        }</div><div class="line"></div><div class="line">                        <span class="keywordflow">return</span>(NULL);</div><div class="line">                }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="trx0purge_8cc.html#a6ef2bbe4198535ecaee72672ad5ea952">purge_sys</a>-&gt;iter.<a class="code" href="structpurge__iter__t.html#aed9f800e8e2e823fc0fc485861b25f32">trx_no</a> &gt;= <a class="code" href="trx0purge_8cc.html#a6ef2bbe4198535ecaee72672ad5ea952">purge_sys</a>-&gt;<a class="code" href="structtrx__purge__t.html#af7f587d69f18f517ae22f388dffadefa">view</a>-&gt;<a class="code" href="structread__view__t.html#a608fe5014bcf99b1c28ea8c3898cdd34">low_limit_no</a>) {</div><div class="line"></div><div class="line">                <span class="keywordflow">return</span>(NULL);</div><div class="line">        }</div><div class="line"></div><div class="line">        </div><div class="line"></div><div class="line">        *<a class="code" href="btr0cur_8cc.html#ad1c4f16d584f1fabcea984746cf904a1">roll_ptr</a> = <a class="code" href="trx0undo_8h.html#a75d19c81c579ac7bde1e4eb444467dc6">trx_undo_build_roll_ptr</a>(</div><div class="line">                FALSE, <a class="code" href="trx0purge_8cc.html#a6ef2bbe4198535ecaee72672ad5ea952">purge_sys</a>-&gt;<a class="code" href="structtrx__purge__t.html#ad3febac66818c96bb83e5efaa9a60dbe">rseg</a>-&gt;<a class="code" href="structtrx__rseg__t.html#adfdc9298a1585691d747fbd70c77d8b7">id</a>,</div><div class="line">                <a class="code" href="trx0purge_8cc.html#a6ef2bbe4198535ecaee72672ad5ea952">purge_sys</a>-&gt;<a class="code" href="structtrx__purge__t.html#a63ef2b29bbde62dbcefef3285f2b2324">page_no</a>, <a class="code" href="trx0purge_8cc.html#a6ef2bbe4198535ecaee72672ad5ea952">purge_sys</a>-&gt;<a class="code" href="structtrx__purge__t.html#a252a756e46e5afe6d04e3387ac1eb29c">offset</a>)</div><div class="ttc" id="trx0purge_8cc_html_a628c446e5dbf3f78632e5011984628fe"><div class="ttname"><a href="trx0purge_8cc.html#a628c446e5dbf3f78632e5011984628fe">trx_purge_choose_next_log</a></div><div class="ttdeci">static void trx_purge_choose_next_log(void)</div><div class="ttdef"><b>Definition:</b> trx0purge.cc:767</div></div>
<div class="ttc" id="trx0purge_8cc_html_a6ef2bbe4198535ecaee72672ad5ea952"><div class="ttname"><a href="trx0purge_8cc.html#a6ef2bbe4198535ecaee72672ad5ea952">purge_sys</a></div><div class="ttdeci">UNIV_INTERN trx_purge_t * purge_sys</div><div class="ttdef"><b>Definition:</b> trx0purge.cc:56</div></div>
<div class="ttc" id="structtrx__purge__t_html_a63ef2b29bbde62dbcefef3285f2b2324"><div class="ttname"><a href="structtrx__purge__t.html#a63ef2b29bbde62dbcefef3285f2b2324">trx_purge_t::page_no</a></div><div class="ttdeci">ulint page_no</div><div class="ttdef"><b>Definition:</b> trx0purge.h:188</div></div>
<div class="ttc" id="structtrx__purge__t_html_ad3febac66818c96bb83e5efaa9a60dbe"><div class="ttname"><a href="structtrx__purge__t.html#ad3febac66818c96bb83e5efaa9a60dbe">trx_purge_t::rseg</a></div><div class="ttdeci">trx_rseg_t * rseg</div><div class="ttdef"><b>Definition:</b> trx0purge.h:186</div></div>
<div class="ttc" id="structtrx__purge__t_html_a2b44af8dfd3013c02fafec9b4fdb2e74"><div class="ttname"><a href="structtrx__purge__t.html#a2b44af8dfd3013c02fafec9b4fdb2e74">trx_purge_t::next_stored</a></div><div class="ttdeci">ibool next_stored</div><div class="ttdef"><b>Definition:</b> trx0purge.h:181</div></div>
<div class="ttc" id="trx0undo_8h_html_a75d19c81c579ac7bde1e4eb444467dc6"><div class="ttname"><a href="trx0undo_8h.html#a75d19c81c579ac7bde1e4eb444467dc6">trx_undo_build_roll_ptr</a></div><div class="ttdeci">UNIV_INLINE roll_ptr_t trx_undo_build_roll_ptr(ibool is_insert, ulint rseg_id, ulint page_no, ulint offset)</div></div>
<div class="ttc" id="structread__view__t_html_a608fe5014bcf99b1c28ea8c3898cdd34"><div class="ttname"><a href="structread__view__t.html#a608fe5014bcf99b1c28ea8c3898cdd34">read_view_t::low_limit_no</a></div><div class="ttdeci">trx_id_t low_limit_no</div><div class="ttdef"><b>Definition:</b> read0read.h:131</div></div>
<div class="ttc" id="structpurge__iter__t_html_aed9f800e8e2e823fc0fc485861b25f32"><div class="ttname"><a href="structpurge__iter__t.html#aed9f800e8e2e823fc0fc485861b25f32">purge_iter_t::trx_no</a></div><div class="ttdeci">trx_id_t trx_no</div><div class="ttdef"><b>Definition:</b> trx0purge.h:126</div></div>
<div class="ttc" id="structtrx__purge__t_html_af7f587d69f18f517ae22f388dffadefa"><div class="ttname"><a href="structtrx__purge__t.html#af7f587d69f18f517ae22f388dffadefa">trx_purge_t::view</a></div><div class="ttdeci">read_view_t * view</div><div class="ttdef"><b>Definition:</b> trx0purge.h:157</div></div>
<div class="ttc" id="structtrx__rseg__t_html_adfdc9298a1585691d747fbd70c77d8b7"><div class="ttname"><a href="structtrx__rseg__t.html#adfdc9298a1585691d747fbd70c77d8b7">trx_rseg_t::id</a></div><div class="ttdeci">ulint id</div><div class="ttdef"><b>Definition:</b> trx0rseg.h:156</div></div>
<div class="ttc" id="btr0cur_8cc_html_ad1c4f16d584f1fabcea984746cf904a1"><div class="ttname"><a href="btr0cur_8cc.html#ad1c4f16d584f1fabcea984746cf904a1">roll_ptr</a></div><div class="ttdeci">roll_ptr_t roll_ptr</div><div class="ttdef"><b>Definition:</b> btr0cur.cc:1151</div></div>
<div class="ttc" id="structtrx__purge__t_html_a252a756e46e5afe6d04e3387ac1eb29c"><div class="ttname"><a href="structtrx__purge__t.html#a252a756e46e5afe6d04e3387ac1eb29c">trx_purge_t::offset</a></div><div class="ttdeci">ulint offset</div><div class="ttdef"><b>Definition:</b> trx0purge.h:191</div></div>
</div><!-- fragment --><p>&lt; in: memory heap where copied </p>

</div>
</div>
<a id="af5055eb5023c8c89fff6fda119561ef6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5055eb5023c8c89fff6fda119561ef6">&#9670;&nbsp;</a></span>n_pages_handled</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint* n_pages_handled</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&lt; out: roll pointer to undo record in/out: number of UNDO log pages handled </p>

</div>
</div>
<a id="a6ef2bbe4198535ecaee72672ad5ea952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ef2bbe4198535ecaee72672ad5ea952">&#9670;&nbsp;</a></span>purge_sys</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="structtrx__purge__t.html">trx_purge_t</a>* purge_sys = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The global data structure coordinating a purge </p>

</div>
</div>
<a id="ab6b974e779b2c5c91475671a0b0faf9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6b974e779b2c5c91475671a0b0faf9e">&#9670;&nbsp;</a></span>srv_max_purge_lag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ulong srv_max_purge_lag = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum allowable purge history length. &lt;=0 means 'infinite'. </p>

</div>
</div>
<a id="acf31e3770f8a6660fa1f12be23d21948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf31e3770f8a6660fa1f12be23d21948">&#9670;&nbsp;</a></span>srv_max_purge_lag_delay</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ulong srv_max_purge_lag_delay = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Max DML user threads delay in micro-seconds. </p>

</div>
</div>
<a id="aa3e66ed45848b79a16681788315785d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3e66ed45848b79a16681788315785d6">&#9670;&nbsp;</a></span>trx_purge_dummy_rec</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> trx_purge_dummy_rec</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A dummy undo record used as a return value when we have a whole undo log which needs no purge </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
