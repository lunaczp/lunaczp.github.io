<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: storage/innobase/include/btr0sea.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">btr0sea.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;univ.i&quot;</code><br />
<code>#include &quot;<a class="el" href="rem0rec_8h_source.html">rem0rec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0dict_8h_source.html">dict0dict.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="btr0types_8h_source.html">btr0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mtr0mtr_8h_source.html">mtr0mtr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ha0ha_8h_source.html">ha0ha.h</a>&quot;</code><br />
<code>#include &quot;btr0sea.ic&quot;</code><br />
</div>
<p><a href="btr0sea_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbtr__search__t.html">btr_search_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbtr__search__sys__t.html">btr_search_sys_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a431171bce1a77fe307d3235a816d483f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#a431171bce1a77fe307d3235a816d483f">BTR_SEARCH_HASH_ANALYSIS</a>&#160;&#160;&#160;17</td></tr>
<tr class="separator:a431171bce1a77fe307d3235a816d483f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa444f1d3967c86ca3e4839ea5732094"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#afa444f1d3967c86ca3e4839ea5732094">BTR_SEARCH_ON_PATTERN_LIMIT</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:afa444f1d3967c86ca3e4839ea5732094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8021dc6fe525e918d403fa5cd50c450"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#ae8021dc6fe525e918d403fa5cd50c450">BTR_SEARCH_ON_HASH_LIMIT</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:ae8021dc6fe525e918d403fa5cd50c450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a890b32e98d68aa88f3995b16a7476469"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#a890b32e98d68aa88f3995b16a7476469">BTR_SEA_TIMEOUT</a>&#160;&#160;&#160;10000</td></tr>
<tr class="separator:a890b32e98d68aa88f3995b16a7476469"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af1ac539344c8c4a918f2461b7e2ea374"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#af1ac539344c8c4a918f2461b7e2ea374">btr_search_sys_create</a> (ulint hash_size)</td></tr>
<tr class="separator:af1ac539344c8c4a918f2461b7e2ea374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad79ad1bd64e5cb2586daced8398c8779"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#ad79ad1bd64e5cb2586daced8398c8779">btr_search_sys_free</a> (void)</td></tr>
<tr class="separator:ad79ad1bd64e5cb2586daced8398c8779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90851ab21895f360e3417e6208d4f559"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#a90851ab21895f360e3417e6208d4f559">btr_search_disable</a> (void)</td></tr>
<tr class="separator:a90851ab21895f360e3417e6208d4f559"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ffffd2a89c8d7ce0afcbf0f920fd6d"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#a05ffffd2a89c8d7ce0afcbf0f920fd6d">btr_search_enable</a> (void)</td></tr>
<tr class="separator:a05ffffd2a89c8d7ce0afcbf0f920fd6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9494e80cbac9ccfaa4ca632c317285b"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#af9494e80cbac9ccfaa4ca632c317285b">btr_search_get_info</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="row0upd_8cc.html#a4ddeaa41a4dab23a7eaa06ee52e4522b">index</a>) <a class="el" href="trx0undo_8cc.html#aa965850120c0683c58e8c762cdc0fb17">__attribute__</a>((nonnull))</td></tr>
<tr class="separator:af9494e80cbac9ccfaa4ca632c317285b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab72c58cd4b8267eb55d3b5b61979ec13"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN <a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#ab72c58cd4b8267eb55d3b5b61979ec13">btr_search_info_create</a> (<a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="el" href="trx0rec_8cc.html#a18459ed20cf7df7b5953ca0f9f3fea33">heap</a>)</td></tr>
<tr class="separator:ab72c58cd4b8267eb55d3b5b61979ec13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6dea0b428b64f76d6660e0aa9ea4ba4"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#ad6dea0b428b64f76d6660e0aa9ea4ba4">btr_search_info_get_ref_count</a> (<a class="el" href="structbtr__search__t.html">btr_search_t</a> *info)</td></tr>
<tr class="separator:ad6dea0b428b64f76d6660e0aa9ea4ba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25ed49d7532a5527dec1a0153f9104ae"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#a25ed49d7532a5527dec1a0153f9104ae">btr_search_info_update</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="row0upd_8cc.html#a4ddeaa41a4dab23a7eaa06ee52e4522b">index</a>, <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *<a class="el" href="row0ins_8cc.html#ae8a68d572be3998302db348b39cb3c2b">cursor</a>)</td></tr>
<tr class="separator:a25ed49d7532a5527dec1a0153f9104ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a430af82452b499cc4e0d7e3b1106497d"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#a430af82452b499cc4e0d7e3b1106497d">btr_search_guess_on_hash</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="row0upd_8cc.html#a4ddeaa41a4dab23a7eaa06ee52e4522b">index</a>, <a class="el" href="structbtr__search__t.html">btr_search_t</a> *info, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *<a class="el" href="row0merge_8cc.html#aa15f6f5c88768ee85a3ed8a4905d7745">tuple</a>, ulint <a class="el" href="row0umod_8cc.html#a72b8a027308addc643f9adf5e4d41f9a">mode</a>, ulint latch_mode, <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *<a class="el" href="row0ins_8cc.html#ae8a68d572be3998302db348b39cb3c2b">cursor</a>, ulint has_search_latch, <a class="el" href="structmtr__t.html">mtr_t</a> *<a class="el" href="trx0undo_8cc.html#a9013d42949ecc21fdd8de523420df8ba">mtr</a>)</td></tr>
<tr class="separator:a430af82452b499cc4e0d7e3b1106497d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56191500ebb8904c374acb24cb4a7ad4"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#a56191500ebb8904c374acb24cb4a7ad4">btr_search_move_or_delete_hash_entries</a> (<a class="el" href="structbuf__block__t.html">buf_block_t</a> *<a class="el" href="btr0btr_8cc.html#a027a5099548314f2e2405f7d6270725f">new_block</a>, <a class="el" href="structbuf__block__t.html">buf_block_t</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="row0upd_8cc.html#a4ddeaa41a4dab23a7eaa06ee52e4522b">index</a>)</td></tr>
<tr class="separator:a56191500ebb8904c374acb24cb4a7ad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac860ed78065384d4b1ed1a5d809d221b"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#ac860ed78065384d4b1ed1a5d809d221b">btr_search_drop_page_hash_index</a> (<a class="el" href="structbuf__block__t.html">buf_block_t</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>)</td></tr>
<tr class="separator:ac860ed78065384d4b1ed1a5d809d221b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae85d744ff9b2734301f4520444d83dfb"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#ae85d744ff9b2734301f4520444d83dfb">btr_search_drop_page_hash_when_freed</a> (ulint <a class="el" href="ibuf0ibuf_8cc.html#aae9e36bded84b28f880abb9a711c7d1e">space</a>, ulint <a class="el" href="row0merge_8cc.html#acbd6f0665ead771e112f93b23cf27faf">zip_size</a>, ulint <a class="el" href="ibuf0ibuf_8cc.html#a4856a6e725a44f73f3d7a0201373c5b7">page_no</a>)</td></tr>
<tr class="separator:ae85d744ff9b2734301f4520444d83dfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae55c90528e334c64e4b9601a6ff80a2b"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#ae55c90528e334c64e4b9601a6ff80a2b">btr_search_update_hash_node_on_insert</a> (<a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *<a class="el" href="row0ins_8cc.html#ae8a68d572be3998302db348b39cb3c2b">cursor</a>)</td></tr>
<tr class="separator:ae55c90528e334c64e4b9601a6ff80a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab7c0fc33675fd37d80ef83a9250c3aa"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#aab7c0fc33675fd37d80ef83a9250c3aa">btr_search_update_hash_on_insert</a> (<a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *<a class="el" href="row0ins_8cc.html#ae8a68d572be3998302db348b39cb3c2b">cursor</a>)</td></tr>
<tr class="separator:aab7c0fc33675fd37d80ef83a9250c3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16ddf874784308ed5686772520f4a66b"><td class="memItemLeft" align="right" valign="top">UNIV_INTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#a16ddf874784308ed5686772520f4a66b">btr_search_update_hash_on_delete</a> (<a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *<a class="el" href="row0ins_8cc.html#ae8a68d572be3998302db348b39cb3c2b">cursor</a>)</td></tr>
<tr class="separator:a16ddf874784308ed5686772520f4a66b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad0e4dd1c1cef9ea852db235d0f6aa959"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbtr__search__sys__t.html">btr_search_sys_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8h.html#ad0e4dd1c1cef9ea852db235d0f6aa959">btr_search_sys</a></td></tr>
<tr class="separator:ad0e4dd1c1cef9ea852db235d0f6aa959"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The index tree adaptive search</p>
<p>Created 2/17/1996 Heikki Tuuri </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a890b32e98d68aa88f3995b16a7476469"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a890b32e98d68aa88f3995b16a7476469">&#9670;&nbsp;</a></span>BTR_SEA_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BTR_SEA_TIMEOUT&#160;&#160;&#160;10000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We do this many searches before trying to keep the search latch over calls from MySQL. If we notice someone waiting for the latch, we again set this much timeout. This is to reduce contention. </p>

</div>
</div>
<a id="a431171bce1a77fe307d3235a816d483f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a431171bce1a77fe307d3235a816d483f">&#9670;&nbsp;</a></span>BTR_SEARCH_HASH_ANALYSIS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BTR_SEARCH_HASH_ANALYSIS&#160;&#160;&#160;17</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>After change in n_fields or n_bytes in info, this many rounds are waited before starting the hash analysis again: this is to save CPU time when there is no hope in building a hash index. </p>

</div>
</div>
<a id="ae8021dc6fe525e918d403fa5cd50c450"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8021dc6fe525e918d403fa5cd50c450">&#9670;&nbsp;</a></span>BTR_SEARCH_ON_HASH_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BTR_SEARCH_ON_HASH_LIMIT&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Limit of consecutive searches for trying a search shortcut using the hash index </p>

</div>
</div>
<a id="afa444f1d3967c86ca3e4839ea5732094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa444f1d3967c86ca3e4839ea5732094">&#9670;&nbsp;</a></span>BTR_SEARCH_ON_PATTERN_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BTR_SEARCH_ON_PATTERN_LIMIT&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Limit of consecutive searches for trying a search shortcut on the search pattern </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a90851ab21895f360e3417e6208d4f559"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90851ab21895f360e3417e6208d4f559">&#9670;&nbsp;</a></span>btr_search_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void btr_search_disable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disable the adaptive hash search system and empty the index. </p>

</div>
</div>
<a id="ac860ed78065384d4b1ed1a5d809d221b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac860ed78065384d4b1ed1a5d809d221b">&#9670;&nbsp;</a></span>btr_search_drop_page_hash_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void btr_search_drop_page_hash_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Drops a page hash index. in: block containing index page, s- or x-latched, or an index page for which we know that block-&gt;buf_fix_count == 0</p>
<p>Drops a page hash index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>in: block containing index page, s- or x-latched, or an index page for which we know that block-&gt;buf_fix_count == 0 or it is an index page which has already been removed from the buf_pool-&gt;page_hash i.e.: it is in state BUF_BLOCK_REMOVE_HASH </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae85d744ff9b2734301f4520444d83dfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae85d744ff9b2734301f4520444d83dfb">&#9670;&nbsp;</a></span>btr_search_drop_page_hash_when_freed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void btr_search_drop_page_hash_when_freed </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>zip_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>page_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Drops a possible page hash index when a page is evicted from the buffer pool or freed in a file segment. in: page number</p>
<p>Drops a possible page hash index when a page is evicted from the buffer pool or freed in a file segment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">space</td><td>in: space id </td></tr>
    <tr><td class="paramname">zip_size</td><td>in: compressed page size in bytes or 0 for uncompressed pages </td></tr>
    <tr><td class="paramname">page_no</td><td>in: page number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a05ffffd2a89c8d7ce0afcbf0f920fd6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05ffffd2a89c8d7ce0afcbf0f920fd6d">&#9670;&nbsp;</a></span>btr_search_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void btr_search_enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable the adaptive hash search system. </p>

</div>
</div>
<a id="af9494e80cbac9ccfaa4ca632c317285b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9494e80cbac9ccfaa4ca632c317285b">&#9670;&nbsp;</a></span>btr_search_get_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="structbtr__search__t.html">btr_search_t</a>* btr_search_get_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns search info for an index. </p><dl class="section return"><dt>Returns</dt><dd>search info; search mutex reserved </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in: index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a430af82452b499cc4e0d7e3b1106497d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a430af82452b499cc4e0d7e3b1106497d">&#9670;&nbsp;</a></span>btr_search_guess_on_hash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ibool btr_search_guess_on_hash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>tuple</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>latch_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>has_search_latch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tries to guess the right search position based on the hash search info of the index. Note that if mode is PAGE_CUR_LE, which is used in inserts, and the function returns TRUE, then cursor-&gt;up_match and cursor-&gt;low_match both have sensible values. </p><dl class="section return"><dt>Returns</dt><dd>TRUE if succeeded in: mtr</dd></dl>
<p>Tries to guess the right search position based on the hash search info of the index. Note that if mode is PAGE_CUR_LE, which is used in inserts, and the function returns TRUE, then cursor-&gt;up_match and cursor-&gt;low_match both have sensible values. </p><dl class="section return"><dt>Returns</dt><dd>TRUE if succeeded </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in: index </td></tr>
    <tr><td class="paramname">info</td><td>in: index search info </td></tr>
    <tr><td class="paramname">tuple</td><td>in: logical record </td></tr>
    <tr><td class="paramname">mode</td><td>in: PAGE_CUR_L, ... </td></tr>
    <tr><td class="paramname">latch_mode</td><td>in: BTR_SEARCH_LEAF, ...; NOTE that only if has_search_latch is 0, we will have a latch set on the cursor page, otherwise we assume the caller uses his search latch to protect the record! </td></tr>
    <tr><td class="paramname">cursor</td><td>out: tree cursor </td></tr>
    <tr><td class="paramname">has_search_latch</td><td>in: latch mode the caller currently has on btr_search_latch: RW_S_LATCH, RW_X_LATCH, or 0 </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab72c58cd4b8267eb55d3b5b61979ec13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab72c58cd4b8267eb55d3b5b61979ec13">&#9670;&nbsp;</a></span>btr_search_info_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN <a class="el" href="structbtr__search__t.html">btr_search_t</a>* btr_search_info_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmem__block__info__t.html">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates and initializes a search info struct. </p><dl class="section return"><dt>Returns</dt><dd>own: search info struct in: heap where created</dd></dl>
<p>Creates and initializes a search info struct. </p><dl class="section return"><dt>Returns</dt><dd>own: search info struct </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">heap</td><td>in: heap where created </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad6dea0b428b64f76d6660e0aa9ea4ba4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6dea0b428b64f76d6660e0aa9ea4ba4">&#9670;&nbsp;</a></span>btr_search_info_get_ref_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN ulint btr_search_info_get_ref_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the value of ref_count. The value is protected by btr_search_latch. </p><dl class="section return"><dt>Returns</dt><dd>ref_count value. in: search info.</dd></dl>
<p>Returns the value of ref_count. The value is protected by btr_search_latch. </p><dl class="section return"><dt>Returns</dt><dd>ref_count value. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>in: search info. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a25ed49d7532a5527dec1a0153f9104ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25ed49d7532a5527dec1a0153f9104ae">&#9670;&nbsp;</a></span>btr_search_info_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void btr_search_info_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the search info. in: cursor which was just positioned </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in: index of the cursor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a56191500ebb8904c374acb24cb4a7ad4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56191500ebb8904c374acb24cb4a7ad4">&#9670;&nbsp;</a></span>btr_search_move_or_delete_hash_entries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void btr_search_move_or_delete_hash_entries </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>new_block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Moves or deletes hash entries for moved records. If new_page is already hashed, then the hash index for page, if any, is dropped. If new_page is not hashed, and page is hashed, then a new hash index is built to new_page with the same parameters as page (this often happens when a page is split). in: record descriptor</p>
<p>Moves or deletes hash entries for moved records. If new_page is already hashed, then the hash index for page, if any, is dropped. If new_page is not hashed, and page is hashed, then a new hash index is built to new_page with the same parameters as page (this often happens when a page is split). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_block</td><td>in: records are copied to this page </td></tr>
    <tr><td class="paramname">block</td><td>in: index page from which records were copied, and the copied records will be deleted from this page </td></tr>
    <tr><td class="paramname">index</td><td>in: record descriptor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af1ac539344c8c4a918f2461b7e2ea374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1ac539344c8c4a918f2461b7e2ea374">&#9670;&nbsp;</a></span>btr_search_sys_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void btr_search_sys_create </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>hash_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates and initializes the adaptive search system at a database start. in: hash index hash table size</p>
<p>Creates and initializes the adaptive search system at a database start. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash_size</td><td>in: hash index hash table size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad79ad1bd64e5cb2586daced8398c8779"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad79ad1bd64e5cb2586daced8398c8779">&#9670;&nbsp;</a></span>btr_search_sys_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void btr_search_sys_free </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees the adaptive search system at a database shutdown. </p>

</div>
</div>
<a id="ae55c90528e334c64e4b9601a6ff80a2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae55c90528e334c64e4b9601a6ff80a2b">&#9670;&nbsp;</a></span>btr_search_update_hash_node_on_insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void btr_search_update_hash_node_on_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the page hash index when a single record is inserted on a page. in: cursor which was positioned to the place to insert using btr_cur_search_..., and the new record has been inserted next to the cursor</p>
<p>Updates the page hash index when a single record is inserted on a page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cursor</td><td>in: cursor which was positioned to the place to insert using btr_cur_search_..., and the new record has been inserted next to the cursor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a16ddf874784308ed5686772520f4a66b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16ddf874784308ed5686772520f4a66b">&#9670;&nbsp;</a></span>btr_search_update_hash_on_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void btr_search_update_hash_on_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the page hash index when a single record is deleted from a page. in: cursor which was positioned on the record to delete using btr_cur_search_..., the record is not yet deleted</p>
<p>Updates the page hash index when a single record is deleted from a page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cursor</td><td>in: cursor which was positioned on the record to delete using btr_cur_search_..., the record is not yet deleted </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aab7c0fc33675fd37d80ef83a9250c3aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab7c0fc33675fd37d80ef83a9250c3aa">&#9670;&nbsp;</a></span>btr_search_update_hash_on_insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INTERN void btr_search_update_hash_on_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the page hash index when a single record is inserted on a page. in: cursor which was positioned to the place to insert using btr_cur_search_..., and the new record has been inserted next to the cursor</p>
<p>Updates the page hash index when a single record is inserted on a page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cursor</td><td>in: cursor which was positioned to the place to insert using btr_cur_search_..., and the new record has been inserted next to the cursor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad0e4dd1c1cef9ea852db235d0f6aa959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0e4dd1c1cef9ea852db235d0f6aa959">&#9670;&nbsp;</a></span>btr_search_sys</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbtr__search__sys__t.html">btr_search_sys_t</a>* btr_search_sys</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The adaptive hash index </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
