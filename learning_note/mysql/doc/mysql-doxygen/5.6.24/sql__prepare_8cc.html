<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: sql/sql_prepare.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5bd71961b401a432086d0fb290a87f3f.html">sql</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sql_prepare.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;my_global.h&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__priv_8h_source.html">sql_priv.h</a>&quot;</code><br />
<code>#include &quot;unireg.h&quot;</code><br />
<code>#include &quot;sql_class.h&quot;</code><br />
<code>#include &quot;<a class="el" href="set__var_8h_source.html">set_var.h</a>&quot;</code><br />
<code>#include &quot;sql_prepare.h&quot;</code><br />
<code>#include &quot;sql_parse.h&quot;</code><br />
<code>#include &quot;sql_base.h&quot;</code><br />
<code>#include &quot;sql_cache.h&quot;</code><br />
<code>#include &quot;sql_view.h&quot;</code><br />
<code>#include &quot;sql_delete.h&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__select_8h_source.html">sql_select.h</a>&quot;</code><br />
<code>#include &quot;sql_insert.h&quot;</code><br />
<code>#include &quot;sql_update.h&quot;</code><br />
<code>#include &quot;sql_db.h&quot;</code><br />
<code>#include &quot;sql_acl.h&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__cursor_8h_source.html">sql_cursor.h</a>&quot;</code><br />
<code>#include &quot;sp_head.h&quot;</code><br />
<code>#include &quot;sp.h&quot;</code><br />
<code>#include &quot;sp_cache.h&quot;</code><br />
<code>#include &quot;sql_handler.h&quot;</code><br />
<code>#include &quot;probes_mysql.h&quot;</code><br />
<code>#include &lt;mysql_com.h&gt;</code><br />
<code>#include &quot;lock.h&quot;</code><br />
<code>#include &quot;<a class="el" href="opt__trace_8h_source.html">opt_trace.h</a>&quot;</code><br />
<code>#include &quot;sql_analyse.h&quot;</code><br />
<code>#include &quot;sql_rewrite.h&quot;</code><br />
<code>#include &quot;transaction.h&quot;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_select__fetch__protocol__binary.html">Select_fetch_protocol_binary</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_prepared__statement.html">Prepared_statement</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_execute__sql__statement.html">Execute_sql_statement</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_protocol__local.html">Protocol_local</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aeca8422d8a31fffdf3a14c52a9fa60c1"><td class="memItemLeft" align="right" valign="top"><a id="aeca8422d8a31fffdf3a14c52a9fa60c1"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>rewrite_query_if_needed</b> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>)</td></tr>
<tr class="separator:aeca8422d8a31fffdf3a14c52a9fa60c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8ee6ccaf88d1e9422acf2251b9f9d90"><td class="memItemLeft" align="right" valign="top"><a id="ab8ee6ccaf88d1e9422acf2251b9f9d90"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>log_execute_line</b> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>)</td></tr>
<tr class="separator:ab8ee6ccaf88d1e9422acf2251b9f9d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a894d8d107ee67c66ceafdf94c8c4d633"><td class="memItemLeft" align="right" valign="top"><a id="a894d8d107ee67c66ceafdf94c8c4d633"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_param_null</b> (const uchar *pos, ulong param_no)</td></tr>
<tr class="separator:a894d8d107ee67c66ceafdf94c8c4d633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4333da726c23de7876babb96b3dd04f9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a4333da726c23de7876babb96b3dd04f9">find_prepared_statement</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>, ulong <a class="el" href="trx0undo_8cc.html#a42c94db63b554b8c7fa2a814f1f3dc8f">id</a>)</td></tr>
<tr class="separator:a4333da726c23de7876babb96b3dd04f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c6425fa85557ca8f86b27049e5dfba4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a4c6425fa85557ca8f86b27049e5dfba4">send_prep_stmt</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, uint columns)</td></tr>
<tr class="separator:a4c6425fa85557ca8f86b27049e5dfba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d06ac0ab1c2bb4202bf1cc71b829361"><td class="memItemLeft" align="right" valign="top">static ulong&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a5d06ac0ab1c2bb4202bf1cc71b829361">get_param_length</a> (uchar **packet, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:a5d06ac0ab1c2bb4202bf1cc71b829361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab746819c424f6e8e53de9b44107b3748"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#ab746819c424f6e8e53de9b44107b3748">set_param_tiny</a> (<a class="el" href="class_item__param.html">Item_param</a> *param, uchar **pos, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:ab746819c424f6e8e53de9b44107b3748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec6a86eac1f13b2471e08714355e437c"><td class="memItemLeft" align="right" valign="top"><a id="aec6a86eac1f13b2471e08714355e437c"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>set_param_short</b> (<a class="el" href="class_item__param.html">Item_param</a> *param, uchar **pos, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:aec6a86eac1f13b2471e08714355e437c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a647386acefdadc03e24a674939b3f33f"><td class="memItemLeft" align="right" valign="top"><a id="a647386acefdadc03e24a674939b3f33f"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>set_param_int32</b> (<a class="el" href="class_item__param.html">Item_param</a> *param, uchar **pos, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:a647386acefdadc03e24a674939b3f33f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d18621c554dbff822687fa9ea8f8c8"><td class="memItemLeft" align="right" valign="top"><a id="af7d18621c554dbff822687fa9ea8f8c8"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>set_param_int64</b> (<a class="el" href="class_item__param.html">Item_param</a> *param, uchar **pos, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:af7d18621c554dbff822687fa9ea8f8c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25f58f7f9e9163f24f3e7824fd33db41"><td class="memItemLeft" align="right" valign="top"><a id="a25f58f7f9e9163f24f3e7824fd33db41"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>set_param_float</b> (<a class="el" href="class_item__param.html">Item_param</a> *param, uchar **pos, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:a25f58f7f9e9163f24f3e7824fd33db41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00773d4281c4b91bbf9cebcd81a7f71d"><td class="memItemLeft" align="right" valign="top"><a id="a00773d4281c4b91bbf9cebcd81a7f71d"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>set_param_double</b> (<a class="el" href="class_item__param.html">Item_param</a> *param, uchar **pos, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:a00773d4281c4b91bbf9cebcd81a7f71d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a854d60fbb4da0f00188749ca6dc83d24"><td class="memItemLeft" align="right" valign="top"><a id="a854d60fbb4da0f00188749ca6dc83d24"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>set_param_decimal</b> (<a class="el" href="class_item__param.html">Item_param</a> *param, uchar **pos, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:a854d60fbb4da0f00188749ca6dc83d24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec3d94c06c8c8f5009bd6dd1fcc5f7b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#aaec3d94c06c8c8f5009bd6dd1fcc5f7b">set_param_time</a> (<a class="el" href="class_item__param.html">Item_param</a> *param, uchar **pos, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:aaec3d94c06c8c8f5009bd6dd1fcc5f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be69245681e9fcf775e887f5602d5c5"><td class="memItemLeft" align="right" valign="top"><a id="a4be69245681e9fcf775e887f5602d5c5"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>set_param_datetime</b> (<a class="el" href="class_item__param.html">Item_param</a> *param, uchar **pos, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:a4be69245681e9fcf775e887f5602d5c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb05d4cb9071cd93b0ca0ff8782ef1d7"><td class="memItemLeft" align="right" valign="top"><a id="afb05d4cb9071cd93b0ca0ff8782ef1d7"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>set_param_date</b> (<a class="el" href="class_item__param.html">Item_param</a> *param, uchar **pos, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:afb05d4cb9071cd93b0ca0ff8782ef1d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb0c179497aff142a1ca70c251fb0d60"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#abb0c179497aff142a1ca70c251fb0d60">set_param_str</a> (<a class="el" href="class_item__param.html">Item_param</a> *param, uchar **pos, ulong <a class="el" href="row0sel_8cc.html#abc67df9cd0bfdc52888bacc2e5097fdd">len</a>)</td></tr>
<tr class="separator:abb0c179497aff142a1ca70c251fb0d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1db23435dc253d1d1312103a973b4d6f"><td class="memItemLeft" align="right" valign="top"><a id="a1db23435dc253d1d1312103a973b4d6f"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>setup_one_conversion_function</b> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>, <a class="el" href="class_item__param.html">Item_param</a> *param, uchar param_type)</td></tr>
<tr class="separator:a1db23435dc253d1d1312103a973b4d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0df8e5865ec6b3e5bae4e284e40a1fbb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a0df8e5865ec6b3e5bae4e284e40a1fbb">is_param_long_data_type</a> (<a class="el" href="class_item__param.html">Item_param</a> *param)</td></tr>
<tr class="separator:a0df8e5865ec6b3e5bae4e284e40a1fbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45094b7b8e77913b43cf2d1a2fac4690"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a45094b7b8e77913b43cf2d1a2fac4690">insert_params_with_log</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, uchar *null_array, uchar *read_pos, uchar *data_end, <a class="el" href="class_string.html">String</a> *<a class="el" href="structquery.html">query</a>)</td></tr>
<tr class="separator:a45094b7b8e77913b43cf2d1a2fac4690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab42fbc5a6ca45f57e70b919c63baa346"><td class="memItemLeft" align="right" valign="top"><a id="ab42fbc5a6ca45f57e70b919c63baa346"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>insert_params</b> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, uchar *null_array, uchar *read_pos, uchar *data_end, <a class="el" href="class_string.html">String</a> *expanded_query)</td></tr>
<tr class="separator:ab42fbc5a6ca45f57e70b919c63baa346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1434cfb7a391d04f6fae4ac4ef7aac"><td class="memItemLeft" align="right" valign="top"><a id="ade1434cfb7a391d04f6fae4ac4ef7aac"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>setup_conversion_functions</b> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, uchar **<a class="el" href="row0sel_8cc.html#ad5785aee834440a0628434c5e5ab94d2">data</a>, uchar *data_end)</td></tr>
<tr class="separator:ade1434cfb7a391d04f6fae4ac4ef7aac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acad4ba7c4a218efa6ef946dfe636a161"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#acad4ba7c4a218efa6ef946dfe636a161">swap_parameter_array</a> (<a class="el" href="class_item__param.html">Item_param</a> **param_array_dst, <a class="el" href="class_item__param.html">Item_param</a> **param_array_src, uint param_count)</td></tr>
<tr class="separator:acad4ba7c4a218efa6ef946dfe636a161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a93a4412a04822dac211041e6441fc8"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a4a93a4412a04822dac211041e6441fc8">insert_params_from_vars</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="class_list.html">List</a>&lt; <a class="el" href="structst__mysql__lex__string.html">LEX_STRING</a> &gt; &amp;varnames, <a class="el" href="class_string.html">String</a> *<a class="el" href="structquery.html">query</a> <a class="el" href="trx0undo_8cc.html#aa965850120c0683c58e8c762cdc0fb17">__attribute__</a>((unused)))</td></tr>
<tr class="separator:a4a93a4412a04822dac211041e6441fc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20ec63def96217d2ee85be0d1d5459c5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a20ec63def96217d2ee85be0d1d5459c5">insert_params_from_vars_with_log</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="class_list.html">List</a>&lt; <a class="el" href="structst__mysql__lex__string.html">LEX_STRING</a> &gt; &amp;varnames, <a class="el" href="class_string.html">String</a> *<a class="el" href="structquery.html">query</a>)</td></tr>
<tr class="separator:a20ec63def96217d2ee85be0d1d5459c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3d42acce15ace38814d57440d21aaf4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#ad3d42acce15ace38814d57440d21aaf4">mysql_test_insert</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *table_list, <a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_item.html">Item</a> &gt; &amp;<a class="el" href="rem0rec_8cc.html#a18b60f4abb9035f6a2d6b87f0ff336b9">fields</a>, <a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_list.html">List_item</a> &gt; &amp;values_list, <a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_item.html">Item</a> &gt; &amp;update_fields, <a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_item.html">Item</a> &gt; &amp;update_values, enum_duplicates duplic)</td></tr>
<tr class="separator:ad3d42acce15ace38814d57440d21aaf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a49c9a3e7c6e4df379e3bd05e5e5002"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a4a49c9a3e7c6e4df379e3bd05e5e5002">mysql_test_update</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *table_list)</td></tr>
<tr class="separator:a4a49c9a3e7c6e4df379e3bd05e5e5002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fa98308d8ca055221f58e45b42b03c9"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a0fa98308d8ca055221f58e45b42b03c9">mysql_test_delete</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *table_list)</td></tr>
<tr class="separator:a0fa98308d8ca055221f58e45b42b03c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74490296f18c1a9a1efaa5f30dd7f540"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a74490296f18c1a9a1efaa5f30dd7f540">mysql_test_select</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *<a class="el" href="fts0fts_8cc.html#aa86c147940343159f5b38505b80bb233">tables</a>)</td></tr>
<tr class="separator:a74490296f18c1a9a1efaa5f30dd7f540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04987f594841a991909d8783f1f7ab6a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a04987f594841a991909d8783f1f7ab6a">mysql_test_do_fields</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *<a class="el" href="fts0fts_8cc.html#aa86c147940343159f5b38505b80bb233">tables</a>, <a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_item.html">Item</a> &gt; *values)</td></tr>
<tr class="separator:a04987f594841a991909d8783f1f7ab6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade57ef8271ba2e1b2bd0d85b252424e2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#ade57ef8271ba2e1b2bd0d85b252424e2">mysql_test_set_fields</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *<a class="el" href="fts0fts_8cc.html#aa86c147940343159f5b38505b80bb233">tables</a>, <a class="el" href="class_list.html">List</a>&lt; <a class="el" href="classset__var__base.html">set_var_base</a> &gt; *var_list)</td></tr>
<tr class="separator:ade57ef8271ba2e1b2bd0d85b252424e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6228fc1aca223d0647f4f3de68f4f86"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#ac6228fc1aca223d0647f4f3de68f4f86">mysql_test_call_fields</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *<a class="el" href="fts0fts_8cc.html#aa86c147940343159f5b38505b80bb233">tables</a>, <a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_item.html">Item</a> &gt; *value_list)</td></tr>
<tr class="separator:ac6228fc1aca223d0647f4f3de68f4f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac50098bba18a0292a245b4dde674647d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#ac50098bba18a0292a245b4dde674647d">select_like_stmt_test</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, int(*specific_prepare)(THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>), ulong setup_tables_done_option)</td></tr>
<tr class="separator:ac50098bba18a0292a245b4dde674647d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a096dda14d717535aae4a7f9dbc96a2ed"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a096dda14d717535aae4a7f9dbc96a2ed">select_like_stmt_test_with_open</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *<a class="el" href="fts0fts_8cc.html#aa86c147940343159f5b38505b80bb233">tables</a>, int(*specific_prepare)(THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>), ulong setup_tables_done_option)</td></tr>
<tr class="separator:a096dda14d717535aae4a7f9dbc96a2ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae99abd815630ce1ba6811d4b9fdd65f6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#ae99abd815630ce1ba6811d4b9fdd65f6">mysql_test_create_table</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt)</td></tr>
<tr class="separator:ae99abd815630ce1ba6811d4b9fdd65f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14754764b032cded70df6231ecfa7831"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a14754764b032cded70df6231ecfa7831">mysql_test_create_view</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt)</td></tr>
<tr class="memdesc:a14754764b032cded70df6231ecfa7831"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate and prepare for execution CREATE VIEW statement.  <a href="#a14754764b032cded70df6231ecfa7831">More...</a><br /></td></tr>
<tr class="separator:a14754764b032cded70df6231ecfa7831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe53ba520dc4e88a75fd2e12fd36835e"><td class="memItemLeft" align="right" valign="top"><a id="afe53ba520dc4e88a75fd2e12fd36835e"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>mysql_test_multiupdate</b> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *<a class="el" href="fts0fts_8cc.html#aa86c147940343159f5b38505b80bb233">tables</a>, bool converted)</td></tr>
<tr class="separator:afe53ba520dc4e88a75fd2e12fd36835e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc0c9ffa3f8eadef9f49ad075cebba5e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#acc0c9ffa3f8eadef9f49ad075cebba5e">mysql_multi_delete_prepare_tester</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>)</td></tr>
<tr class="separator:acc0c9ffa3f8eadef9f49ad075cebba5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adea9838d8a502c8d903e69fc9fc8cff6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#adea9838d8a502c8d903e69fc9fc8cff6">mysql_test_multidelete</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *<a class="el" href="fts0fts_8cc.html#aa86c147940343159f5b38505b80bb233">tables</a>)</td></tr>
<tr class="separator:adea9838d8a502c8d903e69fc9fc8cff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fda579c3681b59415f9e3ecf1040638"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a4fda579c3681b59415f9e3ecf1040638">mysql_insert_select_prepare_tester</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>)</td></tr>
<tr class="separator:a4fda579c3681b59415f9e3ecf1040638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f5f67b1f6b050ad769874219d3ab059"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a6f5f67b1f6b050ad769874219d3ab059">mysql_test_insert_select</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *<a class="el" href="fts0fts_8cc.html#aa86c147940343159f5b38505b80bb233">tables</a>)</td></tr>
<tr class="separator:a6f5f67b1f6b050ad769874219d3ab059"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09a9e88eae130d1ce53ae9ce4d3d84b5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a09a9e88eae130d1ce53ae9ce4d3d84b5">check_prepared_statement</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt)</td></tr>
<tr class="separator:a09a9e88eae130d1ce53ae9ce4d3d84b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e5f6a039844865113ad1f922388ffbd"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a6e5f6a039844865113ad1f922388ffbd">init_param_array</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt)</td></tr>
<tr class="separator:a6e5f6a039844865113ad1f922388ffbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a626dc0ff3952d0fd850852643008fb8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a626dc0ff3952d0fd850852643008fb8a">mysqld_stmt_prepare</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>, const char *packet, uint packet_length)</td></tr>
<tr class="separator:a626dc0ff3952d0fd850852643008fb8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8af51380e25b45868b1bd39b20447e08"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a8af51380e25b45868b1bd39b20447e08">get_dynamic_sql_string</a> (LEX *lex, uint *query_len)</td></tr>
<tr class="separator:a8af51380e25b45868b1bd39b20447e08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb51d4335dea1c2ec4f9ceb80469b235"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#afb51d4335dea1c2ec4f9ceb80469b235">mysql_sql_stmt_prepare</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>)</td></tr>
<tr class="separator:afb51d4335dea1c2ec4f9ceb80469b235"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac923efcc818c95eeb45ebc9ac085f081"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#ac923efcc818c95eeb45ebc9ac085f081">reinit_stmt_before_use</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>, LEX *lex)</td></tr>
<tr class="separator:ac923efcc818c95eeb45ebc9ac085f081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5cb6c4f3b45273a192215534561e0bd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#aa5cb6c4f3b45273a192215534561e0bd">reset_stmt_params</a> (<a class="el" href="class_prepared__statement.html">Prepared_statement</a> *stmt)</td></tr>
<tr class="separator:aa5cb6c4f3b45273a192215534561e0bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a1c9021a769d0a0b46f0cb5b6e2cf0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a8a1c9021a769d0a0b46f0cb5b6e2cf0f">mysqld_stmt_execute</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>, char *packet_arg, uint packet_length)</td></tr>
<tr class="separator:a8a1c9021a769d0a0b46f0cb5b6e2cf0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a00244c38838cd10623212a4eb67bc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a7a00244c38838cd10623212a4eb67bc4">mysql_sql_stmt_execute</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>)</td></tr>
<tr class="separator:a7a00244c38838cd10623212a4eb67bc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfd89c8723f8e2681d45e2b3acfe9846"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#abfd89c8723f8e2681d45e2b3acfe9846">mysqld_stmt_fetch</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>, char *packet, uint packet_length)</td></tr>
<tr class="separator:abfd89c8723f8e2681d45e2b3acfe9846"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1c2e50d2f19d1ec1ae5dffd7524d6a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#ad1c2e50d2f19d1ec1ae5dffd7524d6a2">mysqld_stmt_reset</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>, char *packet, uint packet_length)</td></tr>
<tr class="separator:ad1c2e50d2f19d1ec1ae5dffd7524d6a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4109d85bbb494c4c7be6ae0c3fee2209"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a4109d85bbb494c4c7be6ae0c3fee2209">mysqld_stmt_close</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>, char *packet, uint packet_length)</td></tr>
<tr class="separator:a4109d85bbb494c4c7be6ae0c3fee2209"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02971e8a15a4e21d5291eb5c3d67fab9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a02971e8a15a4e21d5291eb5c3d67fab9">mysql_sql_stmt_close</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>)</td></tr>
<tr class="separator:a02971e8a15a4e21d5291eb5c3d67fab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77201c58cbf240c6316dd9d0d6bf7f14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8cc.html#a77201c58cbf240c6316dd9d0d6bf7f14">mysql_stmt_get_longdata</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>, char *packet, ulong packet_length)</td></tr>
<tr class="separator:a77201c58cbf240c6316dd9d0d6bf7f14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the implementation of prepared statements.</p>
<p>When one prepares a statement:</p>
<ul>
<li>Server gets the query from client with command 'COM_STMT_PREPARE'; in the following format: [COM_STMT_PREPARE:1] [query]</li>
<li>Parse the query and recognize any parameter markers '?' and store its information list in lex-&gt;param_list</li>
<li>Allocate a new statement for this prepare; and keep this in 'thd-&gt;stmt_map'.</li>
<li>Without executing the query, return back to client the total number of parameters along with result-set metadata information (if any) in the following format: <pre class="fragment">    [STMT_ID:4]
    [Column_count:2]
    [Param_count:2]
    [Params meta info (stubs only for now)]  (if Param_count &gt; 0)
    [Columns meta info] (if Column_count &gt; 0)</pre></li>
</ul>
<p>During prepare the tables used in a statement are opened, but no locks are acquired. Table opening will block any DDL during the operation, and we do not need any locks as we neither read nor modify any data during prepare. Tables are closed after prepare finishes.</p>
<p>When one executes a statement:</p>
<ul>
<li>Server gets the command 'COM_STMT_EXECUTE' to execute the previously prepared query. If there are any parameter markers, then the client will send the data in the following format: <pre class="fragment">    [COM_STMT_EXECUTE:1]
    [STMT_ID:4]
    [NULL_BITS:(param_count+7)/8)]
    [TYPES_SUPPLIED_BY_CLIENT(0/1):1]
    [[length]data]
    [[length]data] .. [[length]data].</pre> (Note: Except for string/binary types; all other types will not be supplied with length field)</li>
<li>If it is a first execute or types of parameters were altered by client, then setup the conversion routines.</li>
<li>Assign parameter items from the supplied data.</li>
<li>Execute the query without re-parsing and send back the results to client</li>
</ul>
<p>During execution of prepared statement tables are opened and locked the same way they would for normal (non-prepared) statement execution. Tables are unlocked and closed after the execution.</p>
<p>When one supplies long data for a placeholder:</p>
<ul>
<li>Server gets the long data in pieces with command type 'COM_STMT_SEND_LONG_DATA'.</li>
<li>The packet recieved will have the format as: [COM_STMT_SEND_LONG_DATA:1][STMT_ID:4][parameter_number:2][data]</li>
<li>data from the packet is appended to the long data value buffer for this placeholder.</li>
<li>It's up to the client to stop supplying data chunks at any point. The server doesn't care; also, the server doesn't notify the client whether it got the data or not; if there is any error, then it will be returned at statement execute. </li>
</ul>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a09a9e88eae130d1ce53ae9ce4d3d84b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09a9e88eae130d1ce53ae9ce4d3d84b5">&#9670;&nbsp;</a></span>check_prepared_statement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_prepared_statement </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform semantic analysis of the parsed tree and send a response packet to the client.</p>
<p>This function</p><ul>
<li>opens all tables and checks access rights</li>
<li>validates semantics of statement columns and SQL functions by calling fix_fields.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success, statement metadata is sent to client </td></tr>
    <tr><td class="paramname">TRUE</td><td>error, error message is set in THD (but not sent) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4333da726c23de7876babb96b3dd04f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4333da726c23de7876babb96b3dd04f9">&#9670;&nbsp;</a></span>find_prepared_statement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_prepared__statement.html">Prepared_statement</a>* find_prepared_statement </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Find a prepared statement in the statement map by id.</p>
<p>Try to find a prepared statement and set THD error if it's not found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread handle </td></tr>
    <tr><td class="paramname">id</td><td>statement id </td></tr>
    <tr><td class="paramname">where</td><td>the place from which this function is called (for error reporting).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the statement was not found, a pointer otherwise. </dd></dl>

</div>
</div>
<a id="a8af51380e25b45868b1bd39b20447e08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8af51380e25b45868b1bd39b20447e08">&#9670;&nbsp;</a></span>get_dynamic_sql_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* get_dynamic_sql_string </td>
          <td>(</td>
          <td class="paramtype">LEX *&#160;</td>
          <td class="paramname"><em>lex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint *&#160;</td>
          <td class="paramname"><em>query_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get an SQL statement text from a user variable or from plain text.</p>
<p>If the statement is plain text, just assign the pointers, otherwise allocate memory in thd-&gt;mem_root and copy the contents of the variable, possibly with character set conversion.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lex</td><td>main lex </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">query_len</td><td>length of the SQL statement (is set only in case of success)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>success </td></tr>
    <tr><td class="paramname">0</td><td>in case of error (out of memory) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5d06ac0ab1c2bb4202bf1cc71b829361"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d06ac0ab1c2bb4202bf1cc71b829361">&#9670;&nbsp;</a></span>get_param_length()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulong get_param_length </td>
          <td>(</td>
          <td class="paramtype">uchar **&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>EMBEDDED_LIBRARY Read the length of the parameter data and return it back to the caller.</p>
<p>Read data length, position the packet to the first byte after it, and return the length to the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packet</td><td>a pointer to the data </td></tr>
    <tr><td class="paramname">len</td><td>remaining packet length</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Length of data piece. </dd></dl>

</div>
</div>
<a id="a6e5f6a039844865113ad1f922388ffbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e5f6a039844865113ad1f922388ffbd">&#9670;&nbsp;</a></span>init_param_array()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool init_param_array </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize array of parameters in statement from LEX. (We need to have quick access to items by number in mysql_stmt_get_longdata). This is to avoid using malloc/realloc in the parser. </p>

</div>
</div>
<a id="a4a93a4412a04822dac211041e6441fc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a93a4412a04822dac211041e6441fc8">&#9670;&nbsp;</a></span>insert_params_from_vars()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool insert_params_from_vars </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_list.html">List</a>&lt; <a class="el" href="structst__mysql__lex__string.html">LEX_STRING</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>varnames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_string.html">String</a> *<a class="el" href="structquery.html">query</a> &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused)&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Assign prepared statement parameters from user variables.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>Statement </td></tr>
    <tr><td class="paramname">varnames</td><td><a class="el" href="class_list.html">List</a> of variables. Caller must ensure that number of variables in the list is equal to number of statement parameters </td></tr>
    <tr><td class="paramname">query</td><td>Ignored </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a20ec63def96217d2ee85be0d1d5459c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20ec63def96217d2ee85be0d1d5459c5">&#9670;&nbsp;</a></span>insert_params_from_vars_with_log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool insert_params_from_vars_with_log </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_list.html">List</a>&lt; <a class="el" href="structst__mysql__lex__string.html">LEX_STRING</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>varnames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_string.html">String</a> *&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Do the same as insert_params_from_vars but also construct query text for binary log.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>Prepared statement </td></tr>
    <tr><td class="paramname">varnames</td><td><a class="el" href="class_list.html">List</a> of variables. Caller must ensure that number of variables in the list is equal to number of statement parameters </td></tr>
    <tr><td class="paramname">query</td><td>The query with parameter markers replaced with corresponding user variables that were used to execute the query. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a45094b7b8e77913b43cf2d1a2fac4690"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45094b7b8e77913b43cf2d1a2fac4690">&#9670;&nbsp;</a></span>insert_params_with_log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool insert_params_with_log </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>null_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>read_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>data_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_string.html">String</a> *&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Routines to assign parameters from data supplied by the client.</p>
<p>Update the parameter markers by reading data from the packet and and generate a valid query for logging.</p>
<dl class="section note"><dt>Note</dt><dd>This function, along with other _with_log functions is called when one of binary, slow or general logs is open. Logging of prepared statements in all cases is performed by means of conventional queries: if parameter data was supplied from C API, each placeholder in the query is replaced with its actual value; if we're logging a [Dynamic] SQL prepared statement, parameter markers are replaced with variable names. Example: <pre class="fragment">   mysqld_stmt_prepare("UPDATE t1 SET a=a*1.25 WHERE a=?")
     --&gt; general logs gets [Prepare] UPDATE t1 SET a*1.25 WHERE a=?"
   mysqld_stmt_execute(stmt);
     --&gt; general and binary logs get
                           [Execute] UPDATE t1 SET a*1.25 WHERE a=1"</pre></dd></dl>
<p>If a statement has been prepared using SQL syntax: </p><pre class="fragment">   PREPARE stmt FROM "UPDATE t1 SET a=a*1.25 WHERE a=?"
     --&gt; general log gets
                               [Query]   PREPARE stmt FROM "UPDATE ..."
   EXECUTE stmt USING @a
     --&gt; general log gets
                           [Query]   EXECUTE stmt USING @a;</pre><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if success </td></tr>
    <tr><td class="paramname">1</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0df8e5865ec6b3e5bae4e284e40a1fbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0df8e5865ec6b3e5bae4e284e40a1fbb">&#9670;&nbsp;</a></span>is_param_long_data_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool is_param_long_data_type </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_item__param.html">Item_param</a> *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="struct_check.html">Check</a> whether this parameter data type is compatible with long data. Used to detect whether a long data stream has been supplied to a incompatible data type. </p>

</div>
</div>
<a id="a4fda579c3681b59415f9e3ecf1040638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fda579c3681b59415f9e3ecf1040638">&#9670;&nbsp;</a></span>mysql_insert_select_prepare_tester()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mysql_insert_select_prepare_tester </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Wrapper for mysql_insert_select_prepare, to make change of local tables after <a class="el" href="group___data___dictionary.html#ga258e3d35dfa1dbef9586f6f3d6a76326">open_normal_and_derived_tables()</a> call.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>We need to remove the first local table after <a class="el" href="group___data___dictionary.html#ga258e3d35dfa1dbef9586f6f3d6a76326">open_normal_and_derived_tables()</a>, because mysql_handle_derived uses local tables lists. </dd></dl>

</div>
</div>
<a id="acc0c9ffa3f8eadef9f49ad075cebba5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc0c9ffa3f8eadef9f49ad075cebba5e">&#9670;&nbsp;</a></span>mysql_multi_delete_prepare_tester()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mysql_multi_delete_prepare_tester </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Wrapper for mysql_multi_delete_prepare() function which makes it compatible with <a class="el" href="sql__prepare_8cc.html#a096dda14d717535aae4a7f9dbc96a2ed">select_like_stmt_test_with_open()</a>. </p>

</div>
</div>
<a id="a02971e8a15a4e21d5291eb5c3d67fab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02971e8a15a4e21d5291eb5c3d67fab9">&#9670;&nbsp;</a></span>mysql_sql_stmt_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysql_sql_stmt_close </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SQLCOM_DEALLOCATE implementation.</p>
<p>Close an SQL prepared statement. As this can be called from Dynamic SQL, we should be careful to not close a statement that is currently being executed.</p>
<dl class="section return"><dt>Returns</dt><dd>none: OK packet is sent in case of success, otherwise an error message is set in THD </dd></dl>

</div>
</div>
<a id="a7a00244c38838cd10623212a4eb67bc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a00244c38838cd10623212a4eb67bc4">&#9670;&nbsp;</a></span>mysql_sql_stmt_execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysql_sql_stmt_execute </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SQLCOM_EXECUTE implementation.</p>
<p>Execute prepared statement using parameter values from lex-&gt;prepared_stmt_params and send result to the client using text protocol. This is called from mysql_execute_command and therefore should behave like an ordinary query (e.g. not change global THD data, such as warning count, server status, etc). This function uses text protocol to send a possible result set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none: in case of success, OK (or result set) packet is sent to the client, otherwise an error is set in THD </dd></dl>

</div>
</div>
<a id="afb51d4335dea1c2ec4f9ceb80469b235"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb51d4335dea1c2ec4f9ceb80469b235">&#9670;&nbsp;</a></span>mysql_sql_stmt_prepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysql_sql_stmt_prepare </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SQLCOM_PREPARE implementation.</p>
<p>Prepare an SQL prepared statement. This is called from mysql_execute_command and should therefore behave like an ordinary query (e.g. should not reset any global THD data).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none: in case of success, OK packet is sent to the client, otherwise an error message is set in THD </dd></dl>

</div>
</div>
<a id="a77201c58cbf240c6316dd9d0d6bf7f14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77201c58cbf240c6316dd9d0d6bf7f14">&#9670;&nbsp;</a></span>mysql_stmt_get_longdata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysql_stmt_get_longdata </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>packet_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handle long data in pieces from client.</p>
<p>Get a part of a long data. To make the protocol efficient, we are not sending any return packets here. If something goes wrong, then we will send the error on 'execute' We assume that the client takes care of checking that all parts are sent to the server. (No checking that we get a 'end of column' in the server is performed).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread handle </td></tr>
    <tr><td class="paramname">packet</td><td><a class="el" href="class_string.html">String</a> to append </td></tr>
    <tr><td class="paramname">packet_length</td><td>Length of string (including end \0) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac6228fc1aca223d0647f4f3de68f4f86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6228fc1aca223d0647f4f3de68f4f86">&#9670;&nbsp;</a></span>mysql_test_call_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool mysql_test_call_fields </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_item.html">Item</a> &gt; *&#160;</td>
          <td class="paramname"><em>value_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Validate and prepare for execution CALL statement expressions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">tables</td><td>list of tables used in this query </td></tr>
    <tr><td class="paramname">value_list</td><td>list of expressions</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>error, error message is set in THD </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae99abd815630ce1ba6811d4b9fdd65f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae99abd815630ce1ba6811d4b9fdd65f6">&#9670;&nbsp;</a></span>mysql_test_create_table()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool mysql_test_create_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Validate and prepare for execution CREATE <a class="el" href="struct_t_a_b_l_e.html">TABLE</a> statement.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">tables</td><td>list of tables used in this query</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>error, error message is set in THD </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a14754764b032cded70df6231ecfa7831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14754764b032cded70df6231ecfa7831">&#9670;&nbsp;</a></span>mysql_test_create_view()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool mysql_test_create_view </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validate and prepare for execution CREATE VIEW statement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function handles create view commands.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>Operation was a success. </td></tr>
    <tr><td class="paramname">TRUE</td><td>An error occured. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0fa98308d8ca055221f58e45b42b03c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fa98308d8ca055221f58e45b42b03c9">&#9670;&nbsp;</a></span>mysql_test_delete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool mysql_test_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>table_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Validate DELETE statement.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">tables</td><td>list of tables used in this query</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>error, error message is set in THD </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a04987f594841a991909d8783f1f7ab6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04987f594841a991909d8783f1f7ab6a">&#9670;&nbsp;</a></span>mysql_test_do_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool mysql_test_do_fields </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_item.html">Item</a> &gt; *&#160;</td>
          <td class="paramname"><em>values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Validate and prepare for execution DO statement expressions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">tables</td><td>list of tables used in this query </td></tr>
    <tr><td class="paramname">values</td><td>list of expressions</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>error, error message is set in THD </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad3d42acce15ace38814d57440d21aaf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3d42acce15ace38814d57440d21aaf4">&#9670;&nbsp;</a></span>mysql_test_insert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool mysql_test_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>table_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_item.html">Item</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_list.html">List_item</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>values_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_item.html">Item</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>update_fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_list.html">List</a>&lt; <a class="el" href="class_item.html">Item</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>update_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum_duplicates&#160;</td>
          <td class="paramname"><em>duplic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Validate INSERT statement.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">tables</td><td>global/local table list</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>error, error message is set in THD </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6f5f67b1f6b050ad769874219d3ab059"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f5f67b1f6b050ad769874219d3ab059">&#9670;&nbsp;</a></span>mysql_test_insert_select()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool mysql_test_insert_select </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>tables</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Validate and prepare for execution INSERT ... SELECT statement.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">tables</td><td>list of tables used in this query</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>error, error message is set in THD </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adea9838d8a502c8d903e69fc9fc8cff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adea9838d8a502c8d903e69fc9fc8cff6">&#9670;&nbsp;</a></span>mysql_test_multidelete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool mysql_test_multidelete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>tables</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Validate and prepare for execution a multi delete statement.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">tables</td><td>list of tables used in this query</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>error, error message in THD is set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a74490296f18c1a9a1efaa5f30dd7f540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74490296f18c1a9a1efaa5f30dd7f540">&#9670;&nbsp;</a></span>mysql_test_select()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mysql_test_select </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>tables</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Validate SELECT statement.</p>
<p>In case of success, if this query is not EXPLAIN, send column list info back to the client.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">tables</td><td>list of tables used in the query</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">1</td><td>error, error message is set in THD </td></tr>
    <tr><td class="paramname">2</td><td>success, and statement metadata has been sent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ade57ef8271ba2e1b2bd0d85b252424e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade57ef8271ba2e1b2bd0d85b252424e2">&#9670;&nbsp;</a></span>mysql_test_set_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool mysql_test_set_fields </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_list.html">List</a>&lt; <a class="el" href="classset__var__base.html">set_var_base</a> &gt; *&#160;</td>
          <td class="paramname"><em>var_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Validate and prepare for execution SET statement expressions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">tables</td><td>list of tables used in this query </td></tr>
    <tr><td class="paramname">values</td><td>list of expressions</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>error, error message is set in THD </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4a49c9a3e7c6e4df379e3bd05e5e5002"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a49c9a3e7c6e4df379e3bd05e5e5002">&#9670;&nbsp;</a></span>mysql_test_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mysql_test_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>table_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Validate UPDATE statement.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">tables</td><td>list of tables used in this query</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000106">Todo:</a></b></dt><dd><ul>
<li>here we should send types of placeholders to the client.</li>
</ul>
</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">1</td><td>error, error message is set in THD </td></tr>
    <tr><td class="paramname">2</td><td>convert to multi_update </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4109d85bbb494c4c7be6ae0c3fee2209"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4109d85bbb494c4c7be6ae0c3fee2209">&#9670;&nbsp;</a></span>mysqld_stmt_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysqld_stmt_close </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>packet_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete a prepared statement from memory.</p>
<dl class="section note"><dt>Note</dt><dd>we don't send any reply to this command. </dd></dl>

</div>
</div>
<a id="a8a1c9021a769d0a0b46f0cb5b6e2cf0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a1c9021a769d0a0b46f0cb5b6e2cf0f">&#9670;&nbsp;</a></span>mysqld_stmt_execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysqld_stmt_execute </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>packet_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>packet_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>COM_STMT_EXECUTE handler: execute a previously prepared statement.</p>
<p>If there are any parameters, then replace parameter markers with the data supplied from the client, and then execute the statement. This function uses binary protocol to send a possible result set to the client.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>current thread </td></tr>
    <tr><td class="paramname">packet_arg</td><td>parameter types and data, if any </td></tr>
    <tr><td class="paramname">packet_length</td><td>packet length, including the terminator character.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none: in case of success OK packet or a result set is sent to the client, otherwise an error message is set in THD. </dd></dl>

</div>
</div>
<a id="abfd89c8723f8e2681d45e2b3acfe9846"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfd89c8723f8e2681d45e2b3acfe9846">&#9670;&nbsp;</a></span>mysqld_stmt_fetch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysqld_stmt_fetch </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>packet_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>COM_STMT_FETCH handler: fetches requested amount of rows from cursor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread handle </td></tr>
    <tr><td class="paramname">packet</td><td>Packet from client (with stmt_id &amp; num_rows) </td></tr>
    <tr><td class="paramname">packet_length</td><td>Length of packet </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a626dc0ff3952d0fd850852643008fb8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a626dc0ff3952d0fd850852643008fb8a">&#9670;&nbsp;</a></span>mysqld_stmt_prepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysqld_stmt_prepare </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>packet_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>COM_STMT_PREPARE handler.</p>
<p>Given a query string with parameter markers, create a prepared statement from it and send PS info back to the client.</p>
<p>If parameter markers are found in the query, then store the information using <a class="el" href="class_item__param.html">Item_param</a> along with maintaining a list in lex-&gt;param_array, so that a fast and direct retrieval can be made without going through all field items.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packet</td><td>query to be prepared </td></tr>
    <tr><td class="paramname">packet_length</td><td>query string length, including ignored trailing NULL or quote char.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function parses the query and sends the total number of parameters and resultset metadata information back to client (if any), without executing the query i.e. without any log/disk writes. This allows the queries to be re-executed without re-parsing during execute.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>none: in case of success a new statement id and metadata is sent to the client, otherwise an error message is set in THD. </dd></dl>

</div>
</div>
<a id="ad1c2e50d2f19d1ec1ae5dffd7524d6a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1c2e50d2f19d1ec1ae5dffd7524d6a2">&#9670;&nbsp;</a></span>mysqld_stmt_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysqld_stmt_reset </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>packet_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset a prepared statement in case there was a recoverable error.</p>
<p>This function resets statement to the state it was right after prepare. It can be used to:</p><ul>
<li>clear an error happened during mysqld_stmt_send_long_data</li>
<li>cancel long data stream for all placeholders without having to call mysqld_stmt_execute.</li>
<li>close an open cursor Sends 'OK' packet in case of success (statement was reset) or 'ERROR' packet (unrecoverable error/statement not found/etc).</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread handle </td></tr>
    <tr><td class="paramname">packet</td><td>Packet with stmt id </td></tr>
    <tr><td class="paramname">packet_length</td><td>length of data in packet </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac923efcc818c95eeb45ebc9ac085f081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac923efcc818c95eeb45ebc9ac085f081">&#9670;&nbsp;</a></span>reinit_stmt_before_use()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reinit_stmt_before_use </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LEX *&#160;</td>
          <td class="paramname"><em>lex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reinit prepared statement/stored procedure before execution.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000107">Todo:</a></b></dt><dd>When the new table structure is ready, then have a status bit to indicate the table is altered, and re-do the setup_* and open the tables back. </dd></dl>

</div>
</div>
<a id="aa5cb6c4f3b45273a192215534561e0bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5cb6c4f3b45273a192215534561e0bd">&#9670;&nbsp;</a></span>reset_stmt_params()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void reset_stmt_params </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Clears parameters from data left from previous execution or long data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement for which parameters should be reset </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac50098bba18a0292a245b4dde674647d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac50098bba18a0292a245b4dde674647d">&#9670;&nbsp;</a></span>select_like_stmt_test()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool select_like_stmt_test </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>)&#160;</td>
          <td class="paramname"><em>specific_prepare</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>setup_tables_done_option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="struct_check.html">Check</a> internal SELECT of the prepared command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">specific_prepare</td><td>function of command specific prepare </td></tr>
    <tr><td class="paramname">setup_tables_done_option</td><td>options to be passed to LEX::unit.prepare()</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function won't directly open tables used in select. They should be opened either by calling function (and in this case you probably should use <a class="el" href="sql__prepare_8cc.html#a096dda14d717535aae4a7f9dbc96a2ed">select_like_stmt_test_with_open()</a>) or by "specific_prepare" call (like this happens in case of multi-update).</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>error, error message is set in THD </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a096dda14d717535aae4a7f9dbc96a2ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a096dda14d717535aae4a7f9dbc96a2ed">&#9670;&nbsp;</a></span>select_like_stmt_test_with_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool select_like_stmt_test_with_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e___l_i_s_t.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>)&#160;</td>
          <td class="paramname"><em>specific_prepare</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>setup_tables_done_option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="struct_check.html">Check</a> internal SELECT of the prepared command (with opening of used tables).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">tables</td><td>list of tables to be opened before calling specific_prepare function </td></tr>
    <tr><td class="paramname">specific_prepare</td><td>function of command specific prepare </td></tr>
    <tr><td class="paramname">setup_tables_done_option</td><td>options to be passed to LEX::unit.prepare()</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4c6425fa85557ca8f86b27049e5dfba4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c6425fa85557ca8f86b27049e5dfba4">&#9670;&nbsp;</a></span>send_prep_stmt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool send_prep_stmt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_prepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>columns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Send prepared statement id and metadata to the client after prepare.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000104">Todo:</a></b></dt><dd>Fix this nasty upcast from List&lt;Item_param&gt; to <a class="el" href="class_list.html">List&lt;Item&gt;</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0 in case of success, 1 otherwise </dd></dl>

</div>
</div>
<a id="abb0c179497aff142a1ca70c251fb0d60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb0c179497aff142a1ca70c251fb0d60">&#9670;&nbsp;</a></span>set_param_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_param_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_item__param.html">Item_param</a> *&#160;</td>
          <td class="paramname"><em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar **&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>EMBEDDED_LIBRARY </p>

</div>
</div>
<a id="aaec3d94c06c8c8f5009bd6dd1fcc5f7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaec3d94c06c8c8f5009bd6dd1fcc5f7b">&#9670;&nbsp;</a></span>set_param_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_param_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_item__param.html">Item_param</a> *&#160;</td>
          <td class="paramname"><em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar **&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000105">Todo:</a></b></dt><dd>Add warning 'Data truncated' here </dd></dl>

</div>
</div>
<a id="ab746819c424f6e8e53de9b44107b3748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab746819c424f6e8e53de9b44107b3748">&#9670;&nbsp;</a></span>set_param_tiny()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_param_tiny </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_item__param.html">Item_param</a> *&#160;</td>
          <td class="paramname"><em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar **&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>EMBEDDED_LIBRARY Data conversion routines.</p>
<p>All these functions read the data from pos, convert it to requested type and assign to param; pos is advanced to predefined length.</p>
<p>Make a note that the NULL handling is examined at first execution (i.e. when input types altered) and for all subsequent executions we don't read any values for this.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param</td><td>parameter item </td></tr>
    <tr><td class="paramname">pos</td><td>input data buffer </td></tr>
    <tr><td class="paramname">len</td><td>length of data in the buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acad4ba7c4a218efa6ef946dfe636a161"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acad4ba7c4a218efa6ef946dfe636a161">&#9670;&nbsp;</a></span>swap_parameter_array()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void swap_parameter_array </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_item__param.html">Item_param</a> **&#160;</td>
          <td class="paramname"><em>param_array_dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_item__param.html">Item_param</a> **&#160;</td>
          <td class="paramname"><em>param_array_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>param_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>EMBEDDED_LIBRARY Setup data conversion routines using an array of parameter markers from the original prepared statement. Swap the parameter data of the original prepared statement to the new one.</p>
<p>Used only when we re-prepare a prepared statement. There are two reasons for this function to exist:</p>
<p>1) In the binary client/server protocol, parameter metadata is sent only at first execute. Consequently, if we need to reprepare a prepared statement at a subsequent execution, we may not have metadata information in the packet. In that case we use the parameter array of the original prepared statement to setup parameter types of the new prepared statement.</p>
<p>2) In the binary client/server protocol, we may supply long data in pieces. When the last piece is supplied, we assemble the pieces and convert them from client character set to the connection character set. After that the parameter value is only available inside the parameter, the original pieces are lost, and thus we can only assign the corresponding parameter of the reprepared statement from the original value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">param_array_dst</td><td>parameter markers of the new statement </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">param_array_src</td><td>parameter markers of the original statement </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">param_count</td><td>total number of parameters. Is the same in src and dst arrays, since the statement query is the same</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>this function never fails </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
