<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: Rpl_info_table_access Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_rpl__info__table__access-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Rpl_info_table_access Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad06bfa4747b5ea5a50e785ce75cd5fe3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rpl__info__table__access.html#ad06bfa4747b5ea5a50e785ce75cd5fe3">open_table</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>, const <a class="el" href="structst__mysql__lex__string.html">LEX_STRING</a> dbstr, const <a class="el" href="structst__mysql__lex__string.html">LEX_STRING</a> tbstr, uint max_num_field, enum thr_lock_type lock_type, <a class="el" href="struct_t_a_b_l_e.html">TABLE</a> **<a class="el" href="row0upd_8cc.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a>, Open_tables_backup *backup)</td></tr>
<tr class="separator:ad06bfa4747b5ea5a50e785ce75cd5fe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a684e7c8604178e5a4b285fa1e37b7fdf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rpl__info__table__access.html#a684e7c8604178e5a4b285fa1e37b7fdf">close_table</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>, <a class="el" href="struct_t_a_b_l_e.html">TABLE</a> *<a class="el" href="row0upd_8cc.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a>, Open_tables_backup *backup, bool <a class="el" href="row0merge_8cc.html#a35322fe0b818842195cfd235eec09293">error</a>)</td></tr>
<tr class="separator:a684e7c8604178e5a4b285fa1e37b7fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e29192cc9274209edbf201622fdf161"><td class="memItemLeft" align="right" valign="top">enum enum_return_id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rpl__info__table__access.html#a5e29192cc9274209edbf201622fdf161">find_info</a> (<a class="el" href="class_rpl__info__values.html">Rpl_info_values</a> *field_values, <a class="el" href="struct_t_a_b_l_e.html">TABLE</a> *<a class="el" href="row0upd_8cc.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a>)</td></tr>
<tr class="separator:a5e29192cc9274209edbf201622fdf161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac36dfa252b97f8afcc2822739ac1996a"><td class="memItemLeft" align="right" valign="top">enum enum_return_id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rpl__info__table__access.html#ac36dfa252b97f8afcc2822739ac1996a">scan_info</a> (<a class="el" href="struct_t_a_b_l_e.html">TABLE</a> *<a class="el" href="row0upd_8cc.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a>, uint instance)</td></tr>
<tr class="separator:ac36dfa252b97f8afcc2822739ac1996a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642d37a8573636286459b57561e58382"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rpl__info__table__access.html#a642d37a8573636286459b57561e58382">count_info</a> (<a class="el" href="struct_t_a_b_l_e.html">TABLE</a> *<a class="el" href="row0upd_8cc.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a>, uint *counter)</td></tr>
<tr class="separator:a642d37a8573636286459b57561e58382"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37e78e5841dad69026ce825f9d4bcb3a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rpl__info__table__access.html#a37e78e5841dad69026ce825f9d4bcb3a">load_info_values</a> (uint max_num_field, <a class="el" href="class_field.html">Field</a> **<a class="el" href="rem0rec_8cc.html#a18b60f4abb9035f6a2d6b87f0ff336b9">fields</a>, <a class="el" href="class_rpl__info__values.html">Rpl_info_values</a> *field_values)</td></tr>
<tr class="separator:a37e78e5841dad69026ce825f9d4bcb3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e9e44fcec5cbd4eb2acc5d5ae829cee"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rpl__info__table__access.html#a7e9e44fcec5cbd4eb2acc5d5ae829cee">store_info_values</a> (uint max_num_field, <a class="el" href="class_field.html">Field</a> **<a class="el" href="rem0rec_8cc.html#a18b60f4abb9035f6a2d6b87f0ff336b9">fields</a>, <a class="el" href="class_rpl__info__values.html">Rpl_info_values</a> *field_values)</td></tr>
<tr class="separator:a7e9e44fcec5cbd4eb2acc5d5ae829cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ad9070e4ec45e56b0ab4750d1239d32"><td class="memItemLeft" align="right" valign="top">THD *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rpl__info__table__access.html#a0ad9070e4ec45e56b0ab4750d1239d32">create_thd</a> ()</td></tr>
<tr class="separator:a0ad9070e4ec45e56b0ab4750d1239d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b68e3e2a08166d7a0911531723c885d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rpl__info__table__access.html#a4b68e3e2a08166d7a0911531723c885d">drop_thd</a> (THD *<a class="el" href="row0quiesce_8cc.html#a75b6f5ba5a17ae9fb524f56a5eed51cb">thd</a>)</td></tr>
<tr class="separator:a4b68e3e2a08166d7a0911531723c885d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa41fdbf5c0934a0544285fbee72ff660"><td class="memItemLeft" align="right" valign="top"><a id="aa41fdbf5c0934a0544285fbee72ff660"></a>
<a class="el" href="class_rpl__info__table__access.html">Rpl_info_table_access</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="class_rpl__info__table__access.html">Rpl_info_table_access</a> &amp;info)</td></tr>
<tr class="separator:aa41fdbf5c0934a0544285fbee72ff660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ab301c416244a03b3d09d73cfcdb98d"><td class="memItemLeft" align="right" valign="top"><a id="a3ab301c416244a03b3d09d73cfcdb98d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Rpl_info_table_access</b> (const <a class="el" href="class_rpl__info__table__access.html">Rpl_info_table_access</a> &amp;info)</td></tr>
<tr class="separator:a3ab301c416244a03b3d09d73cfcdb98d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a123cd1027e49f1db1a244adf3193f490"><td class="memItemLeft" align="right" valign="top"><a id="a123cd1027e49f1db1a244adf3193f490"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>thd_created</b></td></tr>
<tr class="separator:a123cd1027e49f1db1a244adf3193f490"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a684e7c8604178e5a4b285fa1e37b7fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a684e7c8604178e5a4b285fa1e37b7fdf">&#9670;&nbsp;</a></span>close_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Rpl_info_table_access::close_table </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Open_tables_backup *&#160;</td>
          <td class="paramname"><em>backup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Commits the changes, unlocks the table and closes it. This method needs to be called even if the open_table fails, in order to ensure the lock info is properly restored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Thread requesting to close the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>Table to be closed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">backup</td><td>Restore the lock info from here </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">error</td><td>If there was an error while updating the table</td></tr>
  </table>
  </dd>
</dl>
<p>If there is an error, rolls back the current statement. Otherwise, commits it. However, if a new thread was created and there is an error, the transaction must be rolled back. Otherwise, it must be committed. In this case, the changes were not done on behalf of any user transaction and if not finished, there would be pending changes.</p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>No error </td></tr>
    <tr><td class="paramname">TRUE</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a642d37a8573636286459b57561e58382"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a642d37a8573636286459b57561e58382">&#9670;&nbsp;</a></span>count_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Rpl_info_table_access::count_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint *&#160;</td>
          <td class="paramname"><em>counter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the number of entries in table.</p>
<p>The code built on top of this function needs to ensure there is no concurrent threads trying to update the table. So if an error different from HA_ERR_END_OF_FILE is returned, we abort with an error because this implies that someone has manualy and concurrently changed something.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>Table </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">counter</td><td>Registers the number of entries.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>No error </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0ad9070e4ec45e56b0ab4750d1239d32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ad9070e4ec45e56b0ab4750d1239d32">&#9670;&nbsp;</a></span>create_thd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">THD * Rpl_info_table_access::create_thd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new thread if necessary. In the bootstrap process or in the mysqld startup, a thread is created in order to be able to access a table. Otherwise, the current thread is used.</p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">THD*</td><td>Pointer to thread structure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4b68e3e2a08166d7a0911531723c885d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b68e3e2a08166d7a0911531723c885d">&#9670;&nbsp;</a></span>drop_thd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Rpl_info_table_access::drop_thd </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroys the created thread if necessary and restores the system_thread information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Thread requesting to be destroyed</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>No error </td></tr>
    <tr><td class="paramname">TRUE</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5e29192cc9274209edbf201622fdf161"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e29192cc9274209edbf201622fdf161">&#9670;&nbsp;</a></span>find_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum enum_return_id Rpl_info_table_access::find_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_rpl__info__values.html">Rpl_info_values</a> *&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Positions the internal pointer of <code>table</code> according to the primary key.</p>
<p>If the search succeeds, the table cursor points to the found row.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">field_values</td><td>The sequence of values </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">table</td><td>Table</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FOUND</td><td>The row was found. </td></tr>
    <tr><td class="paramname">NOT_FOUND</td><td>The row was not found. </td></tr>
    <tr><td class="paramname">ERROR</td><td>There was a failure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a37e78e5841dad69026ce825f9d4bcb3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37e78e5841dad69026ce825f9d4bcb3a">&#9670;&nbsp;</a></span>load_info_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Rpl_info_table_access::load_info_values </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>max_num_field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_field.html">Field</a> **&#160;</td>
          <td class="paramname"><em>fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_rpl__info__values.html">Rpl_info_values</a> *&#160;</td>
          <td class="paramname"><em>field_values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads information from a sequence of fields into a set of LEX_STRING structures, where the sequence of values is specified through the object <a class="el" href="class_rpl__info__values.html">Rpl_info_values</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">max_num_field</td><td>Maximum number of fields </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fields</td><td>The sequence of fields </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">field_values</td><td>The sequence of values</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>No error </td></tr>
    <tr><td class="paramname">TRUE</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad06bfa4747b5ea5a50e785ce75cd5fe3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad06bfa4747b5ea5a50e785ce75cd5fe3">&#9670;&nbsp;</a></span>open_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Rpl_info_table_access::open_table </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structst__mysql__lex__string.html">LEX_STRING</a>&#160;</td>
          <td class="paramname"><em>dbstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structst__mysql__lex__string.html">LEX_STRING</a>&#160;</td>
          <td class="paramname"><em>tbstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>max_num_field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum thr_lock_type&#160;</td>
          <td class="paramname"><em>lock_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e.html">TABLE</a> **&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Open_tables_backup *&#160;</td>
          <td class="paramname"><em>backup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opens and locks a table.</p>
<p>It's assumed that the caller knows what they are doing:</p><ul>
<li>whether it was necessary to reset-and-backup the open tables state</li>
<li>whether the requested lock does not lead to a deadlock</li>
<li>whether this open mode would work under LOCK TABLES, or inside a stored function or trigger.</li>
</ul>
<p>Note that if the table can't be locked successfully this operation will close it. Therefore it provides guarantee that it either opens and locks table or fails without leaving any tables open.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Thread requesting to open the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dbstr</td><td>Database where the table resides </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tbstr</td><td>Table to be openned </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_num_field</td><td>Maximum number of fields </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lock_type</td><td>How to lock the table </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">table</td><td>We will store the open table here </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">backup</td><td>Save the lock info. here</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TRUE</td><td>open and lock failed - an error message is pushed into the stack </td></tr>
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac36dfa252b97f8afcc2822739ac1996a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac36dfa252b97f8afcc2822739ac1996a">&#9670;&nbsp;</a></span>scan_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum enum_return_id Rpl_info_table_access::scan_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_a_b_l_e.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>instance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Positions the internal pointer of <code>table</code> to the n-instance row.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>Reference to a table object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>n-instance row.</td></tr>
  </table>
  </dd>
</dl>
<p>The code built on top of this function needs to ensure there is no concurrent threads trying to update the table. So if an error different from HA_ERR_END_OF_FILE is returned, we abort with an error because this implies that someone has manualy and concurrently changed something.</p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FOUND</td><td>The row was found. </td></tr>
    <tr><td class="paramname">NOT_FOUND</td><td>The row was not found. </td></tr>
    <tr><td class="paramname">ERROR</td><td>There was a failure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7e9e44fcec5cbd4eb2acc5d5ae829cee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e9e44fcec5cbd4eb2acc5d5ae829cee">&#9670;&nbsp;</a></span>store_info_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Rpl_info_table_access::store_info_values </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>max_num_field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_field.html">Field</a> **&#160;</td>
          <td class="paramname"><em>fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_rpl__info__values.html">Rpl_info_values</a> *&#160;</td>
          <td class="paramname"><em>field_values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stores information from a sequence of fields into a set of LEX_STRING structures, where the sequence of values is specified through the object <a class="el" href="class_rpl__info__values.html">Rpl_info_values</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">max_num_field</td><td>Maximum number of fields </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fields</td><td>The sequence of fields </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">field_values</td><td>The sequence of values</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>No error </td></tr>
    <tr><td class="paramname">TRUE</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="rpl__info__table__access_8h_source.html">rpl_info_table_access.h</a></li>
<li>sql/rpl_info_table_access.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
