<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: extension_ascii_protocol_descriptor Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structextension__ascii__protocol__descriptor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">extension_ascii_protocol_descriptor Struct Reference<div class="ingroups"><a class="el" href="group___extension.html">Generic Extensions API</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="extension_8h_source.html">extension.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a265c82fab0d83102f6ad1f1755182305"><td class="memItemLeft" align="right" valign="top">const char *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structextension__ascii__protocol__descriptor.html#a265c82fab0d83102f6ad1f1755182305">get_name</a> )(const void *cmd_cookie)</td></tr>
<tr class="separator:a265c82fab0d83102f6ad1f1755182305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51d8bf0ab9ce9c8a806cb21999d679c4"><td class="memItemLeft" align="right" valign="top">bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structextension__ascii__protocol__descriptor.html#a51d8bf0ab9ce9c8a806cb21999d679c4">accept</a> )(const void *cmd_cookie, void *<a class="el" href="structextension__ascii__protocol__descriptor.html#a1e77700fa72ed76157330c87d2b00669">cookie</a>, int argc, <a class="el" href="structtoken__t.html">token_t</a> *argv, size_t *ndata, char **ptr)</td></tr>
<tr class="separator:a51d8bf0ab9ce9c8a806cb21999d679c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0b43160be69b91fba160923a9db39d7"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structextension__ascii__protocol__descriptor.html#aa0b43160be69b91fba160923a9db39d7">execute</a> )(const void *cmd_cookie, const void *<a class="el" href="structextension__ascii__protocol__descriptor.html#a1e77700fa72ed76157330c87d2b00669">cookie</a>, int argc, <a class="el" href="structtoken__t.html">token_t</a> *argv, ENGINE_ERROR_CODE(*response_handler)(const void *<a class="el" href="structextension__ascii__protocol__descriptor.html#a1e77700fa72ed76157330c87d2b00669">cookie</a>, int nbytes, const char *dta))</td></tr>
<tr class="separator:aa0b43160be69b91fba160923a9db39d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a208f3ed83cd161107212239553c601af"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structextension__ascii__protocol__descriptor.html#a208f3ed83cd161107212239553c601af">abort</a> )(const void *cmd_cookie, const void *<a class="el" href="structextension__ascii__protocol__descriptor.html#a1e77700fa72ed76157330c87d2b00669">cookie</a>)</td></tr>
<tr class="separator:a208f3ed83cd161107212239553c601af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e77700fa72ed76157330c87d2b00669"><td class="memItemLeft" align="right" valign="top">const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structextension__ascii__protocol__descriptor.html#a1e77700fa72ed76157330c87d2b00669">cookie</a></td></tr>
<tr class="separator:a1e77700fa72ed76157330c87d2b00669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed083e10556e2a39d29aaeb6f94b311f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structextension__ascii__protocol__descriptor.html">extension_ascii_protocol_descriptor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structextension__ascii__protocol__descriptor.html#aed083e10556e2a39d29aaeb6f94b311f">next</a></td></tr>
<tr class="separator:aed083e10556e2a39d29aaeb6f94b311f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ASCII protocol extensions must provide the following descriptor to extend the capabilities of the ascii protocol. The memcached core will probe each command in the order they are registered, so you should register the most likely command to be used first (or you could register only one descriptor and do a better dispatch routine inside your own implementation of accept / execute). </p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a208f3ed83cd161107212239553c601af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a208f3ed83cd161107212239553c601af">&#9670;&nbsp;</a></span>abort</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* extension_ascii_protocol_descriptor::abort) (const void *cmd_cookie, const void *<a class="el" href="structextension__ascii__protocol__descriptor.html#a1e77700fa72ed76157330c87d2b00669">cookie</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>abort the command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd_cookie</td><td>cookie registered with the command </td></tr>
    <tr><td class="paramname">cookie</td><td>identifying the client connection </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a51d8bf0ab9ce9c8a806cb21999d679c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51d8bf0ab9ce9c8a806cb21999d679c4">&#9670;&nbsp;</a></span>accept</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool(* extension_ascii_protocol_descriptor::accept) (const void *cmd_cookie, void *<a class="el" href="structextension__ascii__protocol__descriptor.html#a1e77700fa72ed76157330c87d2b00669">cookie</a>, int argc, <a class="el" href="structtoken__t.html">token_t</a> *argv, size_t *ndata, char **ptr)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called by the server to determine if the command in argc, argv should be process by this handler.</p>
<p>If the command accepts out-of-band data (like add / append / prepend / replace / set), the command must set the datapointer and ndata to the number of bytes it want to read (remember to account for the trailing "\r\n" ;-))</p>
<p>If you need extra data, you should copy all of the argc/argv info you may need to execute the command, because those parameters will be 0 and NULL when execute is invoked...</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd_cookie</td><td>cookie registered with the command </td></tr>
    <tr><td class="paramname">cookie</td><td>identifying the client connection </td></tr>
    <tr><td class="paramname">argc</td><td>the number of arguments </td></tr>
    <tr><td class="paramname">argv</td><td>the argument vector </td></tr>
    <tr><td class="paramname">ndata</td><td>the number of bytes in out-of-band data (OUT) </td></tr>
    <tr><td class="paramname">ptr</td><td>where the core shall write the data (OUT) </td></tr>
    <tr><td class="paramname">noreply</td><td>is this a noreply command or not... </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the command should be handled by this command handler </dd></dl>

</div>
</div>
<a id="a1e77700fa72ed76157330c87d2b00669"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e77700fa72ed76157330c87d2b00669">&#9670;&nbsp;</a></span>cookie</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const void* extension_ascii_protocol_descriptor::cookie</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>cookie for the command. This is the cookie passed to accept and execute, so that you can register the same functions for multiple commands (but tell them apart during invokations). </p>

</div>
</div>
<a id="aa0b43160be69b91fba160923a9db39d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0b43160be69b91fba160923a9db39d7">&#9670;&nbsp;</a></span>execute</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE(* extension_ascii_protocol_descriptor::execute) (const void *cmd_cookie, const void *<a class="el" href="structextension__ascii__protocol__descriptor.html#a1e77700fa72ed76157330c87d2b00669">cookie</a>, int argc, <a class="el" href="structtoken__t.html">token_t</a> *argv, ENGINE_ERROR_CODE(*response_handler)(const void *<a class="el" href="structextension__ascii__protocol__descriptor.html#a1e77700fa72ed76157330c87d2b00669">cookie</a>, int nbytes, const char *dta))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>execute the command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd_cookie</td><td>cookie registered with the command </td></tr>
    <tr><td class="paramname">cookie</td><td>identifying the client connection </td></tr>
    <tr><td class="paramname">argc</td><td>the number of arguments </td></tr>
    <tr><td class="paramname">argv</td><td>the argument vector </td></tr>
    <tr><td class="paramname">response_handler</td><td>callback to add data to the return buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code for the operation </dd></dl>

</div>
</div>
<a id="a265c82fab0d83102f6ad1f1755182305"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a265c82fab0d83102f6ad1f1755182305">&#9670;&nbsp;</a></span>get_name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char*(* extension_ascii_protocol_descriptor::get_name) (const void *cmd_cookie)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the name of the descriptor. The memory area returned by this function has to be valid until the descriptor is unregistered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd_cookie</td><td>cookie registered with the command </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aed083e10556e2a39d29aaeb6f94b311f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed083e10556e2a39d29aaeb6f94b311f">&#9670;&nbsp;</a></span>next</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structextension__ascii__protocol__descriptor.html">extension_ascii_protocol_descriptor</a>* extension_ascii_protocol_descriptor::next</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deamon descriptors are stored in a linked list in the memcached core by using this pointer. Please do not modify this pointer by yourself until you have unregistered the descriptor. The <b>only</b> time it is safe for an extension to walk this list is during initialization of the modules. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>plugin/innodb_memcached/daemon_memcached/include/memcached/<a class="el" href="extension_8h_source.html">extension.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
