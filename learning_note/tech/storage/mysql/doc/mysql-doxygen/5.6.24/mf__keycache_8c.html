<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: mysys/mf_keycache.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_7507adac5764e4f818c81969b3802964.html">mysys</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mf_keycache.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;mysys_priv.h&quot;</code><br />
<code>#include &quot;mysys_err.h&quot;</code><br />
<code>#include &lt;keycache.h&gt;</code><br />
<code>#include &quot;my_static.h&quot;</code><br />
<code>#include &lt;m_string.h&gt;</code><br />
<code>#include &lt;my_bit.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &quot;probes_mysql.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structst__keycache__page.html">st_keycache_page</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structst__hash__link.html">st_hash_link</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structst__block__link.html">st_block_link</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a201eb06374e27d8a1f76f1af79813571"><td class="memItemLeft" align="right" valign="top"><a id="a201eb06374e27d8a1f76f1af79813571"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STRUCT_PTR</b>(TYPE,  MEMBER,  <a class="el" href="row0merge_8cc.html#aaba8987b345486af51614561bddd051b">a</a>)&#160;&#160;&#160;(TYPE *) ((char *) (<a class="el" href="row0merge_8cc.html#aaba8987b345486af51614561bddd051b">a</a>) - offsetof(TYPE, MEMBER))</td></tr>
<tr class="separator:a201eb06374e27d8a1f76f1af79813571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e18faaba6916c5591566101544fda8d"><td class="memItemLeft" align="right" valign="top"><a id="a5e18faaba6916c5591566101544fda8d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>COND_FOR_REQUESTED</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a5e18faaba6916c5591566101544fda8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e3c4109fa9594257d855d6bcaeb896c"><td class="memItemLeft" align="right" valign="top"><a id="a7e3c4109fa9594257d855d6bcaeb896c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>COND_FOR_SAVED</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a7e3c4109fa9594257d855d6bcaeb896c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0a3c2d0bea0c5e7b1807de8b9a786fe"><td class="memItemLeft" align="right" valign="top"><a id="af0a3c2d0bea0c5e7b1807de8b9a786fe"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>COND_FOR_READERS</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:af0a3c2d0bea0c5e7b1807de8b9a786fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf93030008a45e54fad4650439a746a1"><td class="memItemLeft" align="right" valign="top"><a id="acf93030008a45e54fad4650439a746a1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_ERROR</b>&#160;&#160;&#160;1 /* an <a class="el" href="row0merge_8cc.html#a35322fe0b818842195cfd235eec09293">error</a> occured when performing <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a> <a class="el" href="dict0mem_8cc.html#ac23062089f3a5a2693cbb4ce7a75f1e5">i</a>/o */</td></tr>
<tr class="separator:acf93030008a45e54fad4650439a746a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba302488a09b899c3966444d921c3c66"><td class="memItemLeft" align="right" valign="top"><a id="aba302488a09b899c3966444d921c3c66"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_READ</b>&#160;&#160;&#160;2 /* <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a> <a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a> is in the <a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a> buffer         */</td></tr>
<tr class="separator:aba302488a09b899c3966444d921c3c66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d33bb44cb3ad1c04d8a3fac879e4ec2"><td class="memItemLeft" align="right" valign="top"><a id="a8d33bb44cb3ad1c04d8a3fac879e4ec2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_IN_SWITCH</b>&#160;&#160;&#160;4 /* <a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a> is preparing <a class="el" href="ha__innodb_8cc.html#a255ec67df7b761df35e13aa7183c4bd2">to</a> read new <a class="el" href="fsp0fsp_8cc.html#a69e3109c6b8c8d21dfc851e276de8389">page</a>       */</td></tr>
<tr class="separator:a8d33bb44cb3ad1c04d8a3fac879e4ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99fba7d185b271ecf5ec5ddead8a3c98"><td class="memItemLeft" align="right" valign="top"><a id="a99fba7d185b271ecf5ec5ddead8a3c98"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_REASSIGNED</b>&#160;&#160;&#160;8 /* blk does not accept requests for old <a class="el" href="fsp0fsp_8cc.html#a69e3109c6b8c8d21dfc851e276de8389">page</a> */</td></tr>
<tr class="separator:a99fba7d185b271ecf5ec5ddead8a3c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a292380370cb05785c4627636ea8e68e9"><td class="memItemLeft" align="right" valign="top"><a id="a292380370cb05785c4627636ea8e68e9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_IN_FLUSH</b>&#160;&#160;&#160;16 /* <a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a> is selected for <a class="el" href="buf0lru_8cc.html#a4558737b6ae02896c172abc60f58745e">flush</a>               */</td></tr>
<tr class="separator:a292380370cb05785c4627636ea8e68e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a66086923e04e603ccf3acba85513d1"><td class="memItemLeft" align="right" valign="top"><a id="a1a66086923e04e603ccf3acba85513d1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_CHANGED</b>&#160;&#160;&#160;32 /* <a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a> buffer contains <a class="el" href="row0merge_8cc.html#aaba8987b345486af51614561bddd051b">a</a> dirty <a class="el" href="fsp0fsp_8cc.html#a69e3109c6b8c8d21dfc851e276de8389">page</a>        */</td></tr>
<tr class="separator:a1a66086923e04e603ccf3acba85513d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ab99a418a31634c3db3e0276cb0cd4b"><td class="memItemLeft" align="right" valign="top"><a id="a9ab99a418a31634c3db3e0276cb0cd4b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_IN_USE</b>&#160;&#160;&#160;64 /* <a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a> is not free                         */</td></tr>
<tr class="separator:a9ab99a418a31634c3db3e0276cb0cd4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadac5591a24970ff1439836bb50c193a"><td class="memItemLeft" align="right" valign="top"><a id="aadac5591a24970ff1439836bb50c193a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_IN_EVICTION</b>&#160;&#160;&#160;128 /* <a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a> is selected for eviction            */</td></tr>
<tr class="separator:aadac5591a24970ff1439836bb50c193a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd56e6b19c20a65a346c334bcb03f380"><td class="memItemLeft" align="right" valign="top"><a id="acd56e6b19c20a65a346c334bcb03f380"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_IN_FLUSHWRITE</b>&#160;&#160;&#160;256 /* <a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a> is in write <a class="el" href="ha__innodb_8cc.html#a255ec67df7b761df35e13aa7183c4bd2">to</a> <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a>                 */</td></tr>
<tr class="separator:acd56e6b19c20a65a346c334bcb03f380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5df7ef66275032e4044ced15b374d69"><td class="memItemLeft" align="right" valign="top"><a id="ab5df7ef66275032e4044ced15b374d69"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_FOR_UPDATE</b>&#160;&#160;&#160;512 /* <a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a> is selected for buffer modification */</td></tr>
<tr class="separator:ab5df7ef66275032e4044ced15b374d69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23218b51de2f748d10cd8a6db98d8eb5"><td class="memItemLeft" align="right" valign="top"><a id="a23218b51de2f748d10cd8a6db98d8eb5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PAGE_READ</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a23218b51de2f748d10cd8a6db98d8eb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e79984cb49ca8181cd2b7f508974398"><td class="memItemLeft" align="right" valign="top"><a id="a5e79984cb49ca8181cd2b7f508974398"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PAGE_TO_BE_READ</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a5e79984cb49ca8181cd2b7f508974398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a863339f26989157ca7f3bb1728b02270"><td class="memItemLeft" align="right" valign="top"><a id="a863339f26989157ca7f3bb1728b02270"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PAGE_WAIT_TO_BE_READ</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a863339f26989157ca7f3bb1728b02270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdbfdb5d1220da05d243bfc2c17634d4"><td class="memItemLeft" align="right" valign="top"><a id="afdbfdb5d1220da05d243bfc2c17634d4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FLUSH_CACHE</b>&#160;&#160;&#160;2000            /* sort this many blocks at once */</td></tr>
<tr class="separator:afdbfdb5d1220da05d243bfc2c17634d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afced45e5c89364d6703389c01e68f55f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>KEYCACHE_HASH</b>(f,  pos)</td></tr>
<tr class="separator:afced45e5c89364d6703389c01e68f55f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2fe42ec9fb99b1865627988e1f5ee84"><td class="memItemLeft" align="right" valign="top"><a id="ae2fe42ec9fb99b1865627988e1f5ee84"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FILE_HASH</b>(f)&#160;&#160;&#160;((uint) (f) &amp; (CHANGED_BLOCKS_HASH-1))</td></tr>
<tr class="separator:ae2fe42ec9fb99b1865627988e1f5ee84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8279bb6de4d3e84aa0e696d8714caa46"><td class="memItemLeft" align="right" valign="top"><a id="a8279bb6de4d3e84aa0e696d8714caa46"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEFAULT_KEYCACHE_DEBUG_LOG</b>&#160;&#160;&#160;&quot;keycache_debug.log&quot;</td></tr>
<tr class="separator:a8279bb6de4d3e84aa0e696d8714caa46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d4c7082211af7b0a0d2e1594785aa3e"><td class="memItemLeft" align="right" valign="top"><a id="a1d4c7082211af7b0a0d2e1594785aa3e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KEYCACHE_DEBUG_OPEN</b></td></tr>
<tr class="separator:a1d4c7082211af7b0a0d2e1594785aa3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee571cefdea70da535b27a8d27f4885"><td class="memItemLeft" align="right" valign="top"><a id="a8ee571cefdea70da535b27a8d27f4885"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KEYCACHE_DEBUG_CLOSE</b></td></tr>
<tr class="separator:a8ee571cefdea70da535b27a8d27f4885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa06cb301b5a09875ec53ec4ec60b2902"><td class="memItemLeft" align="right" valign="top"><a id="aa06cb301b5a09875ec53ec4ec60b2902"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KEYCACHE_DBUG_PRINT</b>(l,  m)&#160;&#160;&#160;DBUG_PRINT(l, m)</td></tr>
<tr class="separator:aa06cb301b5a09875ec53ec4ec60b2902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6fe690814baaa77dfb7aeeb38db1514"><td class="memItemLeft" align="right" valign="top"><a id="af6fe690814baaa77dfb7aeeb38db1514"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KEYCACHE_DBUG_ASSERT</b>(<a class="el" href="row0merge_8cc.html#aaba8987b345486af51614561bddd051b">a</a>)&#160;&#160;&#160;DBUG_ASSERT(<a class="el" href="row0merge_8cc.html#aaba8987b345486af51614561bddd051b">a</a>)</td></tr>
<tr class="separator:af6fe690814baaa77dfb7aeeb38db1514"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a36947154eb0a2556081ccea28df060"><td class="memItemLeft" align="right" valign="top"><a id="a4a36947154eb0a2556081ccea28df060"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KEYCACHE_THREAD_TRACE</b>(l)&#160;&#160;&#160;KEYCACHE_DBUG_PRINT(l,(&quot;|thread %ld&quot;,keycache_thread_id))</td></tr>
<tr class="separator:a4a36947154eb0a2556081ccea28df060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b494c4988b087161e4073fbd4b595aa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>KEYCACHE_THREAD_TRACE_BEGIN</b>(l)</td></tr>
<tr class="separator:a9b494c4988b087161e4073fbd4b595aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5be6b9a8727840f3707d846228fbe51f"><td class="memItemLeft" align="right" valign="top"><a id="a5be6b9a8727840f3707d846228fbe51f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KEYCACHE_THREAD_TRACE_END</b>(l)&#160;&#160;&#160;KEYCACHE_DBUG_PRINT(l,(&quot;]thread %ld&quot;,keycache_thread_id))</td></tr>
<tr class="separator:a5be6b9a8727840f3707d846228fbe51f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d4f5389d94d0c723e58f2fd18b471f4"><td class="memItemLeft" align="right" valign="top"><a id="a1d4f5389d94d0c723e58f2fd18b471f4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_NUMBER</b>(<a class="el" href="row0merge_8cc.html#a40730b4776204efc5a07b947ce63f0b4">b</a>)&#160;&#160;&#160;((uint) (((char*)(<a class="el" href="row0merge_8cc.html#a40730b4776204efc5a07b947ce63f0b4">b</a>)-(char *) keycache-&gt;block_root)/sizeof(<a class="el" href="structst__block__link.html">BLOCK_LINK</a>)))</td></tr>
<tr class="separator:a1d4f5389d94d0c723e58f2fd18b471f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ac6a20acf7c4e32dd0daa72a96d4381"><td class="memItemLeft" align="right" valign="top"><a id="a9ac6a20acf7c4e32dd0daa72a96d4381"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HASH_LINK_NUMBER</b>(h)&#160;&#160;&#160;((uint) (((char*)(h)-(char *) keycache-&gt;hash_link_root)/sizeof(<a class="el" href="structst__hash__link.html">HASH_LINK</a>)))</td></tr>
<tr class="separator:a9ac6a20acf7c4e32dd0daa72a96d4381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a073eebc4dcb3344c70fcc1d4b77da470"><td class="memItemLeft" align="right" valign="top"><a id="a073eebc4dcb3344c70fcc1d4b77da470"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>keycache_pthread_cond_wait</b>(C,  M)&#160;&#160;&#160;<a class="el" href="group___thread__instrumentation.html#ga0094737fa36967b77033c500fd25d0ff">mysql_cond_wait</a>(C, M)</td></tr>
<tr class="separator:a073eebc4dcb3344c70fcc1d4b77da470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ba239caffe5972f2aaffa36f1bf1d9e"><td class="memItemLeft" align="right" valign="top"><a id="a0ba239caffe5972f2aaffa36f1bf1d9e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>keycache_pthread_mutex_lock</b>(M)&#160;&#160;&#160;<a class="el" href="group___thread__instrumentation.html#ga340bf8f49d0cbaa994eaf5fb1fc7a22f">mysql_mutex_lock</a>(M)</td></tr>
<tr class="separator:a0ba239caffe5972f2aaffa36f1bf1d9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4716d2ef9f38b2e33369931c83a1c27"><td class="memItemLeft" align="right" valign="top"><a id="ae4716d2ef9f38b2e33369931c83a1c27"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>keycache_pthread_mutex_unlock</b>(M)&#160;&#160;&#160;<a class="el" href="group___thread__instrumentation.html#ga5c748d3c7862702885acb90576754a2c">mysql_mutex_unlock</a>(M)</td></tr>
<tr class="separator:ae4716d2ef9f38b2e33369931c83a1c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3c0621f463bcc6d86b359ae9ee4cec8"><td class="memItemLeft" align="right" valign="top"><a id="ab3c0621f463bcc6d86b359ae9ee4cec8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>keycache_pthread_cond_signal</b>(C)&#160;&#160;&#160;<a class="el" href="group___thread__instrumentation.html#gae34d5c956bc219ef45fbece509d3cf40">mysql_cond_signal</a>(C)</td></tr>
<tr class="separator:ab3c0621f463bcc6d86b359ae9ee4cec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00d24c7231be28dbaf71f5408f30e44c"><td class="memItemLeft" align="right" valign="top"><a id="a00d24c7231be28dbaf71f5408f30e44c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>inline</b>&#160;&#160;&#160;/* disabled inline for easier debugging */</td></tr>
<tr class="separator:a00d24c7231be28dbaf71f5408f30e44c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0da33d569f769182ccfc8ba365a7c506"><td class="memItemLeft" align="right" valign="top"><a id="a0da33d569f769182ccfc8ba365a7c506"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>F_B_PRT</b>(_f_,  _v_)&#160;&#160;&#160;DBUG_PRINT(&quot;assert_fail&quot;, (_f_, _v_))</td></tr>
<tr class="separator:a0da33d569f769182ccfc8ba365a7c506"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a459e57d1695b31814a33224b5dd81b2e"><td class="memItemLeft" align="right" valign="top"><a id="a459e57d1695b31814a33224b5dd81b2e"></a>
typedef <a class="el" href="group___thread__instrumentation.html#ga23d9658a805c313a31a6ac170441690c">mysql_cond_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>KEYCACHE_CONDVAR</b></td></tr>
<tr class="separator:a459e57d1695b31814a33224b5dd81b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a4a0b57a0812f6ad19b2174667119f4ad"><td class="memItemLeft" align="right" valign="top"><a id="a4a0b57a0812f6ad19b2174667119f4ad"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>BLOCK_TEMPERATURE</b> { <b>BLOCK_COLD</b>, 
<b>BLOCK_WARM</b>, 
<b>BLOCK_HOT</b>
 }</td></tr>
<tr class="separator:a4a0b57a0812f6ad19b2174667119f4ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5e9e1708936ac404c45527d26958ae16"><td class="memItemLeft" align="right" valign="top"><a id="a5e9e1708936ac404c45527d26958ae16"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>flush_all_key_blocks</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache)</td></tr>
<tr class="separator:a5e9e1708936ac404c45527d26958ae16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a455c6a5e2f480b8d8b67392ba9f61d67"><td class="memItemLeft" align="right" valign="top"><a id="a455c6a5e2f480b8d8b67392ba9f61d67"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>wait_on_queue</b> (<a class="el" href="structst__keycache__wqueue.html">KEYCACHE_WQUEUE</a> *wqueue, <a class="el" href="group___thread__instrumentation.html#ga5303924710bf8356ede41ee68bca276f">mysql_mutex_t</a> *mutex)</td></tr>
<tr class="separator:a455c6a5e2f480b8d8b67392ba9f61d67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d1962faf8bcd8d3bf01d56cedfc744b"><td class="memItemLeft" align="right" valign="top"><a id="a8d1962faf8bcd8d3bf01d56cedfc744b"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>release_whole_queue</b> (<a class="el" href="structst__keycache__wqueue.html">KEYCACHE_WQUEUE</a> *wqueue)</td></tr>
<tr class="separator:a8d1962faf8bcd8d3bf01d56cedfc744b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94cdc3c884e8122823b31ae04fecc887"><td class="memItemLeft" align="right" valign="top"><a id="a94cdc3c884e8122823b31ae04fecc887"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>free_block</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>)</td></tr>
<tr class="separator:a94cdc3c884e8122823b31ae04fecc887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82b33b3835be70136009b7c88d4ecad4"><td class="memItemLeft" align="right" valign="top"><a id="a82b33b3835be70136009b7c88d4ecad4"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>test_key_cache</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, const char *where, my_bool lock)</td></tr>
<tr class="separator:a82b33b3835be70136009b7c88d4ecad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b6b46b336b85c603a64b173b6cd1b62"><td class="memItemLeft" align="right" valign="top"><a id="a1b6b46b336b85c603a64b173b6cd1b62"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>fail_block</b> (<a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>)</td></tr>
<tr class="separator:a1b6b46b336b85c603a64b173b6cd1b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea0bccc76a000e75ef1905fd76dd640b"><td class="memItemLeft" align="right" valign="top"><a id="aea0bccc76a000e75ef1905fd76dd640b"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>fail_hlink</b> (<a class="el" href="structst__hash__link.html">HASH_LINK</a> *hlink)</td></tr>
<tr class="separator:aea0bccc76a000e75ef1905fd76dd640b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2a0dda2a2b90dff2a89dd93c15149d2"><td class="memItemLeft" align="right" valign="top"><a id="ae2a0dda2a2b90dff2a89dd93c15149d2"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>cache_empty</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache)</td></tr>
<tr class="separator:ae2a0dda2a2b90dff2a89dd93c15149d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27848979817f779cd73b4a58b6fcccaf"><td class="memItemLeft" align="right" valign="top"><a id="a27848979817f779cd73b4a58b6fcccaf"></a>
static uint&#160;</td><td class="memItemRight" valign="bottom"><b>next_power</b> (uint value)</td></tr>
<tr class="separator:a27848979817f779cd73b4a58b6fcccaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0fc8526a7a2b14f31b9df818414a224"><td class="memItemLeft" align="right" valign="top"><a id="ad0fc8526a7a2b14f31b9df818414a224"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>init_key_cache</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, uint key_cache_block_size, size_t use_mem, uint division_limit, uint age_threshold)</td></tr>
<tr class="separator:ad0fc8526a7a2b14f31b9df818414a224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d6892bc7cb4a979cbc23e89a22b386e"><td class="memItemLeft" align="right" valign="top"><a id="a8d6892bc7cb4a979cbc23e89a22b386e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>resize_key_cache</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, uint key_cache_block_size, size_t use_mem, uint division_limit, uint age_threshold)</td></tr>
<tr class="separator:a8d6892bc7cb4a979cbc23e89a22b386e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb81aa221bac3bdf5a164716c193acb8"><td class="memItemLeft" align="right" valign="top"><a id="aeb81aa221bac3bdf5a164716c193acb8"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>inc_counter_for_resize_op</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache)</td></tr>
<tr class="separator:aeb81aa221bac3bdf5a164716c193acb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86be03ac31d3436059c39ee7447d220a"><td class="memItemLeft" align="right" valign="top"><a id="a86be03ac31d3436059c39ee7447d220a"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>dec_counter_for_resize_op</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache)</td></tr>
<tr class="separator:a86be03ac31d3436059c39ee7447d220a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108f066be8ee492a53e3e6cca587fd28"><td class="memItemLeft" align="right" valign="top"><a id="a108f066be8ee492a53e3e6cca587fd28"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>change_key_cache_param</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, uint division_limit, uint age_threshold)</td></tr>
<tr class="separator:a108f066be8ee492a53e3e6cca587fd28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee68b09652c680c421c3caa4c02a476"><td class="memItemLeft" align="right" valign="top"><a id="a8ee68b09652c680c421c3caa4c02a476"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>end_key_cache</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, my_bool cleanup)</td></tr>
<tr class="separator:a8ee68b09652c680c421c3caa4c02a476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a103e79c49cd1de817225fcfc1cf54af5"><td class="memItemLeft" align="right" valign="top"><a id="a103e79c49cd1de817225fcfc1cf54af5"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>link_into_queue</b> (<a class="el" href="structst__keycache__wqueue.html">KEYCACHE_WQUEUE</a> *wqueue, struct <a class="el" href="structst__my__thread__var.html">st_my_thread_var</a> *thread)</td></tr>
<tr class="separator:a103e79c49cd1de817225fcfc1cf54af5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacb004d165a9f0075595fa689016ebc7"><td class="memItemLeft" align="right" valign="top"><a id="aacb004d165a9f0075595fa689016ebc7"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>unlink_from_queue</b> (<a class="el" href="structst__keycache__wqueue.html">KEYCACHE_WQUEUE</a> *wqueue, struct <a class="el" href="structst__my__thread__var.html">st_my_thread_var</a> *thread)</td></tr>
<tr class="separator:aacb004d165a9f0075595fa689016ebc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b1fc8e4187cc45b931126ed0716db49"><td class="memItemLeft" align="right" valign="top"><a id="a9b1fc8e4187cc45b931126ed0716db49"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>unlink_changed</b> (<a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>)</td></tr>
<tr class="separator:a9b1fc8e4187cc45b931126ed0716db49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4925246d4bedfd67705101098707da52"><td class="memItemLeft" align="right" valign="top"><a id="a4925246d4bedfd67705101098707da52"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>link_changed</b> (<a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> **phead)</td></tr>
<tr class="separator:a4925246d4bedfd67705101098707da52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e21f226bb2d12a017992f880983e66a"><td class="memItemLeft" align="right" valign="top"><a id="a1e21f226bb2d12a017992f880983e66a"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>link_to_file_list</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>, int <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a>, my_bool unlink_block)</td></tr>
<tr class="separator:a1e21f226bb2d12a017992f880983e66a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae31bae037244419366e24306ddaf78d5"><td class="memItemLeft" align="right" valign="top"><a id="ae31bae037244419366e24306ddaf78d5"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>link_to_changed_list</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>)</td></tr>
<tr class="separator:ae31bae037244419366e24306ddaf78d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d1a6ff619e0c008f6fb923dbd0760d8"><td class="memItemLeft" align="right" valign="top"><a id="a4d1a6ff619e0c008f6fb923dbd0760d8"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>link_block</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>, my_bool hot, my_bool at_end)</td></tr>
<tr class="separator:a4d1a6ff619e0c008f6fb923dbd0760d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9946bb8e6c38ce22571c368f611ca6e8"><td class="memItemLeft" align="right" valign="top"><a id="a9946bb8e6c38ce22571c368f611ca6e8"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>unlink_block</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>)</td></tr>
<tr class="separator:a9946bb8e6c38ce22571c368f611ca6e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16798e4c3e8d146c06308973cc94621c"><td class="memItemLeft" align="right" valign="top"><a id="a16798e4c3e8d146c06308973cc94621c"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>reg_requests</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>, int count)</td></tr>
<tr class="separator:a16798e4c3e8d146c06308973cc94621c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc7c473a02292b7b5c4a1ddce0f373a9"><td class="memItemLeft" align="right" valign="top"><a id="afc7c473a02292b7b5c4a1ddce0f373a9"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>unreg_request</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>, int at_end)</td></tr>
<tr class="separator:afc7c473a02292b7b5c4a1ddce0f373a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab89f1b5417f528525c7b997a99dd8979"><td class="memItemLeft" align="right" valign="top"><a id="ab89f1b5417f528525c7b997a99dd8979"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>remove_reader</b> (<a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>)</td></tr>
<tr class="separator:ab89f1b5417f528525c7b997a99dd8979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36c6785bea71fce1b852570282a32897"><td class="memItemLeft" align="right" valign="top"><a id="a36c6785bea71fce1b852570282a32897"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>wait_for_readers</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>)</td></tr>
<tr class="separator:a36c6785bea71fce1b852570282a32897"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5caec46b7508fa71623331f57a65ca94"><td class="memItemLeft" align="right" valign="top"><a id="a5caec46b7508fa71623331f57a65ca94"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>link_hash</b> (<a class="el" href="structst__hash__link.html">HASH_LINK</a> **start, <a class="el" href="structst__hash__link.html">HASH_LINK</a> *hash_link)</td></tr>
<tr class="separator:a5caec46b7508fa71623331f57a65ca94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576532f3cff936c77a937b546ae03acc"><td class="memItemLeft" align="right" valign="top"><a id="a576532f3cff936c77a937b546ae03acc"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>unlink_hash</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, <a class="el" href="structst__hash__link.html">HASH_LINK</a> *hash_link)</td></tr>
<tr class="separator:a576532f3cff936c77a937b546ae03acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9136bb4caea5054f49fee78aad69f3b2"><td class="memItemLeft" align="right" valign="top"><a id="a9136bb4caea5054f49fee78aad69f3b2"></a>
static <a class="el" href="structst__hash__link.html">HASH_LINK</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>get_hash_link</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, int <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a>, my_off_t filepos)</td></tr>
<tr class="separator:a9136bb4caea5054f49fee78aad69f3b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2582062ee1df91c979a85804340b5293"><td class="memItemLeft" align="right" valign="top"><a id="a2582062ee1df91c979a85804340b5293"></a>
static <a class="el" href="structst__block__link.html">BLOCK_LINK</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>find_key_block</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, File <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a>, my_off_t filepos, int init_hits_left, int wrmode, int *page_st)</td></tr>
<tr class="separator:a2582062ee1df91c979a85804340b5293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b51acba27048b5d3242f8ff0bb76a50"><td class="memItemLeft" align="right" valign="top"><a id="a4b51acba27048b5d3242f8ff0bb76a50"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>read_block</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> *<a class="el" href="row0merge_8cc.html#a93c46cf7240dc5a16f8137e7d34a5049">block</a>, uint read_length, uint min_length, my_bool primary)</td></tr>
<tr class="separator:a4b51acba27048b5d3242f8ff0bb76a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a267ec136ad3cba2c6901459d19e9c16e"><td class="memItemLeft" align="right" valign="top"><a id="a267ec136ad3cba2c6901459d19e9c16e"></a>
uchar *&#160;</td><td class="memItemRight" valign="bottom"><b>key_cache_read</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, File <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a>, my_off_t filepos, int <a class="el" href="btr0btr_8cc.html#a46e504d299fb7ca943fc98a74051f564">level</a>, uchar *buff, uint length, uint block_length <a class="el" href="trx0undo_8cc.html#aa965850120c0683c58e8c762cdc0fb17">__attribute__</a>((unused)), int return_buffer <a class="el" href="trx0undo_8cc.html#aa965850120c0683c58e8c762cdc0fb17">__attribute__</a>((unused)))</td></tr>
<tr class="separator:a267ec136ad3cba2c6901459d19e9c16e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6743f1ab031dc202cea8b9ea346d5de"><td class="memItemLeft" align="right" valign="top"><a id="aa6743f1ab031dc202cea8b9ea346d5de"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>key_cache_insert</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, File <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a>, my_off_t filepos, int <a class="el" href="btr0btr_8cc.html#a46e504d299fb7ca943fc98a74051f564">level</a>, uchar *buff, uint length)</td></tr>
<tr class="separator:aa6743f1ab031dc202cea8b9ea346d5de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff88812c695a85ae531437535463868e"><td class="memItemLeft" align="right" valign="top"><a id="aff88812c695a85ae531437535463868e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>key_cache_write</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, File <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a>, my_off_t filepos, int <a class="el" href="btr0btr_8cc.html#a46e504d299fb7ca943fc98a74051f564">level</a>, uchar *buff, uint length, uint block_length <a class="el" href="trx0undo_8cc.html#aa965850120c0683c58e8c762cdc0fb17">__attribute__</a>((unused)), int dont_write)</td></tr>
<tr class="separator:aff88812c695a85ae531437535463868e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a032c611ae0a4a7b599a8507d44f3b68b"><td class="memItemLeft" align="right" valign="top"><a id="a032c611ae0a4a7b599a8507d44f3b68b"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>cmp_sec_link</b> (<a class="el" href="structst__block__link.html">BLOCK_LINK</a> **<a class="el" href="row0merge_8cc.html#aaba8987b345486af51614561bddd051b">a</a>, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> **<a class="el" href="row0merge_8cc.html#a40730b4776204efc5a07b947ce63f0b4">b</a>)</td></tr>
<tr class="separator:a032c611ae0a4a7b599a8507d44f3b68b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52cb7c1e487c6dc5bfaa36f9883df371"><td class="memItemLeft" align="right" valign="top"><a id="a52cb7c1e487c6dc5bfaa36f9883df371"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>flush_cached_blocks</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, File <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a>, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> **cache, <a class="el" href="structst__block__link.html">BLOCK_LINK</a> **end, enum flush_type <a class="el" href="trx0undo_8cc.html#a6093ca66dd564a9c407d64ce43838c28">type</a>)</td></tr>
<tr class="separator:a52cb7c1e487c6dc5bfaa36f9883df371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b9e9e39f7a59991a92a06c5b4d33807"><td class="memItemLeft" align="right" valign="top"><a id="a2b9e9e39f7a59991a92a06c5b4d33807"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>flush_key_blocks_int</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, File <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a>, enum flush_type <a class="el" href="trx0undo_8cc.html#a6093ca66dd564a9c407d64ce43838c28">type</a>)</td></tr>
<tr class="separator:a2b9e9e39f7a59991a92a06c5b4d33807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d6c001c818692b83d4303532f17dba"><td class="memItemLeft" align="right" valign="top"><a id="ad4d6c001c818692b83d4303532f17dba"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>flush_key_blocks</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache, File <a class="el" href="row0quiesce_8cc.html#a702945180aa732857b380a007a7e2a21">file</a>, enum flush_type <a class="el" href="trx0undo_8cc.html#a6093ca66dd564a9c407d64ce43838c28">type</a>)</td></tr>
<tr class="separator:ad4d6c001c818692b83d4303532f17dba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e2a758165a0facc9cae15407a294eff"><td class="memItemLeft" align="right" valign="top"><a id="a1e2a758165a0facc9cae15407a294eff"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>reset_key_cache_counters</b> (const char *<a class="el" href="srv0start_8cc.html#a03c6040f5fe625af9dc4a701925fbe65">name</a> <a class="el" href="trx0undo_8cc.html#aa965850120c0683c58e8c762cdc0fb17">__attribute__</a>((unused)), <a class="el" href="structst__key__cache.html">KEY_CACHE</a> *key_cache)</td></tr>
<tr class="separator:a1e2a758165a0facc9cae15407a294eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6ab2c1f00596c26a9c0e51809a72389"><td class="memItemLeft" align="right" valign="top"><a id="ac6ab2c1f00596c26a9c0e51809a72389"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>test_key_cache</b> (<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *keycache <a class="el" href="trx0undo_8cc.html#aa965850120c0683c58e8c762cdc0fb17">__attribute__</a>((unused)), const char *where <a class="el" href="trx0undo_8cc.html#aa965850120c0683c58e8c762cdc0fb17">__attribute__</a>((unused)), my_bool lock <a class="el" href="trx0undo_8cc.html#aa965850120c0683c58e8c762cdc0fb17">__attribute__</a>((unused)))</td></tr>
<tr class="separator:ac6ab2c1f00596c26a9c0e51809a72389"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4fc715bfb4b31e5ea371b4613f246d42"><td class="memItemLeft" align="right" valign="top"><a id="a4fc715bfb4b31e5ea371b4613f246d42"></a>
<a class="el" href="structst__key__cache.html">KEY_CACHE</a>&#160;</td><td class="memItemRight" valign="bottom"><b>dflt_key_cache_var</b></td></tr>
<tr class="separator:a4fc715bfb4b31e5ea371b4613f246d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab800abece46f16337a8575f6f94fa5bb"><td class="memItemLeft" align="right" valign="top"><a id="ab800abece46f16337a8575f6f94fa5bb"></a>
<a class="el" href="structst__key__cache.html">KEY_CACHE</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>dflt_key_cache</b> = &amp;dflt_key_cache_var</td></tr>
<tr class="separator:ab800abece46f16337a8575f6f94fa5bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15355029fead2872a757e1d854f8f0d8"><td class="memItemLeft" align="right" valign="top"><a id="a15355029fead2872a757e1d854f8f0d8"></a>
static long&#160;</td><td class="memItemRight" valign="bottom"><b>keycache_thread_id</b></td></tr>
<tr class="separator:a15355029fead2872a757e1d854f8f0d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>These functions handle keyblock cacheing for ISAM and MyISAM tables.</p>
<p>One cache can handle many files. It must contain buffers of the same blocksize. init_key_cache() should be used to init cache handler.</p>
<p>The free list (free_block_list) is a stack like structure. When a block is freed by free_block(), it is pushed onto the stack. When a new block is required it is first tried to pop one from the stack. If the stack is empty, it is tried to get a never-used block from the pool. If this is empty too, then a block is taken from the LRU ring, flushing it to disk, if neccessary. This is handled in find_key_block(). With the new free list, the blocks can have three temperatures: hot, warm and cold (which is free). This is remembered in the block header by the enum BLOCK_TEMPERATURE temperature variable. Remembering the temperature is neccessary to correctly count the number of warm blocks, which is required to decide when blocks are allowed to become hot. Whenever a block is inserted to another (sub-)chain, we take the old and new temperature into account to decide if we got one more or less warm block. blocks_unused is the sum of never used blocks in the pool and of currently free blocks. blocks_used is the number of blocks fetched from the pool and as such gives the maximum number of in-use blocks at any time. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afced45e5c89364d6703389c01e68f55f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afced45e5c89364d6703389c01e68f55f">&#9670;&nbsp;</a></span>KEYCACHE_HASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KEYCACHE_HASH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">f, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pos&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(((ulong) ((pos) / keycache-&gt;key_cache_block_size) +                          \</div><div class="line">                                     (ulong) (f)) &amp; (keycache-&gt;hash_entries-1))</div></div><!-- fragment -->
</div>
</div>
<a id="a9b494c4988b087161e4073fbd4b595aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b494c4988b087161e4073fbd4b595aa">&#9670;&nbsp;</a></span>KEYCACHE_THREAD_TRACE_BEGIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KEYCACHE_THREAD_TRACE_BEGIN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">l</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{ <span class="keyword">struct </span><a class="code" href="structst__my__thread__var.html">st_my_thread_var</a> *thread_var= my_thread_var;             \</div><div class="line">              keycache_thread_id= thread_var-&gt;id;                             \</div><div class="line">              KEYCACHE_DBUG_PRINT(l,(<span class="stringliteral">&quot;[thread %ld&quot;</span>,keycache_thread_id)) }</div><div class="ttc" id="structst__my__thread__var_html"><div class="ttname"><a href="structst__my__thread__var.html">st_my_thread_var</a></div><div class="ttdef"><b>Definition:</b> my_pthread.h:839</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
