<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERFORMANCE SCHEMA: Aggregator_distinct Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PERFORMANCE SCHEMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_aggregator__distinct-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Aggregator_distinct Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="item__sum_8h_source.html">item_sum.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Aggregator_distinct:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_aggregator__distinct.png" usemap="#Aggregator_5Fdistinct_map" alt=""/>
  <map id="Aggregator_5Fdistinct_map" name="Aggregator_5Fdistinct_map">
<area href="class_aggregator.html" alt="Aggregator" shape="rect" coords="0,56,122,80"/>
<area href="class_sql__alloc.html" alt="Sql_alloc" shape="rect" coords="0,0,122,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afbd34da51092275ff762e357fcbb8468"><td class="memItemLeft" align="right" valign="top"><a id="afbd34da51092275ff762e357fcbb8468"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Aggregator_distinct</b> (<a class="el" href="class_item__sum.html">Item_sum</a> *sum)</td></tr>
<tr class="separator:afbd34da51092275ff762e357fcbb8468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e2d407eac6d9e1996c302a4861d9f0c"><td class="memItemLeft" align="right" valign="top"><a id="a9e2d407eac6d9e1996c302a4861d9f0c"></a>
Aggregator_type&#160;</td><td class="memItemRight" valign="bottom"><b>Aggrtype</b> ()</td></tr>
<tr class="separator:a9e2d407eac6d9e1996c302a4861d9f0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac01d658918e5e160779ccfaf1134943b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aggregator__distinct.html#ac01d658918e5e160779ccfaf1134943b">setup</a> (THD *)</td></tr>
<tr class="separator:ac01d658918e5e160779ccfaf1134943b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb3c9529bc839900fc63eb890a5e2aee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aggregator__distinct.html#acb3c9529bc839900fc63eb890a5e2aee">clear</a> ()</td></tr>
<tr class="separator:acb3c9529bc839900fc63eb890a5e2aee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af72d7cc1082245015c41e99893992a4f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aggregator__distinct.html#af72d7cc1082245015c41e99893992a4f">add</a> ()</td></tr>
<tr class="separator:af72d7cc1082245015c41e99893992a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a474d5f42f784572ea3b7d28be0fc3b2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aggregator__distinct.html#a474d5f42f784572ea3b7d28be0fc3b2e">endup</a> ()</td></tr>
<tr class="separator:a474d5f42f784572ea3b7d28be0fc3b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e5fc048746277c661ce97e9fc92905"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classmy__decimal.html">my_decimal</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aggregator__distinct.html#a60e5fc048746277c661ce97e9fc92905">arg_val_decimal</a> (<a class="el" href="classmy__decimal.html">my_decimal</a> *value)</td></tr>
<tr class="separator:a60e5fc048746277c661ce97e9fc92905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3485cfa42d584711c4c95a3405f4a2ad"><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aggregator__distinct.html#a3485cfa42d584711c4c95a3405f4a2ad">arg_val_real</a> ()</td></tr>
<tr class="separator:a3485cfa42d584711c4c95a3405f4a2ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a213b0657e2fcd03305629d78c68b31ad"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aggregator__distinct.html#a213b0657e2fcd03305629d78c68b31ad">arg_is_null</a> (bool use_null_value)</td></tr>
<tr class="separator:a213b0657e2fcd03305629d78c68b31ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc8b41d0e322a1d475f69e7008818dfc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aggregator__distinct.html#abc8b41d0e322a1d475f69e7008818dfc">unique_walk_function</a> (void *element)</td></tr>
<tr class="separator:abc8b41d0e322a1d475f69e7008818dfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_aggregator"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_aggregator')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_aggregator.html">Aggregator</a></td></tr>
<tr class="memitem:ad9419dfc50b0b7e5e977a81b3bd8ddda inherit pub_methods_class_aggregator"><td class="memItemLeft" align="right" valign="top"><a id="ad9419dfc50b0b7e5e977a81b3bd8ddda"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Aggregator</b> (<a class="el" href="class_item__sum.html">Item_sum</a> *arg)</td></tr>
<tr class="separator:ad9419dfc50b0b7e5e977a81b3bd8ddda inherit pub_methods_class_aggregator"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ab74b7361e005d7c492dde7650774279b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aggregator__distinct.html#ab74b7361e005d7c492dde7650774279b">composite_key_cmp</a> (void *arg, uchar *key1, uchar *key2)</td></tr>
<tr class="separator:ab74b7361e005d7c492dde7650774279b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_class_sql__alloc"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_class_sql__alloc')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="class_sql__alloc.html">Sql_alloc</a></td></tr>
<tr class="memitem:a193100cab44074df6f4f1507b333dcda inherit pub_static_methods_class_sql__alloc"><td class="memItemLeft" align="right" valign="top"><a id="a193100cab44074df6f4f1507b333dcda"></a>
static void *&#160;</td><td class="memItemRight" valign="bottom"><b>operator new</b> (size_t <a class="el" href="srv0start_8cc.html#aa2ba5a514c395b398630a3d7791561bc">size</a>)  throw ()</td></tr>
<tr class="separator:a193100cab44074df6f4f1507b333dcda inherit pub_static_methods_class_sql__alloc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b17bd7ec22fc7a7e5b56702e5630a6 inherit pub_static_methods_class_sql__alloc"><td class="memItemLeft" align="right" valign="top"><a id="a14b17bd7ec22fc7a7e5b56702e5630a6"></a>
static void *&#160;</td><td class="memItemRight" valign="bottom"><b>operator new[]</b> (size_t <a class="el" href="srv0start_8cc.html#aa2ba5a514c395b398630a3d7791561bc">size</a>)  throw ()</td></tr>
<tr class="separator:a14b17bd7ec22fc7a7e5b56702e5630a6 inherit pub_static_methods_class_sql__alloc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13f2eacbb6adcee5c9ac94629e2863b3 inherit pub_static_methods_class_sql__alloc"><td class="memItemLeft" align="right" valign="top"><a id="a13f2eacbb6adcee5c9ac94629e2863b3"></a>
static void *&#160;</td><td class="memItemRight" valign="bottom"><b>operator new[]</b> (size_t <a class="el" href="srv0start_8cc.html#aa2ba5a514c395b398630a3d7791561bc">size</a>, <a class="el" href="structst__mem__root.html">MEM_ROOT</a> *mem_root)  throw ()</td></tr>
<tr class="separator:a13f2eacbb6adcee5c9ac94629e2863b3 inherit pub_static_methods_class_sql__alloc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06adbd3404f702994fd10619c41267f0 inherit pub_static_methods_class_sql__alloc"><td class="memItemLeft" align="right" valign="top"><a id="a06adbd3404f702994fd10619c41267f0"></a>
static void *&#160;</td><td class="memItemRight" valign="bottom"><b>operator new</b> (size_t <a class="el" href="srv0start_8cc.html#aa2ba5a514c395b398630a3d7791561bc">size</a>, <a class="el" href="structst__mem__root.html">MEM_ROOT</a> *mem_root)  throw ()</td></tr>
<tr class="separator:a06adbd3404f702994fd10619c41267f0 inherit pub_static_methods_class_sql__alloc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e428ed5b826482a49b1d8a1d246a579 inherit pub_static_methods_class_sql__alloc"><td class="memItemLeft" align="right" valign="top"><a id="a1e428ed5b826482a49b1d8a1d246a579"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>operator delete</b> (void *ptr, size_t <a class="el" href="srv0start_8cc.html#aa2ba5a514c395b398630a3d7791561bc">size</a>)</td></tr>
<tr class="separator:a1e428ed5b826482a49b1d8a1d246a579 inherit pub_static_methods_class_sql__alloc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c08622003a34134a56eccaf2d95c0b9 inherit pub_static_methods_class_sql__alloc"><td class="memItemLeft" align="right" valign="top"><a id="a7c08622003a34134a56eccaf2d95c0b9"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>operator delete</b> (void *ptr, <a class="el" href="structst__mem__root.html">MEM_ROOT</a> *mem_root)</td></tr>
<tr class="separator:a7c08622003a34134a56eccaf2d95c0b9 inherit pub_static_methods_class_sql__alloc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0c7ed4b5a1eb798f3af463eb84b1e3b inherit pub_static_methods_class_sql__alloc"><td class="memItemLeft" align="right" valign="top"><a id="ab0c7ed4b5a1eb798f3af463eb84b1e3b"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>operator delete[]</b> (void *ptr, <a class="el" href="structst__mem__root.html">MEM_ROOT</a> *mem_root)</td></tr>
<tr class="separator:ab0c7ed4b5a1eb798f3af463eb84b1e3b inherit pub_static_methods_class_sql__alloc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dd86b56cecc3919504cf5e1452f2511 inherit pub_static_methods_class_sql__alloc"><td class="memItemLeft" align="right" valign="top"><a id="a6dd86b56cecc3919504cf5e1452f2511"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>operator delete[]</b> (void *ptr, size_t <a class="el" href="srv0start_8cc.html#aa2ba5a514c395b398630a3d7791561bc">size</a>)</td></tr>
<tr class="separator:a6dd86b56cecc3919504cf5e1452f2511 inherit pub_static_methods_class_sql__alloc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a4ceb4aea36f2f0c9997424be52643d25"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aggregator__distinct.html#a4ceb4aea36f2f0c9997424be52643d25">Const_distinct</a> { <b>NOT_CONST</b> = 0, 
<a class="el" href="class_aggregator__distinct.html#a4ceb4aea36f2f0c9997424be52643d25a46d997685628065c6ae4765e33360e8a">CONST_NULL</a>, 
<a class="el" href="class_aggregator__distinct.html#a4ceb4aea36f2f0c9997424be52643d25a9e6156bd34eb0edf99b9734853778003">CONST_NOT_NULL</a>
 }</td></tr>
<tr class="separator:a4ceb4aea36f2f0c9997424be52643d25"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a221fc6bdb73b1e2e94bc1efa7fa8a150"><td class="memItemLeft" align="right" valign="top"><a id="a221fc6bdb73b1e2e94bc1efa7fa8a150"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>endup_done</b></td></tr>
<tr class="separator:a221fc6bdb73b1e2e94bc1efa7fa8a150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accf7341ca263e6324c1b75d35f693328"><td class="memItemLeft" align="right" valign="top"><a id="accf7341ca263e6324c1b75d35f693328"></a>
<a class="el" href="struct_t_a_b_l_e.html">TABLE</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>table</b></td></tr>
<tr class="separator:accf7341ca263e6324c1b75d35f693328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a178ab012eeea95dd1b95f7f646f3ebf7"><td class="memItemLeft" align="right" valign="top"><a id="a178ab012eeea95dd1b95f7f646f3ebf7"></a>
uint32 *&#160;</td><td class="memItemRight" valign="bottom"><b>field_lengths</b></td></tr>
<tr class="separator:a178ab012eeea95dd1b95f7f646f3ebf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14537c061cb12c514a9170138d359c66"><td class="memItemLeft" align="right" valign="top"><a id="a14537c061cb12c514a9170138d359c66"></a>
TMP_TABLE_PARAM *&#160;</td><td class="memItemRight" valign="bottom"><b>tmp_table_param</b></td></tr>
<tr class="separator:a14537c061cb12c514a9170138d359c66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3c8cd50d13b20f393fa079d31018f39"><td class="memItemLeft" align="right" valign="top"><a id="ac3c8cd50d13b20f393fa079d31018f39"></a>
Unique *&#160;</td><td class="memItemRight" valign="bottom"><b>tree</b></td></tr>
<tr class="separator:ac3c8cd50d13b20f393fa079d31018f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03f0eef6077bebba0804687a31748387"><td class="memItemLeft" align="right" valign="top"><a id="a03f0eef6077bebba0804687a31748387"></a>
uint&#160;</td><td class="memItemRight" valign="bottom"><b>tree_key_length</b></td></tr>
<tr class="separator:a03f0eef6077bebba0804687a31748387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa173b79c7a8606c3262a0d848f0b88d"><td class="memItemLeft" align="right" valign="top"><a id="aaa173b79c7a8606c3262a0d848f0b88d"></a>
enum <a class="el" href="class_aggregator__distinct.html#a4ceb4aea36f2f0c9997424be52643d25">Aggregator_distinct::Const_distinct</a>&#160;</td><td class="memItemRight" valign="bottom"><b>const_distinct</b></td></tr>
<tr class="separator:aaa173b79c7a8606c3262a0d848f0b88d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bc6a2ac9c7ff433914e145e233067c4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aggregator__distinct.html#a7bc6a2ac9c7ff433914e145e233067c4">use_distinct_values</a></td></tr>
<tr class="separator:a7bc6a2ac9c7ff433914e145e233067c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a2afeb7cbcc97ddd2c3c74cf87352e0ab"><td class="memItemLeft" align="right" valign="top"><a id="a2afeb7cbcc97ddd2c3c74cf87352e0ab"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>Item_sum_sum</b></td></tr>
<tr class="separator:a2afeb7cbcc97ddd2c3c74cf87352e0ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_class_aggregator"><td colspan="2" onclick="javascript:toggleInherit('pub_types_class_aggregator')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="class_aggregator.html">Aggregator</a></td></tr>
<tr class="memitem:a61b988705710055ea031d1c227b43d05 inherit pub_types_class_aggregator"><td class="memItemLeft" align="right" valign="top"><a id="a61b988705710055ea031d1c227b43d05"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>Aggregator_type</b> { <b>SIMPLE_AGGREGATOR</b>, 
<b>DISTINCT_AGGREGATOR</b>
 }</td></tr>
<tr class="separator:a61b988705710055ea031d1c227b43d05 inherit pub_types_class_aggregator"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_class_aggregator"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_class_aggregator')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="class_aggregator.html">Aggregator</a></td></tr>
<tr class="memitem:a0c8f75d3d70dff740412d52b63ea3e40 inherit pro_attribs_class_aggregator"><td class="memItemLeft" align="right" valign="top"><a id="a0c8f75d3d70dff740412d52b63ea3e40"></a>
<a class="el" href="class_item__sum.html">Item_sum</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>item_sum</b></td></tr>
<tr class="separator:a0c8f75d3d70dff740412d52b63ea3e40 inherit pro_attribs_class_aggregator"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The distinct aggregator. Implements AGGFN (DISTINCT ..) Collects all the data into an Unique (similarly to what Item_sum_distinct does currently) and then (if applicable) iterates over the list of unique values and pumps them back into its object </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a4ceb4aea36f2f0c9997424be52643d25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ceb4aea36f2f0c9997424be52643d25">&#9670;&nbsp;</a></span>Const_distinct</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_aggregator__distinct.html#a4ceb4aea36f2f0c9997424be52643d25">Aggregator_distinct::Const_distinct</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a4ceb4aea36f2f0c9997424be52643d25a46d997685628065c6ae4765e33360e8a"></a>CONST_NULL&#160;</td><td class="fielddoc"><p>Set to true if the result is known to be always NULL. If set deactivates creation and usage of the temporary table (in the 'table' member) and the Unique instance (in the 'tree' member) as well as the calculation of the final value on the first call to Item_[sum|avg|count]::val_xxx(). </p>
</td></tr>
<tr><td class="fieldname"><a id="a4ceb4aea36f2f0c9997424be52643d25a9e6156bd34eb0edf99b9734853778003"></a>CONST_NOT_NULL&#160;</td><td class="fielddoc"><p>Set to true if count distinct is on only const items. Distinct on a const value will always be the constant itself. And count distinct of the same would always be 1. Similar to CONST_NULL, it avoids creation of temporary table and the Unique instance. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af72d7cc1082245015c41e99893992a4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af72d7cc1082245015c41e99893992a4f">&#9670;&nbsp;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aggregator_distinct::add </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Process incoming row.</p>
<p>Add it to Unique/temp hash table if it's unique. Skip the row if not unique. Prepare <a class="el" href="class_aggregator__distinct.html">Aggregator_distinct</a> to process the incoming stream. Create the temporary table and the Unique class if needed. Called by <a class="el" href="class_item__sum.html#ab090330ed58167234556e1f906976c0c">Item_sum::aggregator_add()</a>. To actually get the result value in item_sum's buffers <a class="el" href="class_aggregator__distinct.html#a474d5f42f784572ea3b7d28be0fc3b2e">Aggregator_distinct::endup()</a> must be called.</p>
<dl class="section return"><dt>Returns</dt><dd>status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="class_aggregator.html#a70e0d53834f2672f3ec57c96e35a9a60">Aggregator</a>.</p>

</div>
</div>
<a id="a213b0657e2fcd03305629d78c68b31ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a213b0657e2fcd03305629d78c68b31ad">&#9670;&nbsp;</a></span>arg_is_null()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aggregator_distinct::arg_is_null </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_null_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>NULLness of being-aggregated argument.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">use_null_value</td><td>Optimization: to determine if the argument is NULL we must, in the general case, call is_null() on it, which itself might call val_*() on it, which might be costly. If you just have called arg_val*(), you can pass use_null_value=true; this way, <a class="el" href="class_aggregator__distinct.html#a213b0657e2fcd03305629d78c68b31ad">arg_is_null()</a> might avoid is_null() and instead do a cheap read of the <a class="el" href="class_item.html">Item</a>'s null_value (updated by arg_val*()). </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="class_aggregator.html#a2581c04dee61cf1a4d72519da64baf53">Aggregator</a>.</p>

</div>
</div>
<a id="a60e5fc048746277c661ce97e9fc92905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60e5fc048746277c661ce97e9fc92905">&#9670;&nbsp;</a></span>arg_val_decimal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmy__decimal.html">my_decimal</a> * Aggregator_distinct::arg_val_decimal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmy__decimal.html">my_decimal</a> *&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Decimal value of being-aggregated argument </p>

<p>Implements <a class="el" href="class_aggregator.html#a0965a66058cd00c581b015b9c571cb07">Aggregator</a>.</p>

</div>
</div>
<a id="a3485cfa42d584711c4c95a3405f4a2ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3485cfa42d584711c4c95a3405f4a2ad">&#9670;&nbsp;</a></span>arg_val_real()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double Aggregator_distinct::arg_val_real </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Floating point value of being-aggregated argument </p>

<p>Implements <a class="el" href="class_aggregator.html#addca16d20f7cc2640f3843c2c5e7596d">Aggregator</a>.</p>

</div>
</div>
<a id="acb3c9529bc839900fc63eb890a5e2aee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb3c9529bc839900fc63eb890a5e2aee">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Aggregator_distinct::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invalidate calculated value and clear the distinct rows.</p>
<p>Frees space used by the internal data structures. Removes the accumulated distinct rows. Invalidates the calculated result. </p>

<p>Implements <a class="el" href="class_aggregator.html#ad416a800e9cdec7908dd3e9bdffa70e5">Aggregator</a>.</p>

</div>
</div>
<a id="ab74b7361e005d7c492dde7650774279b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab74b7361e005d7c492dde7650774279b">&#9670;&nbsp;</a></span>composite_key_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Aggregator_distinct::composite_key_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>key1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>key2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Correctly compare composite keys.</p>
<p>Used by the Unique class to compare keys. Will do correct comparisons for composite keys with various field types.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>Pointer to the relevant <a class="el" href="class_aggregator__distinct.html">Aggregator_distinct</a> instance </td></tr>
    <tr><td class="paramname">key1</td><td>left key image </td></tr>
    <tr><td class="paramname">key2</td><td>right key image </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>comparison result </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;0</td><td>if key1 &lt; key2 </td></tr>
    <tr><td class="paramname">=0</td><td>if key1 = key2 </td></tr>
    <tr><td class="paramname">&gt;0</td><td>if key1 &gt; key2 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a474d5f42f784572ea3b7d28be0fc3b2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a474d5f42f784572ea3b7d28be0fc3b2e">&#9670;&nbsp;</a></span>endup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Aggregator_distinct::endup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calculate the aggregate function value.</p>
<p>Since Distinct_aggregator::add() just collects the distinct rows, we must go over the distinct rows and feed them to the aggregation function before returning its value. This is what endup () does. It also sets the result validity flag endup_done to TRUE so it will not recalculate the aggregate value again if the <a class="el" href="class_item__sum.html">Item_sum</a> hasn't been reset. </p>

<p>Implements <a class="el" href="class_aggregator.html#a726ef59a61b219b87c0a6041f8162037">Aggregator</a>.</p>

</div>
</div>
<a id="ac01d658918e5e160779ccfaf1134943b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac01d658918e5e160779ccfaf1134943b">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">C_MODE_END bool Aggregator_distinct::setup </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called before feeding the first row. Used to allocate/setup the internal structures used for aggregation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread descriptor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>faliure</td></tr>
  </table>
  </dd>
</dl>
<p>Prepares <a class="el" href="class_aggregator__distinct.html">Aggregator_distinct</a> to process the incoming stream. Creates the temporary table and the Unique class if needed. Called by <a class="el" href="class_item__sum.html#ac84fa680a8b3690c6735474c9476f312">Item_sum::aggregator_setup()</a> </p>
<p>Create a table with an unique key over all parameters. If the list contains only const values, const_distinct is set to CONST_NOT_NULL to avoid creation of temp table and thereby counting as count(distinct of const values) will always be 1. If any of these const values is null, const_distinct is set to CONST_NULL to ensure aggregation does not happen.</p>

<p>Implements <a class="el" href="class_aggregator.html#afcde359558a43054f7812a72498a263f">Aggregator</a>.</p>

</div>
</div>
<a id="abc8b41d0e322a1d475f69e7008818dfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc8b41d0e322a1d475f69e7008818dfc">&#9670;&nbsp;</a></span>unique_walk_function()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aggregator_distinct::unique_walk_function </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>element</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Aggregate a distinct row from the distinct hash table.</p>
<p>Called for each row into the hash table 'Aggregator_distinct::table'. Includes the current distinct row into the calculation of the aggregate value. Uses the <a class="el" href="class_field.html">Field</a> classes to get the value from the row. This function is used for AVG/SUM(DISTINCT). For COUNT(DISTINCT) it's called only when there are no blob arguments and the data don't fit into memory (so Unique makes persisted trees on disk).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">element</td><td>pointer to the row data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7bc6a2ac9c7ff433914e145e233067c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bc6a2ac9c7ff433914e145e233067c4">&#9670;&nbsp;</a></span>use_distinct_values</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aggregator_distinct::use_distinct_values</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>When feeding back the data in <a class="el" href="class_aggregator__distinct.html#a474d5f42f784572ea3b7d28be0fc3b2e">endup()</a> from Unique/temp table back to Item_sum::add() methods we must read the data from Unique (and not recalculate the functions that are given as arguments to the aggregate function. This flag is to tell the arg_*() methods to take the data from the Unique instead of calling the relevant val_..() method. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="item__sum_8h_source.html">item_sum.h</a></li>
<li>sql/<a class="el" href="item__sum_8cc.html">item_sum.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
