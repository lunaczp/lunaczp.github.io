<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title>7.2 Primary Optimizations</title>
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../page_styles.css" rel="stylesheet" type="text/css"/>

  


<link href="../calibreHtmlOutBasicCss.css" type="text/css" rel="stylesheet" />

</head>
<body>

<div class="calibreMeta">
  <div class="calibreMetaTitle">
  
  
    
    <h1>
      <a href="../../index.html">MySQL Internals Manual
</a>
    </h1>
    
    
  
  </div>
  <div class="calibreMetaAuthor">
    Oracle

  </div>
</div>

<div class="calibreMain">

  <div class="calibreEbookContent">
    
      <div class="calibreEbNavTop">
        
          <a href="ch07.html" class="calibreAPrev">previous page</a>
        

        
          <a href="ch08.html" class="calibreANext"> next page</a>
        
      </div>
    

    
  <div class="toc">
    <div class="toc">
      <div class="toc">
        <div class="toc">
          <h1 class="title3"><a id="optimizer-primary-optimizations" class="calibre7 pcalibre pcalibre1"></a>7.2 Primary Optimizations</h1>
        </div>
      </div>
    </div>
    <p class="title1">
      This section discusses the most important optimizations performed
      by the server.
    </p>
    <div class="toc">
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <h2 class="title2"><a id="optimizer-handling-constant-relations" class="calibre7 pcalibre pcalibre1"></a>7.2.1 Optimizing Constant Relations</h2>
          </div>
        </div>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-constant-propagation" class="calibre7 pcalibre pcalibre1"></a>7.2.1.1 Constant Propagation</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          A transformation takes place for expressions like this:
        </p>
        <pre class="programlisting">
WHERE column1 = column2 AND column2 = 'x'</pre>
        <p class="title1">
          For such expressions, since it is known that, <span><em class="calibre12">if A=B
          and B=C then A=C</em></span> (the Transitivity Law), the
          transformed condition becomes:
        </p>
        <pre class="programlisting">
WHERE column1='x' AND column2='x'</pre>
        <p class="title1">
          This transformation occurs for <code class="literal1">column1
          &lt;operator&gt; column2</code> conditions if and only if
          <code class="literal1">&lt;operator&gt;</code> is one of these operators:
        </p>
        <pre class="programlisting">=, &lt;, &gt;, &lt;=, &gt;=, &lt;&gt;, &lt;=&gt;, LIKE </pre>
        <p class="title1">
          That is, transitive transformations don't apply for
          <code class="literal1">BETWEEN</code>. Probably they should not apply for
          <code class="literal1">LIKE</code> either, but that's a story for another
          day.
        </p>
        <p class="title1">
          Constant propagation happens in a loop, so the output from one
          <em class="firstterm">propagation step</em> can be input for the
          next step.
        </p>
        <p class="title1">
          <span><em class="calibre12">See</em></span>:
          <code class="filename1">/sql/sql_select.cc</code>,
          <code class="literal1">change_cond_ref_to_const()</code>. Or
          <span><em class="calibre12">See</em></span>:
          <code class="filename1">/sql/sql_select.cc</code>,
          <code class="literal1">propagate_cond_constants()</code>.
        </p>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-eliminating-dead-code" class="calibre7 pcalibre pcalibre1"></a>7.2.1.2 Eliminating Dead Code</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          A transformation takes place for conditions that are always
          true, for example:
        </p>
        <pre class="programlisting">WHERE 0=0 AND column1='y'</pre>
        <p class="title1">
          In this case, the first condition is removed, leaving
        </p>
        <pre class="programlisting">WHERE column1='y'</pre>
        <p class="title1">
          <span><em class="calibre12">See</em></span>:
          <code class="filename1">/sql/sql_select.cc</code>,
          <code class="literal1">remove_eq_conds()</code>.
        </p>
        <p class="title1">
          A transformation also takes place for conditions that are
          always false. For example, consider this
          <code class="literal1">WHERE</code> clause:
        </p>
        <pre class="programlisting">
WHERE (0 = 1 AND s1 = 5) OR s1 = 7
</pre>
        <p class="title1">
          Since the parenthesized part is always false, it is removed,
          reducing this expression to
        </p>
        <pre class="programlisting">WHERE s1 = 7 </pre>
        <p class="title1">
          In some cases, where the <code class="literal1">WHERE</code> clause
          represents an impossible condition, the optimizer might
          eliminate it completely. Consider the following:
        </p>
        <pre class="programlisting">
WHERE (0 = 1 AND s1 = 5)
</pre>
        <p class="title1">
          Because it is never possible for this condition to be true,
          the <code class="literal1">EXPLAIN</code> statement will show the words
          <code class="literal1">Impossible WHERE</code>. Informally, we at MySQL
          say that the <code class="literal1">WHERE</code> has been optimized away.
        </p>
        <p class="title1">
          If a column cannot be <code class="literal1">NULL</code>, the optimizer
          removes any non-relevant <code class="literal1">IS NULL</code>
          conditions. Thus,
        </p>
        <pre class="programlisting">WHERE not_null_column IS NULL </pre>
        <p class="title1">
          is an always-false situation, and
        </p>
        <pre class="programlisting">WHERE not_null_column IS NOT NULL </pre>
        <p class="title1">
          is an always-true situation so such columns are also
          eliminated from the conditional expression. This can be
          tricky. For example, in an <code class="literal1">OUTER JOIN</code>, a
          column which is defined as <code class="literal1">NOT NULL</code> might
          still contain a <code class="literal1">NULL</code>. The optimizer leaves
          <code class="literal1">IS NULL</code> conditions alone in such
          exceptional situations.
        </p>
        <p class="title1">
          The optimizer will not detect all <code class="literal1">Impossible
          WHERE</code> situations — there are too many
          possibilities in this regard. For example:
        </p>
        <pre class="programlisting">
CREATE TABLE Table1 (column1 CHAR(1));
...
SELECT * FROM Table1 WHERE column1 = 'Canada';
</pre>
        <p class="title1">
          The optimizer will not eliminate the condition in the query,
          even though the <code class="literal1">CREATE TABLE</code> definition
          makes it an impossible condition.
        </p>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-folding-constants" class="calibre7 pcalibre pcalibre1"></a>7.2.1.3 Folding of Constants</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          A transformation takes place for this expression:
        </p>
        <pre class="programlisting">
WHERE column1 = 1 + 2 </pre>
        <p class="title1">
          which becomes:
        </p>
        <pre class="programlisting">
WHERE column1 = 3 </pre>
        <p class="title1">
          Before you say, <span class="quote1">“<span class="quote1">but I never would write 1 + 2 in the
          first place</span>”</span>, remember what was said earlier about
          constant propagation. It is quite easy for the optimizer to
          put such expressions together. This process simplifies the
          result.
        </p>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-constants-constant-tables" class="calibre7 pcalibre pcalibre1"></a>7.2.1.4 Constants and Constant Tables</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          A MySQL <em class="firstterm">constant</em> is something more than
          a mere literal in the query. It can also be the contents of a
          <em class="firstterm">constant table</em>, which is defined as
          follows:
        </p>
        <div class="toc">
          <ol class="orderedlist">
            <li class="listitem">
              <p class="calibre9">
              A table with zero rows, or with only one row
            </p>
            </li>
            <li class="listitem">
              <p class="calibre9">
              A table expression that is restricted with a
              <code class="literal">WHERE</code> condition, containing expressions
              of the form <code class="literal">column =
              <em class="replaceable1"><code class="calibre10">constant</code></em></code>, for all the
              columns of the table's primary key, or for all the columns
              of any of the table's unique keys (provided that the
              unique columns are also defined as <code class="literal">NOT
              NULL</code>).
            </p>
            </li>
          </ol>
        </div>
        <p class="title1">
          For example, if the table definition for
          <code class="literal1">Table0</code> contains
        </p>
        <pre class="programlisting">
... PRIMARY KEY (column1,column2) </pre>
        <p class="title1">
          then this expression
        </p>
        <pre class="programlisting">
FROM Table0 ... WHERE column1=5 AND column2=7 ... </pre>
        <p class="title1">
          returns a constant table. More simply, if the table definition
          for <code class="literal1">Table1</code> contains
        </p>
        <pre class="programlisting">... unique_not_null_column INT NOT NULL UNIQUE </pre>
        <p class="title1">
          then this expression
        </p>
        <pre class="programlisting">FROM Table1 ... WHERE unique_not_null_column=5 </pre>
        <p class="title1">
          returns a constant table.
        </p>
        <p class="title1">
          These rules mean that a constant table has at most one row
          value. MySQL will evaluate a constant table in advance, to
          find out what that value is. Then MySQL will plug that value
          into the query. Here's an example:
        </p>
        <pre class="programlisting">
SELECT Table1.unique_not_null_column, Table2.any_column
    FROM Table1, Table2
    WHERE Table1.unique_not_null_column = Table2.any_column
    AND Table1.unique_not_null_column = 5;
</pre>
        <p class="title1">
          When evaluating this query, MySQL first finds that table
          <code class="literal1">Table1</code> after restriction with
          <code class="literal1">Table1.unique_not_null_column</code> is a constant
          table according to the second definition above. So it
          retrieves that value.
        </p>
        <p class="title1">
          If the retrieval fails (there is no row in the table with
          <code class="literal1">unique_not_null_column</code> =
          <code class="literal1">EXPLAIN</code> for the statement:
        </p>
        <pre class="programlisting">Impossible WHERE noticed after reading const tables </pre>
        <p class="title1">
          Alternatively, if the retrieval succeeds (there is exactly one
          row in the table with
          <code class="literal1">unique_not_null_column</code> = MySQL transforms
          the query to this:
        </p>
        <pre class="programlisting">
SELECT 5, Table2.any_column
    FROM Table1, Table2
    WHERE 5 = Table2.any_column
    AND 5 = 5;
</pre>
        <p class="title1">
          Actually this is a grand-combination example. The optimizer
          does some of the transformation because of constant
          propagation, which we described earlier. By the way, we
          described constant propagation first because it happens
          happens <span><em class="calibre12">before</em></span> MySQL figures out what the
          constant tables are. The sequence of optimizer steps sometimes
          makes a difference.
        </p>
        <p class="title1">
          Although many queries have no constant-table references, it
          should be kept in mind that whenever the word
          <span><em class="calibre12">constant</em></span> is mentioned hereafter, it
          refers either to a literal or to the contents of a constant
          table.
        </p>
        <p class="title1">
          <span><em class="calibre12">See</em></span>:
          <code class="filename1">/sql/sql_select.cc</code>,
          <code class="literal1">make_join_statistics()</code>.
        </p>
      </div>
    </div>
    <div class="toc">
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <h2 class="title2"><a id="optimizer-joins" class="calibre7 pcalibre pcalibre1"></a>7.2.2 Optimizing Joins</h2>
          </div>
        </div>
      </div>
      <p class="title1">
        This section discusses the various methods used to optimize
        joins.
      </p>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-determining-join-type" class="calibre7 pcalibre pcalibre1"></a>7.2.2.1 Determining the Join Type</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          When evaluating a conditional expression, MySQL decides what
          <span><em class="calibre12">join type</em></span> the expression has. (Again:
          despite the word join, this applies for all conditional
          expressions, not just join expressions. A term like access
          type would be clearer.) These are the documented join types,
          in order from best to worst:
        </p>
        <div class="toc">
          <ul class="itemizedlist">
            <li class="listitem1">
              <p class="calibre9">
              <code class="literal">system</code> : a system table which is a
              constant table
            </p>
            </li>
            <li class="listitem1">
              <p class="calibre9">
              <code class="literal">const</code> : a constant table
            </p>
            </li>
            <li class="listitem1">
              <p class="calibre9">
              <code class="literal">eq_ref</code> : a unique or primary index with
              an equality relation
            </p>
            </li>
            <li class="listitem1">
              <p class="calibre9">
              <code class="literal">ref</code> : an index with an equality
              relation, where the index value cannot be
              <code class="literal">NULL</code>
            </p>
            </li>
            <li class="listitem1">
              <p class="calibre9">
              <code class="literal">ref_or_null</code> : an index with an equality
              relation, where it is possible for the index value to be
              <code class="literal">NULL</code>
            </p>
            </li>
            <li class="listitem1">
              <p class="calibre9">
              <code class="literal">range</code> : an index with a relation such
              as <code class="literal">BETWEEN</code>, <code class="literal">IN</code>,
              <code class="literal">&gt;=</code>, <code class="literal">LIKE</code>, and so
              on.
            </p>
            </li>
            <li class="listitem1">
              <p class="calibre9">
              <code class="literal">index</code> : a sequential scan on an index
            </p>
            </li>
            <li class="listitem1">
              <p class="calibre9">
              <code class="literal">ALL</code> : a sequential scan of the entire
              table
            </p>
            </li>
          </ul>
        </div>
        <p class="title1">
          <span><em class="calibre12">See</em></span>:
          <code class="literal1">/sql/sql_select.h</code>, <code class="literal1">enum
          join_type{}</code>. Notice that there are a few other
          (undocumented) join types too, for subqueries.
        </p>
        <p class="title1">
          The optimizer can use the join type to pick a <span><em class="calibre12">driver
          expression</em></span>. For example, consider this query:
        </p>
        <pre class="programlisting">
SELECT *
FROM Table1
WHERE indexed_column = 5 AND unindexed_column = 6
</pre>
        <p class="title1">
          Since <code class="literal1">indexed_column</code> has a better join
          type, it is more likely to be the driver. You'll see various
          exceptions as this description proceeds, but this is a simple
          first rule.
        </p>
        <p class="title1">
          What is significant about a driver? Consider that there are
          two execution paths for the query:
        </p>
        <p class="title1">
          <span><em class="calibre12">The Bad Execution Plan</em></span>: Read every row in
          the table. (This is called a <span><em class="calibre12">sequential
          scan</em></span> of <code class="literal1">Table1</code> or simply
          <span><em class="calibre12">table scan</em></span>.) For each row, examine the
          values in <code class="literal1">indexed_column</code> and in
          <code class="literal1">unindexed_column</code>, to see if they meet the
          conditions.
        </p>
        <p class="title1">
          <span><em class="calibre12">The Good Execution Plan</em></span>: Via the index,
          look up the rows which have <code class="literal1">indexed_column</code>
          = This is called an <span><em class="calibre12">indexed search</em></span>.) For
          each row, examine the value in unindexed_column to see if it
          meets the condition.
        </p>
        <p class="title1">
          An indexed search generally involves fewer accesses than a
          sequential scan, and far fewer accesses if the table is large
          but the index is unique. That is why it is better to access
          with the good execution plan, and why it is often good to
          choose <code class="literal1">indexed_column</code> as the driver.
        </p>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-joins-access-methods" class="calibre7 pcalibre pcalibre1"></a>7.2.2.2 Joins and Access Methods</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          Bad join choices can cause more damage than bad choices in
          single-table searches, so MySQL developers have spent
          proportionally more time making sure that the tables in a
          query are joined in an optimal order and that optimal access
          methods (often called <em class="firstterm">access paths</em>) are
          chosen to retrieve table data. A combination of a fixed order
          in which tables are joined and the corresponding table access
          methods for each table is called <span><em class="calibre12">query execution
          plan (QEP)</em></span>. The goal of the query optimizer is to
          find an optimal QEP among all such possible plans. There are
          several general ideas behind join optimization.
        </p>
        <p class="title1">
          Each plan (or part of plan) is assigned a
          <span><em class="calibre12">cost</em></span>. The cost of a plan reflects roughly
          the resources needed to compute a query according to the plan,
          where the main factor is the number of rows that will be
          accessed while computing a query. Once we have a way to assign
          costs to different QEPs we have a way to compare them. Thus,
          the goal of the optimizer is to find a QEP with minimal cost
          among all possible plans.
        </p>
        <p class="title1">
          In MySQL, the search for an optimal QEP is performed in a
          bottom-up manner. The optimizer first considers all plans for
          one table, then all plans for two tables, and so on, until it
          builds a complete optimal QEP. Query plans that consist of
          only some of the tables (and predicates) in a query are called
          <span><em class="calibre12">partial plans</em></span>. The optimizer relies on
          the fact that the more tables that are added to a partial
          plan, the greater its cost. This allows the optimizer to
          expand with more tables only the partial plans with lower cost
          than the current best complete plan.
        </p>
        <p class="title1">
          The key routine that performs the search for an optimal QEP is
          <code class="literal1">sql/sql_select.cc</code>,
          <code class="literal1">find_best()</code>. It performs an exhaustive
          search of all possible plans and thus guarantees it will find
          an optimal one.
        </p>
        <p class="title1">
          Below we represent <code class="literal1">find_best()</code> in an
          extremely free translation to pseudocode. It is recursive, so
          some input variables are labeled so far to indicate that they
          come from a previous iteration.
        </p>
        <pre class="programlisting">
remaining_tables = {t1, ..., tn}; /* all tables referenced in a query */

procedure find_best(
   partial_plan in,      /* in, partial plan of tables-joined-so-far */
   partial_plan_cost,    /* in, cost of partial_plan */
   remaining_tables,     /* in, set of tables not referenced in partial_plan */
   best_plan_so_far,     /* in/out, best plan found so far */
   best_plan_so_far_cost)/* in/out, cost of best_plan_so_far */
{
   for each table T from remaining_tables
   {
     /* Calculate the cost of using table T. Factors that the
        optimizer takes into account may include:
          Many rows in table (bad)
          Many key parts in common with tables so far (very good)
          Restriction mentioned in the WHERE clause (good)
          Long key (good)
          Unique or primary key (good)
          Full-text key (bad)
        Other factors that may at some time be worth considering:
          Many columns in key
          Short average/maximum key length
          Small table file
          Few levels in index
          All ORDER BY / GROUP columns come from this table */
     cost = complex-series-of-calculations;
     /* Add the cost to the cost so far. */
     partial_plan_cost+= cost;

     if (partial_plan_cost &gt;= best_plan_so_far_cost)
       /* partial_plan_cost already too great, stop search */
       continue;

     partial_plan= expand partial_plan by best_access_method;
     remaining_tables= remaining_tables - table T;
     if (remaining_tables is not an empty set)
     {
       find_best(partial_plan, partial_plan_cost,
                 remaining_tables,
                 best_plan_so_far, best_plan_so_far_cost);
     }
     else
     {
       best_plan_so_far_cost= partial_plan_cost;
       best_plan_so_far= partial_plan;
     }
   }
}
</pre>
        <p class="title1">
          Here the optimizer applies a <em class="firstterm">depth-first search
          algorithm</em>. It performs estimates for every table
          in the <code class="literal1">FROM</code> clause. It will stop a search
          early if the estimate becomes worse than the best estimate so
          far. The order of scanning will depend on the order that the
          tables appear in the <code class="literal1">FROM</code> clause.
        </p>
        <p class="title1">
          <span><em class="calibre12">See</em></span>: <code class="filename1">/sql/table.h</code>,
          <code class="literal1">struct st_table</code>.
        </p>
        <p class="title1">
          <code class="literal1">ANALYZE TABLE</code> may affect some of the
          factors that the optimizer considers.
        </p>
        <p class="title1">
          See also: <code class="filename1">/sql/sql_sqlect.cc</code>,
          <code class="literal1">make_join_statistics()</code>.
        </p>
        <p class="title1">
          The straightforward use of <code class="literal1">find_best()</code> and
          <code class="literal1">greedy_search()</code> will not apply for
          <code class="literal1">LEFT JOIN</code> or <code class="literal1">RIGHT JOIN</code>.
          For example, starting with MySQL 4.0.14, the optimizer may
          change a left join to a straight join and swap the table order
          in some cases. See also
          <a class="pcalibre pcalibre1" href="http://dev.mysql.com/doc/refman/5.7/en/left-join-optimization.html">LEFT JOIN and RIGHT JOIN Optimization</a>.
        </p>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-range-join-type" class="calibre7 pcalibre pcalibre1"></a>7.2.2.3 The range Join Type</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          Some conditions can work with indexes, but over a (possibly
          wide) range of keys. These are known as
          <em class="firstterm">range</em> conditions, and are most often
          encountered with expressions involving these operators:
          <code class="literal1">&gt;, &gt;=, &lt;, &lt;=, IN, LIKE, BETWEEN</code>
        </p>
        <p class="title1">
          To the optimizer, this expression:
        </p>
        <pre class="programlisting">
column1 IN (1,2,3) </pre>
        <p class="title1">
          is the same as this one:
        </p>
        <pre class="programlisting">
column1 = 1 OR column1 = 2 OR column1 = 3 </pre>
        <p class="title1">
          and MySQL treats them the same — there is no need to
          change IN to OR for a query, or vice versa.
        </p>
        <p class="title1">
          The optimizer will use an index (range search) for
        </p>
        <pre class="programlisting">
column1 LIKE 'x%'</pre>
        <p class="title1">
          but not for
        </p>
        <pre class="programlisting">
column1 LIKE '%x'</pre>
        <p class="title1">
          That is, there is no range search if the first character in
          the pattern is a wildcard.
        </p>
        <p class="title1">
          To the optimizer,
        </p>
        <pre class="programlisting">
column1 BETWEEN 5 AND 7 </pre>
        <p class="title1">
          is the same as this expression
        </p>
        <pre class="programlisting">
column1 &gt;= 5 AND column1 &lt;= 7 </pre>
        <p class="title1">
          and again, MySQL treats both expressions the same.
        </p>
        <p class="title1">
          The optimizer may change a <code class="literal1">Range</code> to an
          <code class="literal1">ALL</code> join type if a condition would examine
          too many index keys. Such a change is particularly likely for
          <code class="literal1">&lt;</code> and <code class="literal1">&gt;</code> conditions
          and multiple-level secondary indexes.
          <span><em class="calibre12">See</em></span>: (for <code class="literal1">MyISAM</code>
          indexes) <code class="literal1">/myisam/mi_range.c</code>,
          <code class="literal1">mi_records_in_range()</code>.
        </p>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-index-join-type" class="calibre7 pcalibre pcalibre1"></a>7.2.2.4 The index Join Type</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          Consider this query:
        </p>
        <pre class="programlisting">SELECT column1 FROM Table1; </pre>
        <p class="title1">
          If <code class="literal1">column1</code> is indexed, then the optimizer
          may choose to retrieve the values from the index rather than
          from the table. An index which is used this way is called a
          <em class="firstterm">covering index</em> in most texts. MySQL
          simply uses the word <span class="quote1">“<span class="quote1">index</span>”</span> in
          <code class="literal1">EXPLAIN</code> descriptions.
        </p>
        <p class="title1">
          For this query:
        </p>
        <pre class="programlisting">SELECT column1, column2 FROM Table1; </pre>
        <p class="title1">
          the optimizer will use <code class="literal1">join type = index</code>
          only if the index has this definition:
        </p>
        <pre class="programlisting">
CREATE INDEX ... ON Table1 (column1, column2); </pre>
        <p class="title1">
          In other words, all columns in the select list must be in the
          index. (The order of the columns in the index does not
          matter.) Thus it might make sense to define a multiple-column
          index strictly for use as a covering index, regardless of
          search considerations.
        </p>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-index-merge-join-type" class="calibre7 pcalibre pcalibre1"></a>7.2.2.5 The Index Merge Join Type</h3>
            </div>
          </div>
        </div>
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <h4 class="title5"><a id="optimizer-index-merge-overview" class="calibre7 pcalibre pcalibre1"></a>7.2.2.5.1 Overview</h4>
              </div>
            </div>
          </div>
          <p class="title1">
            <code class="literal1">Index Merge</code> is used when table condition
            can be converted to form:
          </p>
          <pre class="programlisting">
cond_1 OR cond_2 ... OR cond_N </pre>
          <p class="title1">
            The conditions for conversion are that each
            <code class="literal1">cond_i</code> can be used for a range scan, and
            no pair (<code class="literal1">cond_i</code>,
            <code class="literal1">cond_j</code>) uses the same index. (If
            <code class="literal1">cond_i</code> and <code class="literal1">cond_j</code> use
            the same index, then <code class="literal1">cond_i OR cond_j</code> can
            be combined into a single range scan and no merging is
            necessary.)
          </p>
          <p class="title1">
            For example, <code class="literal1">Index Merge</code> can be used for
            the following queries:
          </p>
          <pre class="programlisting">
SELECT * FROM t WHERE key1=c1 OR key2&lt;c2 OR key3 IN (c3,c4);

SELECT * FROM t WHERE (key1=c1 OR key2&lt;c2) AND nonkey=c3; </pre>
          <p class="title1">
            <code class="literal1">Index Merge</code> is implemented as a
            <span class="quote1">“<span class="quote1">container</span>”</span> for range key scans constructed
            from <code class="literal1">cond_i</code> conditions. When doing
            <code class="literal1">Index Merge</code>, MySQL retrieves rows for
            each of the keyscans and then runs them through a duplicate
            elimination procedure. Currently the
            <code class="literal1">Unique</code> class is used for duplicate
            elimination.
          </p>
        </div>
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <h4 class="title5"><a id="optimizer-index-merge-optimizer" class="calibre7 pcalibre pcalibre1"></a>7.2.2.5.2 Index Merge Optimizer</h4>
              </div>
            </div>
          </div>
          <p class="title1">
            A single <code class="literal1">SEL_TREE</code> object cannot be
            constructed for conditions that have different members of
            keys in the <code class="literal1">OR</code> clause, like in condition:
          </p>
          <pre class="programlisting">
key1 &lt; c1 OR key2 &lt; c2 </pre>
          <p class="title1">
            Beginning with MySQL 5.0, these conditions are handled with
            the <code class="literal1">Index Merge</code> method, and its range
            optimizer structure, class <code class="literal1">SEL_IMERGE</code>.
            <code class="literal1">SEL_IMERGE</code> represents a disjunction of
            several <code class="literal1">SEL_TREE</code> objects, which can be
            expressed as:
          </p>
          <pre class="programlisting">
sel_imerge_cond = (t_1 OR t_1 OR ... OR t_n) </pre>
          <p class="title1">
            where each of <code class="literal1">t_i</code> stands for a
            <code class="literal1">SEL_TREE</code> object, and no pair
            (<code class="literal1">t_i</code>, <code class="literal1">t_j</code>) of distinct
            <code class="literal1">SEL_TREE</code> objects can be combined into
            single <code class="literal1">SEL_TREE</code> object.
          </p>
          <p class="title1">
            The current implementation builds
            <code class="literal1">SEL_IMERGE</code> only if no single
            <code class="literal1">SEL_TREE</code> object can be built for the part
            of the query condition it has analyzed, and discards
            <code class="literal1">SEL_TREE</code> immediately if it discovers that
            a single <code class="literal1">SEL_TREE</code> object can be
            constructed. This is actually a limitation, and can cause
            worse row retrieval strategy to be used. E.g. for query:
          </p>
          <pre class="programlisting">
SELECT * FROM t WHERE (goodkey1=c1 OR goodkey1=c2) AND badkey=c3 </pre>
          <p class="title1">
            scan on <code class="literal1">badkey</code> will be chosen even if
            <code class="literal1">Index Merge</code> on
            (<code class="literal1">goodkey1</code>, <code class="literal1">goodkey</code>)
            would be faster.
          </p>
          <p class="title1">
            The <code class="literal1">Index Merge</code> optimizer collects a list
            of possible ways to access rows with <code class="literal1">Index
            Merge</code>. This list of <code class="literal1">SEL_IMERGE</code>
            structures represents the following condition:
          </p>
          <pre class="programlisting">
  (t_11 OR t_12 OR ... OR t_1k) AND
  (t_21 OR t_22 OR ... OR t_2l) AND
   ...                          AND
  (t_M1 OR t_M2 OR ... OR t_mp)
</pre>
          <p class="title1">
            where <code class="literal1">t_ij</code> is one
            <code class="literal1">SEL_TREE</code> and one line is for one
            <code class="literal1">SEL_IMERGE</code> object.
          </p>
          <p class="title1">
            The <code class="literal1">SEL_IMERGE</code> object with
            <span><em class="calibre12">minimal</em></span> cost is used for row retrieval.
          </p>
          <p class="title1">
            In <code class="literal1">sql/opt_range.cc</code>, see
            <code class="literal1">imerge_list_and_list()</code>,
            <code class="literal1">imerge_list_or_list()</code>, and
            <code class="literal1">SEL_IMERGE</code> class member functions for
            more details of <code class="literal1">Index Merge</code> construction.
          </p>
          <p class="title1">
            See the <code class="literal1">get_index_merge_params</code> function
            in the same file for <code class="literal1">Index Merge</code> cost
            calculation algorithm.
          </p>
        </div>
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <h4 class="title5"><a id="optimizer-index-merge-range-optimizer" class="calibre7 pcalibre pcalibre1"></a>7.2.2.5.3 The range Optimizer</h4>
              </div>
            </div>
          </div>
          <p class="title1">
            For <code class="literal1">range</code> queries, the MySQL optimizer
            builds a <code class="literal1">SEL_TREE</code> object which represents
            a condition in this form:
          </p>
          <pre class="programlisting">
range_cond = (cond_key_1 AND cond_key_2 AND ... AND cond_key_N) </pre>
          <p class="title1">
            Each of <code class="literal1">cond_key_i</code> is a condition that
            refers to components of one key. MySQL creates a
            <code class="literal1">cond_key_i</code> condition for each of the
            usable keys. Then the cheapest condition
            <code class="literal1">cond_key_i</code> is used for doing range scan.
          </p>
          <p class="title1">
            A single <code class="literal1">cond_key_i</code> condition is
            represented by a pointer-linked network of
            <code class="literal1">SEL_ARG</code> objects. Each
            <code class="literal1">SEL_ARG</code> object refers to particular part
            of the key and represents the following condition:
          </p>
          <pre class="programlisting"> sel_arg_cond= (inf_val &lt; key_part_n AND key_part_n &lt; sup_val) (1)
                AND next_key_part_sel_arg_cond                  (2)
                OR left_sel_arg_cond                            (3)
                OR right_sel_arg_cond                           (4)
</pre>
          <div class="toc">
            <ol class="orderedlist">
              <li class="listitem">
                <p class="calibre9">
                is for an interval, possibly without upper or lower
                bound, either including or not including boundary
                values.
              </p>
              </li>
              <li class="listitem">
                <p class="calibre9">
                is for a <code class="literal">SEL_ARG</code> object with
                condition on next key component.
              </p>
              </li>
              <li class="listitem">
                <p class="calibre9">
                is for a <code class="literal">SEL_ARG</code> object with an
                interval on the same field as this
                <code class="literal">SEL_ARG</code> object. Intervals between the
                current and left objects are disjoint and
                <code class="literal">left_sel_arg_cond.sup_val &lt;=
                inf_val</code>.
              </p>
              </li>
              <li class="listitem">
                <p class="calibre9">
                is for a <code class="literal">SEL_ARG</code> object with an
                interval on the same field as this
                <code class="literal">SEL_ARG</code> object. Intervals between the
                current and right objects are disjoint and
                <code class="literal">left_sel_arg_cond.min_val &gt;=
                max_val</code>.
              </p>
              </li>
            </ol>
          </div>
          <p class="title1">
            MySQL is able to convert arbitrary-depth nested AND-OR
            conditions to the above conjunctive form.
          </p>
        </div>
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <h4 class="title5"><a id="optimizer-index-merge-row-retrieval-algorithm" class="calibre7 pcalibre pcalibre1"></a>7.2.2.5.4 Row Retrieval Algorithm</h4>
              </div>
            </div>
          </div>
          <p class="title1">
            <code class="literal1">Index Merge</code> works in two steps:
          </p>
          <p class="title1">
            Preparation step:
          </p>
          <pre class="programlisting">
activate 'index only';
foreach key_i in (key_scans \ clustered_pk_scan)
{
  while (retrieve next (key, rowid) pair from key_i)
  {
    if (no clustered PK scan || 
        row doesn't match clustered PK scan condition)
      put rowid into Unique;
  }
}  
deactivate 'index only';
</pre>
          <p class="title1">
            Row retrieval step:
          </p>
          <pre class="programlisting">
for each rowid in Unique
{
  retrieve row and pass it to output;
}
if (clustered_pk_scan)
{
  while (retrieve next row for clustered_pk_scan)
   pass row to output;
}
</pre>
          <p class="title1">
            <span><em class="calibre12">See</em></span>:
            <code class="filename1">sql/opt_range.cc</code>,
            <code class="literal1">QUICK_INDEX_MERGE_SELECT</code> class members
            for <code class="literal1">Index Merge</code> row retrieval code.
          </p>
        </div>
      </div>
    </div>
    <div class="toc">
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <h2 class="title2"><a id="optimizer-transpositions" class="calibre7 pcalibre pcalibre1"></a>7.2.3 Transpositions</h2>
          </div>
        </div>
      </div>
      <p class="title1">
        MySQL supports <em class="firstterm">transpositions</em> (reversing
        the order of operands around a relational operator) for simple
        expressions only. In other words:
      </p>
      <pre class="programlisting">WHERE - 5 = column1 </pre>
      <p class="title1">
        becomes:
      </p>
      <pre class="programlisting">WHERE column1 = -5 </pre>
      <p class="title1">
        However, MySQL does not support transpositions where arithmetic
        exists. Thus:
      </p>
      <pre class="programlisting">WHERE 5 = -column1 </pre>
      <p class="title1">
        is <span><em class="calibre12">not</em></span> treated the same as:
      </p>
      <pre class="programlisting">WHERE column1 = -5 </pre>
      <p class="title1">
        Transpositions to expressions of the form <code class="literal1">column =
        constant</code> are ideal for index lookups. If an expression
        of this form refers to an indexed column, then MySQL always uses
        the index, regardless of the table size.
        (<span><strong class="calibre13">Exception</strong></span>: If the table has
        only zero rows or only one row, it is a constant table and
        receives special treatment. See
        <a class="pcalibre pcalibre1" href="ch07s02.html#optimizer-constants-constant-tables" title="7.2.1.4 Constants and Constant Tables">Section 7.2.1.4, “Constants and Constant Tables”</a>.)
      </p>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-and-relations" class="calibre7 pcalibre pcalibre1"></a>7.2.3.1 AND Relations</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          An <code class="literal1">AND</code>ed search has the form
          <em class="replaceable"><code class="calibre11">condition1</code></em> AND
          <code class="literal1">condition2</code>, as in this example:
        </p>
        <pre class="programlisting">WHERE column1 = 'x' AND column2 = 'y'</pre>
        <p class="title1">
          Here, the optimizer's decision process can be described as
          follows:
        </p>
        <div class="toc">
          <ol class="orderedlist">
            <li class="listitem">
              <p class="calibre9">
              If (neither condition is indexed) use sequential scan.
            </p>
            </li>
            <li class="listitem">
              <p class="calibre9">
              Otherwise, if (one condition has better join type) then
              pick a driver based on join type (see
              <a class="pcalibre pcalibre1" href="ch07s02.html#optimizer-determining-join-type" title="7.2.2.1 Determining the Join Type">Section 7.2.2.1, “Determining the Join Type”</a>).
            </p>
            </li>
            <li class="listitem">
              <p class="calibre9">
              Otherwise, since (both conditions are indexed and have
              equal join type) pick a driver based on the first index
              that was created.
            </p>
            </li>
          </ol>
        </div>
        <p class="title1">
          The optimizer can also choose to perform an
          <code class="literal1">index_merge</code> index intersection, as
          described in
          <a class="pcalibre pcalibre1" href="ch07s02.html#optimizer-index-merge-optimizer" title="7.2.2.5.2 Index Merge Optimizer">Section 7.2.2.5.2, “Index Merge Optimizer”</a>.
        </p>
        <p class="title1">
          Here's an example:
        </p>
        <pre class="programlisting">
CREATE TABLE Table1 (s1 INT, s2 INT);
CREATE INDEX Index1 ON Table1 (s2);
CREATE INDEX Index2 ON Table1 (s1);
...
SELECT * FROM Table1 WHERE s1 = 5 AND s2 = 5;
</pre>
        <p class="title1">
          When choosing a strategy to solve this query, the optimizer
          picks s2 = 5 as the driver because the index for s2 was
          created first. Regard this as an accidental effect rather than
          a rule, it could change at any moment.
        </p>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-or-relations" class="calibre7 pcalibre pcalibre1"></a>7.2.3.2 OR Relations</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          An ORed search has the form "condition1" OR "condition2", as
          in this example:
        </p>
        <pre class="programlisting">WHERE column1 = 'x' OR column2 = 'y'</pre>
        <p class="title1">
          Here the optimizer's decision is to use a sequential scan.
        </p>
        <p class="title1">
          There is also an option to use index merge under such
          circumstances. For more information, see
          <a class="pcalibre pcalibre1" href="ch07s02.html#optimizer-index-merge-overview" title="7.2.2.5.1 Overview">Section 7.2.2.5.1, “Overview”</a> and
          <a class="pcalibre pcalibre1" href="http://dev.mysql.com/doc/refman/5.7/en/index-merge-optimization.html">Index Merge Optimization</a>.
        </p>
        <p class="title1">
          The above warning does not apply if the same column is used in
          both conditions. For example:
        </p>
        <pre class="programlisting">WHERE column1 = 'x' OR column1 = 'y'</pre>
        <p class="title1">
          In such a case, the search is indexed because the expression
          is a range search. This subject will be revisited during the
          discussion of the IN predicate.
        </p>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-union-queries" class="calibre7 pcalibre pcalibre1"></a>7.2.3.3 UNION Queries</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          All <code class="literal1">SELECT</code> statements within a
          <code class="literal1">UNION</code> are optimized separately. Therefore,
          for this query:
        </p>
        <pre class="programlisting">
SELECT * FROM Table1 WHERE column1 = 'x'
UNION ALL
SELECT * FROM TABLE1 WHERE column2 = 'y'
</pre>
        <p class="title1">
          if both <code class="literal1">column1</code> and
          <code class="literal1">column2</code> are indexed, then each
          <code class="literal1">SELECT</code> is done using an indexed search, and
          the result sets are merged. Notice that this query might
          produce the same results as the query used in the
          <code class="literal1">OR</code> example, which uses a sequential scan.
        </p>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-not-relations" class="calibre7 pcalibre pcalibre1"></a>7.2.3.4 NOT (&lt;&gt;) Relations</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          It is a logical rule that
        </p>
        <pre class="programlisting">column1 &lt;&gt; 5 </pre>
        <p class="title1">
          is the same as
        </p>
        <pre class="programlisting">column1 &lt; 5 OR column1 &gt; 5 </pre>
        <p class="title1">
          However, MySQL does not transform in this circumstance. If you
          think that a range search would be better, then you should do
          your own transforming in such cases.
        </p>
        <p class="title1">
          It is also a logical rule that
        </p>
        <pre class="programlisting">WHERE NOT (column1 != 5) </pre>
        <p class="title1">
          is the same as
        </p>
        <pre class="programlisting">WHERE column1 = 5 </pre>
        <p class="title1">
          However, MySQL does not transform in this circumstance either.
        </p>
        <p class="title1">
          We expect to add optimizations for both the previous cases.
        </p>
      </div>
    </div>
    <div class="toc">
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <h2 class="title2"><a id="optimizer-order-by-clauses" class="calibre7 pcalibre pcalibre1"></a>7.2.4 ORDER BY Clauses</h2>
          </div>
        </div>
      </div>
      <p class="title1">
        In general, the optimizer will skip the sort procedure for the
        <code class="literal1">ORDER BY</code> clause if it sees that the rows will
        be in order anyway. But let's examine some exceptional
        situations.
      </p>
      <p class="title1">
        For the query:
      </p>
      <pre class="programlisting">SELECT column1 FROM Table1 ORDER BY 'x'; </pre>
      <p class="title1">
        the optimizer will throw out the <code class="literal1">ORDER BY</code>
        clause. This is another example of dead code elimination.
      </p>
      <p class="title1">
        For the query:
      </p>
      <pre class="programlisting">SELECT column1 FROM Table1 ORDER BY column1; </pre>
      <p class="title1">
        the optimizer will use an index on <code class="literal1">column1</code>,
        if it exists.
      </p>
      <p class="title1">
        For the query:
      </p>
      <pre class="programlisting">SELECT column1 FROM Table1 ORDER BY column1+1; </pre>
      <p class="title1">
        the optimizer will use an index on <code class="literal1">column1</code>,
        if it exists. But don't let that fool you! The index is only for
        finding the values. (It's cheaper to do a sequential scan of the
        index than a sequential scan of the table, that's why
        <code class="literal1">index</code> is a better join type than
        <code class="literal1">ALL</code> see
        [optimizer.html#optimizer-index-join-type Section??3.2.2.4, The
        <code class="literal1">index</code> Join Type].) There will still be a full
        sort of the results.
      </p>
      <p class="title1">
        For the query:
      </p>
      <pre class="programlisting">SELECT * FROM Table1 WHERE column1 &gt; 'x' AND column2 &gt; 'x' ORDER BY column2; </pre>
      <p class="title1">
        if both <code class="literal1">column1</code> and
        <code class="literal1">column2</code> are indexed, the optimizer will
        choose an index on ... <code class="literal1">column1</code>. The fact that
        ordering takes place by <code class="literal1">column2</code> values does
        not affect the choice of driver in this case.
      </p>
      <p class="title1">
        <span><em class="calibre12">See</em></span>:
        <code class="filename1">/sql/sql_select.cc</code>,
        <code class="literal1">test_if_order_by_key()</code>, and
        <code class="filename1">/sql/sql_select.cc</code>,
        <code class="literal1">test_if_skip_sort_order()</code>.
      </p>
      <p class="title1">
        <a class="pcalibre pcalibre1" href="http://dev.mysql.com/doc/refman/5.7/en/order-by-optimization.html">ORDER BY Optimization</a>, provides a description
        of the internal sort procedure which we will not repeat here,
        but urge you to read, because it describes how the buffering and
        the quicksort mechanisms operate.
      </p>
      <p class="title1">
        <span><em class="calibre12">See</em></span>:
        <code class="filename1">/sql/sql_select.cc</code>,
        <code class="literal1">create_sort_index()</code>.
      </p>
    </div>
    <div class="toc">
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <h2 class="title2"><a id="optimizer-group-by-related-conditions" class="calibre7 pcalibre pcalibre1"></a>7.2.5 GROUP BY and Related Conditions</h2>
          </div>
        </div>
      </div>
      <p class="title1">
        These are the main optimizations that take place for
        <code class="literal1">GROUP BY</code> and related items
        (<code class="literal1">HAVING</code>, <code class="literal1">COUNT()</code>,
        <code class="literal1">MAX()</code>, <code class="literal1">MIN()</code>,
        <code class="literal1">SUM()</code>, <code class="literal1">AVG()</code>,
        <code class="literal1">DISTINCT()</code>).
      </p>
      <div class="toc">
        <ul class="itemizedlist">
          <li class="listitem1">
            <p class="calibre9">
            <code class="literal">GROUP BY</code> will use an index, if one
            exists.
          </p>
          </li>
          <li class="listitem1">
            <p class="calibre9">
            <code class="literal">GROUP BY</code> will use sorting, if there is no
            index. The optimizer may choose to use a hash table.
          </p>
          </li>
          <li class="listitem1">
            <p class="calibre9">
            For the case <code class="literal">GROUP BY x ORDER BY x</code>, the
            optimizer will realize that the <code class="literal">ORDER BY</code>
            is unnecessary, because the <code class="literal">GROUP BY</code>
            comes out in order by <code class="literal">x</code>.
          </p>
          </li>
          <li class="listitem1">
            <p class="calibre9">
            The optimizer contains code for shifting certain
            <code class="literal">HAVING</code> conditions to the
            <code class="literal">WHERE</code> clause; however, this code is not
            operative at time of writing. <span><em class="calibre14">See</em></span>:
            <code class="literal">/sql/sql_select.cc</code>,
            <code class="literal">JOIN::optimize()</code>, after <code class="literal">#ifdef
            HAVE_REF_TO_FIELDS</code>.
          </p>
          </li>
          <li class="listitem1">
            <p class="calibre9">
            If the table handler has a quick row-count available, then
            the query

</p>
            <pre class="programlisting">SELECT COUNT(*) FROM Table1; </pre>
            <p class="calibre9">

            gets the count without going through all the rows. This is
            true for <code class="literal">MyISAM</code> tables, but not for
            <code class="literal">InnoDB</code> tables. Note that the query

</p>
            <pre class="programlisting">SELECT COUNT(column1) FROM Table1; </pre>
            <p class="calibre9">

            is not subject to the same optimization, unless
            <code class="literal">column1</code> is defined as <code class="literal">NOT
            NULL</code>.
          </p>
          </li>
          <li class="listitem1">
            <p class="calibre9">
            New optimizations exist for <code class="literal">MAX()</code> and
            <code class="literal">MIN()</code>. For example, consider the query

</p>
            <pre class="programlisting">
SELECT MAX(column1)
  FROM Table1
  WHERE column1 &lt; 'a';
</pre>
            <p class="calibre9">

            If <code class="literal">column1</code> is indexed, then it's easy to
            find the highest value by looking for 'a' in the index and
            going back to the key before that.
          </p>
          </li>
          <li class="listitem1">
            <p class="calibre9">
            The optimizer transforms queries of the form

</p>
            <pre class="programlisting">SELECT DISTINCT column1 FROM Table1; </pre>
            <p class="calibre9">

            to

</p>
            <pre class="programlisting">SELECT column1 FROM Table1 GROUP BY column1; </pre>
            <p class="calibre9">

            if and only if both of these conditions are true:

            </p>
            <div class="toc">
              <ol class="orderedlist1">
                <li class="listitem3">
                  <p class="calibre9">
                  The <code class="literal">GROUP BY</code> can be done with an
                  index. (This implies that there is only one table in
                  the <code class="literal">FROM</code> clause, and no
                  <code class="literal">WHERE</code> clause.)
                </p>
                </li>
                <li class="listitem3">
                  <p class="calibre9">
                  There is no <code class="literal">LIMIT</code> clause.
                </p>
                </li>
              </ol>
            </div>
            <p class="calibre9">
          </p>
          </li>
        </ul>
      </div>
      <p class="title1">
        Because <code class="literal1">DISTINCT</code> is not always transformed to
        <code class="literal1">GROUP BY</code>, do not expect that queries with
        <code class="literal1">DISTINCT</code> will always cause ordered result
        sets. (You can, however, rely on that rule with <code class="literal1">GROUP
        BY</code>, unless the query includes <code class="literal1">ORDER BY
        NULL</code>.)
      </p>
      <p class="title1">
        <span><em class="calibre12">See</em></span>: <code class="literal1">/sql/sql_select.cc</code>,
        <code class="literal1">opt_sum_query()</code>, and
        <code class="literal1">/sql/sql_select.cc</code>,
        <code class="literal1">remove_duplicates()</code>.
      </p>
    </div>
    <div class="toc">
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <h2 class="title2"><a id="optimizer-other-optimizations" class="calibre7 pcalibre pcalibre1"></a>7.2.6 Other Optimizations</h2>
          </div>
        </div>
      </div>
      <p class="title1">
        In this section, we discuss other, more specialized
        optimizations performed in the MySQL server.
      </p>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-nulls-filtering" class="calibre7 pcalibre pcalibre1"></a>7.2.6.1 NULLs Filtering for ref and eq_ref Access</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          This section discusses the <code class="literal1">NULL</code>s filtering
          optimization used for <code class="literal1">ref</code> and
          <code class="literal1">eq_ref</code> joins.
        </p>
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <h4 class="title5"><a id="optimizer-early-nulls-filtering" class="calibre7 pcalibre pcalibre1"></a>7.2.6.1.1 Early NULLs Filtering</h4>
              </div>
            </div>
          </div>
          <p class="title1">
            Suppose we have a join order such as this one:
          </p>
          <pre class="programlisting">..., tblX, ..., tblY, ... </pre>
          <p class="title1">
            Suppose further that table <code class="literal1">tblY</code> is
            accessed via <code class="literal1">ref</code> or
            <code class="literal1">eq_ref</code> access on
          </p>
          <pre class="programlisting">tblY.key_column = tblX.column </pre>
          <p class="title1">
            or, in the case of <code class="literal1">ref</code> access using
            multiple key parts, via
          </p>
          <pre class="programlisting">... AND tblY.key_partN = tblX.column AND ... </pre>
          <p class="title1">
            where <code class="literal1">tblX.column</code> can be
            <code class="literal1">NULL</code>. Here the early
            <code class="literal1">NULL</code>s filtering for
            <code class="literal1">ref</code> (or <code class="literal1">eq_ref</code>) access
            is applied. We make the following inference:
          </p>
          <pre class="programlisting">(tblY.key_partN = tblX.column) =&gt; (tblX.column IS NOT NULL) </pre>
          <p class="title1">
            The original equality can be checked only after we've read
            the current rows of both tables <code class="literal1">tblX</code> and
            <code class="literal1">tblY</code>. The <code class="literal1">IS NOT NULL</code>
            predicate can be checked after we've read the current row of
            table <code class="literal1">tblX</code>. If there are any tables in
            the join order between <code class="literal1">tblX</code> and
            <code class="literal1">tblY</code>, the added <code class="literal1">IS NOT
            NULL</code> check will allow us to skip accessing those
            tables.
          </p>
          <p class="title1">
            This feature is implemented in these places in the server
            code:
          </p>
          <div class="toc">
            <ul class="itemizedlist">
              <li class="listitem1">
                <p class="calibre9">
                The <code class="literal">ref</code> analyzer (contained in such
                functions as <code class="literal">update_ref_and_keys()</code>)
                detects and marks equalities like that shown above by
                setting
                <code class="literal">KEY_FIELD::null_rejecting=TRUE</code>.
              </p>
              </li>
              <li class="listitem1">
                <p class="calibre9">
                After the join order has been chosen,
                <code class="literal">add_not_null_conds()</code> adds appropriate
                <code class="literal">IS NOT NULL</code> predicates to the
                conditions of the appropriate tables.
              </p>
              </li>
            </ul>
          </div>
          <p class="title1">
            It is possible to add <code class="literal1">IS NOT NULL</code>
            predicates for all equalities that could be used for
            <code class="literal1">ref</code> access (and not for those that are
            actually used). However, this is currently not done.
          </p>
        </div>
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <h4 class="title5"><a id="optimizer-late-nulls-filtering" class="calibre7 pcalibre pcalibre1"></a>7.2.6.1.2 Late NULLs Filtering</h4>
              </div>
            </div>
          </div>
          <p class="title1">
            Suppose we have a query plan with table
            <code class="literal1">tblX</code> being accessed via the
            <code class="literal1">ref</code> access method:
          </p>
          <pre class="programlisting">tblX.key_part1 = expr1 AND tblX.key_part2 = expr2 AND ... </pre>
          <p class="title1">
            Before performing an index lookup, we determine whether any
            of the <code class="literal1">expri</code> values is
            <code class="literal1">NULL</code>. If it is, we don't perform the
            lookup, but rather immediately return that the matching
            tuple is not found.
          </p>
          <p class="title1">
            This optimization reuses the
            <code class="literal1">null_rejecting</code> attribute produced by the
            early <code class="literal1">NULL</code>s filtering code (see
            <a class="pcalibre pcalibre1" href="ch07s02.html#optimizer-early-nulls-filtering" title="7.2.6.1.1 Early NULLs Filtering">Section 7.2.6.1.1, “Early NULLs Filtering”</a>). The
            check itself is located in the function
            <code class="literal1">join_read_always_key()</code>.
          </p>
        </div>
      </div>
      <div class="toc">
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <h3 class="title4"><a id="optimizer-partitioning-related" class="calibre7 pcalibre pcalibre1"></a>7.2.6.2 Partitioning-Related Optimizations</h3>
            </div>
          </div>
        </div>
        <p class="title1">
          This section discussions optimizations relating to MySQL
          Partitioning. See <a class="pcalibre pcalibre1" href="http://dev.mysql.com/doc/refman/5.7/en/partitioning.html">Partitioning</a>, for general
          information about the partitioning implementation in MySQL 5.1
          and later.
        </p>
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <h4 class="title5"><a id="optimizer-partition-pruning" class="calibre7 pcalibre pcalibre1"></a>7.2.6.2.1 Partition Pruning</h4>
              </div>
            </div>
          </div>
          <p class="title1">
            The operation of <em class="firstterm">partition pruning</em> is
            defined as follows:
          </p>
          <p class="title1">
            Given a query over partitioned table, match the table DDL
            against any <code class="literal1">WHERE</code> or
            <code class="literal1">ON</code> clauses, and find the minimal set of
            partitions that must be accessed to resolve the query.
          </p>
          <p class="title1">
            The set of partitions thus obtained (hereafter referred to
            as used) can be smaller then the set of all table
            partitions. Partitions that did not get into this set (that
            is, those that were pruned away) will not be accessed at
            all: this is how query execution is made faster.
          </p>
          <p class="title1"><strong class="calibre3">Non-Transactional Table Engines. </strong>
              With nontransactional tables such as
              <code class="literal1">MyISAM</code>, locks are placed on entire
              partitioned table. It is theoretically possible to use
              partition pruning to improve concurrency by placing locks
              only on partitions that are actually used, but this is
              currently not implemented.
            </p>
          <p class="title1">
            Partition pruning doesn't depend on what table engine is
            used. Therefore its implementation is a part of the MySQL
            Query Optimizer. The next few sections provide a detailed
            description of partition pruning.
          </p>
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <div class="toc">
                  <h5 class="title6"><a id="optimizer-partition-pruning-overview" class="calibre7 pcalibre pcalibre1"></a>7.2.6.2.1.1 Partition Pruning Overview</h5>
                </div>
              </div>
            </div>
            <p class="title1">
              Partition pruning is performed using the following steps:
            </p>
            <div class="toc">
              <ol class="orderedlist">
                <li class="listitem">
                  <p class="calibre9">
                  Analyze the <code class="literal">WHERE</code> clause and
                  construct an <span><em class="calibre14">interval graph</em></span>
                  describing the results of this analysis.
                </p>
                </li>
                <li class="listitem">
                  <p class="calibre9">
                  Walk the graph, and find sets of partitions (or
                  subpartitions, if necessary) to be used for each
                  interval in the graph.
                </p>
                </li>
                <li class="listitem">
                  <p class="calibre9">
                  Construct a set of partitions used for the entire
                  query.
                </p>
                </li>
              </ol>
            </div>
            <p class="title1">
              The description represented by the interval graph is
              structured in a bottom-up fashion. In the discussion that
              follows, we first define the term <span><em class="calibre12">partitioning
              interval</em></span>, then describe how partitioning
              interval are combined to make an interval graph, and then
              describe the graph walking process.
            </p>
          </div>
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <div class="toc">
                  <h5 class="title6"><a id="optimizer-partitioning-intervals" class="calibre7 pcalibre pcalibre1"></a>7.2.6.2.1.2 Partitioning Intervals</h5>
                </div>
              </div>
            </div>
            <div class="toc">
              <div class="toc">
                <div class="toc">
                  <div class="toc">
                    <h6 class="title7"><a id="optimizer-single-point-intervals" class="pcalibre pcalibre1"></a>7.2.6.2.1.2.1 Single-Point Intervals</h6>
                  </div>
                </div>
              </div>
              <p class="title1">
                Let's start from simplest cases. Suppose that we have a
                partitioned table with N columns, using partitioning
                type p_type and the partitioning function p_func,
                represented like this:
              </p>
              <pre class="programlisting">
CREATE TABLE t (<em class="replaceable"><code class="calibre10">columns</code></em>)
PARTITION BY <em class="replaceable"><code class="calibre10">p_type</code></em>(p_func(col1, col2,... col<em class="replaceable"><code class="calibre10">N</code></em>)...);
</pre>
              <p class="title1">
                Suppose also that we have a <code class="literal1">WHERE</code>
                clause of the form
              </p>
              <pre class="programlisting">
WHERE t.col1=const1 AND t.col2=const2 AND ... t.col<em class="replaceable"><code class="calibre10">N</code></em>=const<em class="replaceable"><code class="calibre10">N</code></em>
</pre>
              <p class="title1">
                We can calculate <code class="literal1">p_func(const1, const2 ...
                constN)</code> and discover which partition can
                contain records matching the <code class="literal1">WHERE</code>
                clause. Note that this process works for all
                partitioning types and all partitioning functions.
              </p>
              <div class="toc">
                <blockquote class="blockquote">
                  <p class="title1">
                  <span><strong class="calibre13">Note:</strong></span> This process
                  works only if the <code class="literal1">WHERE</code> clause is
                  of the exact form given above — that is, each
                  column in the table must be tested for equality with
                  some arbitrary constant (not necessarily the same
                  constant for each column). For example, if
                  <code class="literal1">col1=const1</code> were missing from the
                  example <code class="literal1">WHERE</code> clause, then we would
                  not be able to calculate the partitioning function
                  value and so would be unable to restrict the set of
                  partitions to those actually used.
                </p>
                </blockquote>
              </div>
            </div>
            <div class="toc">
              <div class="toc">
                <div class="toc">
                  <div class="toc">
                    <h6 class="title7"><a id="optimizer-interval-walking" class="pcalibre pcalibre1"></a>7.2.6.2.1.2.2 Interval Walking</h6>
                  </div>
                </div>
              </div>
              <p class="title1">
                Let a partitioned table <code class="literal1">t</code> be defined
                with a set of column definitions columns, a partitioning
                type p_type using a partitioning function p_func taking
                an integer column int_col, as shown here:
              </p>
              <pre class="programlisting">
CREATE TABLE t (<em class="replaceable"><code class="calibre10">columns</code></em>)
PARTITION BY
<em class="replaceable"><code class="calibre10">p_type</code></em>(<em class="replaceable"><code class="calibre10">p_func</code></em>(<em class="replaceable"><code class="calibre10">int_col</code></em>))
...
</pre>
              <p class="title1">
                Now suppose that we have a query whose
                <code class="literal1">WHERE</code> clause is of the form
              </p>
              <pre class="programlisting">
WHERE <em class="replaceable"><code class="calibre10">const1</code></em> &lt;= int_col &lt;= <em class="replaceable"><code class="calibre10">const2</code></em>
</pre>
              <p class="title1">
                We can reduce this case to a number of cases of
                single-point intervals by converting the
                <code class="literal1">WHERE</code> clause into the following
                relation:
              </p>
              <pre class="programlisting">int_field=const1 OR int_field=const1 + 1 OR int_field=const1 + 2 OR ... OR int_field=const2 </pre>
              <p class="title1">
                In the source code this conversion is referred to as
                <span><em class="calibre12">interval walking</em></span>. Walking over
                short intervals is not very expensive, since we can
                reduce the number of partitions to scan to a small
                number. However, walking over long intervals may not be
                very efficient there will be lots of numbers to examine,
                and we are very likely to out that all partitions need
                to be scanned.
              </p>
              <p class="title1">
                The threshold for interval walking is determined by
              </p>
              <pre class="programlisting"> #define MAX_RANGE_TO_WALK=10 </pre>
              <div class="note">
                <div class="admon-title">Note</div>
                <p class="title1">
                  The logic of the previous example also applies for a
                  relation such as this one:

</p>
                <pre class="programlisting">
<em class="replaceable"><code class="calibre10">const1</code></em>                                                                            &gt;= <em class="replaceable"><code class="calibre10">int_col</code></em> &gt;= <em class="replaceable"><code class="calibre10">const2</code></em>
</pre>
                <p class="title1">
                </p>
              </div>
            </div>
            <div class="toc">
              <div class="toc">
                <div class="toc">
                  <div class="toc">
                    <h6 class="title7"><a id="optimizer-interval-mapping" class="pcalibre pcalibre1"></a>7.2.6.2.1.2.3 Interval Mapping</h6>
                  </div>
                </div>
              </div>
              <p class="title1">
                Let a partitioned table <code class="literal1">t</code> be defined
                as follows:
              </p>
              <pre class="programlisting">
CREATE TABLE t (<em class="replaceable"><code class="calibre10">columns</code></em>)
PARTITION BY RANGE|LIST(<em class="replaceable"><code class="calibre10">unary_ascending_function</code></em>(<em class="replaceable"><code class="calibre10">column</code></em>))
</pre>
              <p class="title1">
                Suppose we have a query on table <code class="literal1">t</code>
                whose <code class="literal1">WHERE</code> clause is of one of the
                forms shown here:
              </p>
              <div class="toc">
                <ul class="itemizedlist">
                  <li class="listitem1">
                    <p class="calibre9">
                    <code class="literal">const1 &lt;= t.column &lt;=
                    const2</code>
                  </p>
                  </li>
                  <li class="listitem1">
                    <p class="calibre9">
                    <code class="literal">t.column &lt;= const2</code>
                  </p>
                  </li>
                  <li class="listitem1">
                    <p class="calibre9">
                    <code class="literal">const1 &lt;= t.column</code>
                  </p>
                  </li>
                </ul>
              </div>
              <p class="title1">
                Since the partitioning function is ascending, the
                following relationship holds:
              </p>
              <pre class="programlisting">const1 &lt;= t.col &lt;= <em class="replaceable"><code class="calibre10">const2</code></em>    

  =&gt; <em class="replaceable"><code class="calibre10">p_func</code></em>(<em class="replaceable"><code class="calibre10">const1</code></em>) &lt;= 

<em class="replaceable"><code class="calibre10">p_func</code></em>(t.<em class="replaceable"><code class="calibre10">column</code></em>) &lt;= <em class="replaceable"><code class="calibre10">p_func</code></em>(<em class="replaceable"><code class="calibre10">const2</code></em>)
</pre>
              <p class="title1">
                Using A and B to denote the leftmost and rightmost parts
                of this relation, we can rewrite it like this:
              </p>
              <pre class="programlisting">A &lt;= p_func(t.column) &lt;= B </pre>
              <div class="toc">
                <blockquote class="blockquote">
                  <p class="title1">
                  <span><strong class="calibre13">Note:</strong></span> In this
                  instance, the interval is closed and has two bounds.
                  However, similar inferences can be performed for other
                  kinds of intervals.
                </p>
                </blockquote>
              </div>
              <p class="title1">
                For <code class="literal1">RANGE</code> partitioning, each
                partition occupies one interval on the partition
                function value axis, and the intervals are disjoint, as
                shown here:
              </p>
              <pre class="programlisting">
                        p0     p1      p2    
  table partitions    ------x------x--------x--------&gt;
 
  search interval     ----x==============x-----------&gt;
                          A              B
</pre>
              <p class="title1">
                A partition needs to be accessed if and only if its
                interval has a non-empty intersection with the search
                interval <code class="literal1">[<em class="replaceable"><code class="calibre10"> A </code></em>,
                <em class="replaceable"><code class="calibre10">B</code></em>]</code>.
              </p>
              <p class="title1">
                For <code class="literal1">LIST</code> partitioning, each partition
                covers a set of points on the partition function value
                axis. Points produced by various partitions may be
                interleaved, as shown here:
              </p>
              <pre class="programlisting">
                      p0  p1   p2   p1   p1   p0    
table partitions    --+---+----+----+----+----+----&gt; 

search interval     ----x===================x------&gt; A B </pre>
              <p class="title1">
                A partition needs to be accessed if it has at least one
                point in the interval <code class="literal1">[A, B]</code>. The set
                of partitions used can be determined by running from A
                to B and collecting partitions that have their points
                within this range.
              </p>
            </div>
          </div>
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <div class="toc">
                  <h5 class="title6"><a id="optimizer-subpartitioning-intervals" class="calibre7 pcalibre pcalibre1"></a>7.2.6.2.1.3 Subpartitioning Intervals</h5>
                </div>
              </div>
            </div>
            <p class="title1">
              In the previous sections we've described ways to infer the
              set of used partitions from "elementary" WHERE clauses.
              Everything said there about partitions also applies to
              subpartitions (with exception that subpartitioning by
              RANGE or LIST is currently not possible).
            </p>
            <p class="title1">
              Since each partition is subpartitioned in the same way,
              we'll find which subpartitions should be accessed within
              each partition.
            </p>
          </div>
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <div class="toc">
                  <h5 class="title6"><a id="optimizer-where-clause-to-intervals" class="calibre7 pcalibre pcalibre1"></a>7.2.6.2.1.4 From WHERE Clauses to Intervals</h5>
                </div>
              </div>
            </div>
            <p class="title1">
              Previous sections deal with inferring the set of
              partitions used from <code class="literal1">WHERE</code> clauses that
              represent partitioning or subpartitioning intervals. Now
              we look at how MySQL extracts intervals from arbitrary
              <code class="literal1">WHERE</code> clauses.
            </p>
            <p class="title1">
              The extraction process uses the <span><em class="calibre12">Range
              Analyzer</em></span> a part of the MySQL optimizer that
              produces plans for the range access method. This is
              because the tasks are similar. In both cases we have a
              <code class="literal1">WHERE</code> clause as input: the range access
              method needs index ranges (that is, intervals) to scan;
              partition pruning module needs partitioning intervals so
              that it can determine which partitions should be used.
            </p>
            <p class="title1">
              For range access, the Range Analyzer is invoked with the
              <code class="literal1">WHERE</code> clause and descriptions of table
              indexes. Each index is described by an ordered list of the
              columns which it covers:
            </p>
            <pre class="programlisting">
(keypart1, keypart2, ..., keypart<em class="replaceable"><code class="calibre10">N</code></em>)
</pre>
            <p class="title1">
              For partition pruning, Range Analyzer is invoked with the
              <code class="literal1">WHERE</code> clause and a list of table
              columns used by the partitioning and subpartitioning
              functions:
            </p>
            <pre class="programlisting">  
(part_col1, part_col2, ... part_col<em class="replaceable"><code class="calibre10">N</code></em>,
subpart_col1, subpart_col2, ... subpart_col<em class="replaceable"><code class="calibre10">M</code></em>)
</pre>
            <p class="title1">
              The result of the Range Analyzer's work is known as a
              SEL_ARG&lt;/code&gt; graph<span><em class="calibre12">. This is a complex
              (and not yet fully documented) structure, which we will
              not attempt to describe here. What's important for the
              current discussion is that we can walk over it and collect
              partitioning and subpartitioning intervals.</em></span>
            </p>
            <p class="title1">
              The following example illustrates the structure and the
              walking process. Suppose a table <code class="literal1">t</code> is
              partitioned as follows:
            </p>
            <pre class="programlisting">  
CREATE TABLE t (..., pf INT, sp1 CHAR(5), sp2 INT, ... )
  PARTITION BY LIST (pf)
  SUBPARTITION BY HASH(sp1, sp2) (
    PARTITION p0 VALUES IN (1), 
    PARTITION p1 VALUES IN (2),
    PARTITION p2 VALUES IN (3),
    PARTITION p3 VALUES IN (4),
    PARTITION p4 VALUES IN (5),
  );
</pre>
            <p class="title1">
              Now suppose that a query on table <code class="literal1">t</code> has
              a highly complex <code class="literal1">WHERE</code> clause, such as
              this one:
            </p>
            <pre class="programlisting">
pf=1 AND (sp1='foo' AND sp2 IN (40,50))

OR 

(pf1=3 OR pf1=4) AND sp1='bar' AND sp2=33    

OR

((pf=3 OR pf=4) AND sp1=5)

OR

p=8 
</pre>
            <p class="title1">
              The <code class="literal1">SEL_ARG</code> graph for this is shown
              here:
            </p>
            <pre class="programlisting">
(root)
   |               :   
   | Partitioning  :         Sub-partitioning 
   |               :    
   |               :          
   |               :            
   |   +------+    :     +-----------+   +--------+
   \---| pf=1 |----:-----| sp1='foo' |---| sp2=40 |
       +------+    :     +-----------+   +--------+
          |        :                         |
          |        :                     +--------+
          |        :                     | sp2=50 |
          |        :                     +--------+
          |        :    
          |        :              
       +------+    :     +-----------+   +--------+          
       | pf=3 |----:--+--| sp1='bar' |---| sp2=33 |
       +------+    :  |  +-----------+   +--------+          
          |        :  |            
       +------+    :  |            
       | pf=4 |----:--+
       +------+    :              
          |        : 
          |        :  
       +------+    :     +-----------+   
       | pf=8 |----:-----| sp1='baz' |
       +------+    :     +-----------+  
</pre>
            <p class="title1">
              In the previous diagram, vertical edges
              (<code class="literal1">|</code>) represent <code class="literal1">OR</code> and
              the horizontal ones (<code class="literal1">-</code>) represent
              <code class="literal1">AND</code> (the line with both horizontal and
              vertical segments also represents <code class="literal1">AND</code>).
            </p>
            <p class="title1">
              The partition-pruning code walks the graph top to bottom
              and from left to right, making these inferences:
            </p>
            <div class="toc">
              <ol class="orderedlist">
                <li class="listitem">
                  <p class="calibre9">
                  Start with an empty set of used partitions at the
                  topmost and leftmost interval.
                </p>
                  <div class="toc">
                    <ol class="orderedlist1">
                      <li class="listitem3">
                        <p class="calibre9">
                      Perform interval analysis for
                      <code class="literal">pf=1</code>; find a corresponding set
                      of partitions P0; move right.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Move right again, to <code class="literal">sp2=40</code>.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Analyze the interval <code class="literal">sp1='foo' AND
                      sp2=40</code> interval; find that it covers
                      rows in some subpartition SP1. Make first
                      inference: within each partition making up set P0,
                      mark subpartition SP1 as used.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Move down to <code class="literal">sp2=50</code>.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Analyze the interval <code class="literal">sp1='foo' AND
                      sp2=50</code>, finding that it covers rows in
                      some subpartition SP2. Make another inference:
                      within each partition of set P0, mark subpartition
                      SP2 as used.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Move back to <code class="literal">pf=1</code>, and then
                      down to <code class="literal">pf=3</code>.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Perform interval analysis for
                      <code class="literal">pf=3</code>; find a corresponding set
                      of partitions P1; move right.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Move right again, to <code class="literal">sp2=33</code>.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Analyze the interval <code class="literal">sp1='foo' AND
                      sp2=33</code>, find that it covers rows in a
                      subpartition SP3. Make another inference: within
                      each partition from set P1, mark subpartition SP3
                      as used.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Move back to <code class="literal">pf=3</code>, then down to
                      <code class="literal">pf=4</code>.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Perform interval analysis for
                      <code class="literal">pf=4</code>; find a corresponding set
                      of partitions P2; move right.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Perform moves and inferences analogous to what we
                      did to the right of <code class="literal">pf=3</code>. There
                      is some potential inefficiency due to the fact
                      that that we will analyze the interval for
                      <code class="literal">sp1='foo' AND sp2=33</code> again, but
                      this should not have much impact on overall
                      performance.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Move back to <code class="literal">pf=3</code>, then down to
                      <code class="literal">pf=8</code>.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Perform interval analysis for
                      <code class="literal">pf=8</code>; find a corresponding set
                      of partitions P3, move right.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      Now we've arrived at <code class="literal">sp1='baz'</code>,
                      and find that we can't move any further to the
                      right and can't construct a subpartitioning
                      interval. We remember this, and move back to
                      <code class="literal">pf=8</code>.
                    </p>
                      </li>
                      <li class="listitem3">
                        <p class="calibre9">
                      In the previous step we could not limit the set of
                      subpartitions, so we make this inference: for
                      every partition in set P3, assume that all
                      subpartitions are active, and mark them as such.
                    </p>
                      </li>
                    </ol>
                  </div>
                </li>
                <li class="listitem">
                  <p class="calibre9">
                  Try to move down from <code class="literal">pf=8</code>; find
                  that there is nothing there; this completes the graph
                  analysis.
                </p>
                </li>
              </ol>
            </div>
            <p class="title1">
              <span><strong class="calibre13">Note:</strong></span> In certain cases
              the result of the <code class="literal1">RANGE</code> optimizer will
              be several <code class="literal1">SEL_ARG</code> graphs that are to
              be combined using <code class="literal1">OR</code> or
              <code class="literal1">AND</code> operators. This happens for
              <code class="literal1">WHERE</code> clauses which either are very
              complicated or do not allow for the construction of a
              single list of intervals. In such cases, the partition
              pruning code takes apprpriate action, an example being
              this query:
            </p>
            <pre class="programlisting">SELECT * FROM t1 WHERE partition_id=10 OR subpartition_id=20 </pre>
            <p class="title1">
              No single list of intervals can be constructed in this
              instance, but the partition pruning code correctly infers
              that the set of partitions used is a union of:
            </p>
            <div class="toc">
              <ol class="orderedlist">
                <li class="listitem">
                  <p class="calibre9">
                  All subpartitions within the partition containing rows
                  with <code class="literal">partition_id=10</code>; and
                </p>
                </li>
              </ol>
            </div>
            <p class="title1">
              <code class="literal1">subpartition_id=20</code> within each
              partition.
            </p>
          </div>
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <div class="toc">
                  <h5 class="title6"><a id="optimizer-partition-pruning-source-code" class="calibre7 pcalibre pcalibre1"></a>7.2.6.2.1.5 Partition Pruning in the Source Code</h5>
                </div>
              </div>
            </div>
            <p class="title1">
              Here is a short walkthrough of what is where in the code:
            </p>
            <div class="toc">
              <ul class="itemizedlist">
                <li class="listitem1">
                  <p class="calibre9">
                  <code class="filename">sql/opt_range.cc</code> :
                </p>
                  <p class="calibre9">
                  This file contains the implementation of what is
                  described in
                  <a class="pcalibre pcalibre1" href="ch07s02.html#optimizer-where-clause-to-intervals" title="7.2.6.2.1.4 From WHERE Clauses to Intervals">Section 7.2.6.2.1.4, “From WHERE Clauses to Intervals”</a>.
                  The entry point is the function
                  <code class="literal">prune_partitions()</code>. There are also
                  detailed code-level comments about partition pruning;
                  search for <code class="literal">PartitionPruningModule</code>
                  to find the starting point.
                </p>
                  <div class="toc">
                    <ul class="itemizedlist1">
                      <li class="listitem2">
                        <p class="calibre9">
                      <code class="filename">sql/partition_info.h</code> :
                    </p>
                        <pre class="programlisting">
class partition_info {
  ...
  /*
    Bitmap of used (i.e. not pruned away) partitions. This is where result
    of partition pruning is stored.
  */
  MY_BITMAP used_partitions;

  /* 
    "virtual function" pointers to functions that perform interval analysis 
    on this partitioned table (used by the code in opt_range.cc)
  */
  get_partitions_in_range_iter get_part_iter_for_interval;
  get_partitions_in_range_iter get_subpart_iter_for_interval;
                                                                                  };
</pre>
                      </li>
                      <li class="listitem2">
                        <p class="calibre9">
                      <code class="filename">sql/sql_partition.cc</code> :
                    </p>
                      </li>
                    </ul>
                  </div>
                </li>
              </ul>
            </div>
            <p class="title1">
              This file contains the functions implementing all types of
              partitioning interval analysis.
            </p>
          </div>
        </div>
        <div class="toc">
          <div class="toc">
            <div class="toc">
              <div class="toc">
                <h4 class="title5"><a id="optimizer-partition-selection" class="calibre7 pcalibre pcalibre1"></a>7.2.6.2.2 Partition Selection</h4>
              </div>
            </div>
          </div>
          <p class="title1">
            If a partitioned table is accessed in a series of index
            lookups (that is, using the <code class="literal1">ref</code>,
            <code class="literal1">eq_ref</code>, or <code class="literal1">ref_or_null</code>
            access methods), MySQL checks to see whether it needs to
            make index lookups in all partitions or that it can limit
            access to a particular partition. This is performed for each
            index lookup.
          </p>
          <p class="title1">
            Consider this example:
          </p>
          <pre class="programlisting">
CREATE TABLE t1 (a INT, b INT);

INSERT INTO t1 VALUES (1,1),(2,2),(3,3);

CREATE TABLE t2 (
    keypart1 INT, 
    keypart2 INT, 
    KEY(keypart1, keypart2)
)
PARTITION BY HASH(keypart2);

INSERT INTO t2 VALUES (1,1),(2,2),(3,3);
</pre>
          <p class="title1">
            The query

</p>
          <pre class="programlisting">
SELECT * FROM t1, t2 
    WHERE  t2.keypart1=t1.a 
    AND    t2.keypart2=t1.b;
</pre>
          <p class="title1">

            is executed using this algorithm:

</p>
          <pre class="programlisting">
(for each record in t1:)
{
  t2-&gt;index_read({current-value-of(t1.a), current-value-of(t1.b)});
  while( t2-&gt;index_next_same() )
    pass row combination to query output;
 }
</pre>
          <p class="title1">
          </p>
          <p class="title1">
            In the <code class="literal1">index_read()</code> call, the partitioned
            table handler will discover that the value of all
            partitioning columns (in this case, the single column
            <code class="literal1">b</code>) is fixed, and find a single partition
            to access. If this partition was pruned away, then no
            partitions will be accessed at all.
          </p>
        </div>
      </div>
    </div>
  </div>


  </div>

  
  <div class="calibreToc">
    <h2><a href="../../index.html"> Table of contents</a></h2>
     <div>
  <ul>
    <li>
      <a href="index.html">MySQL Internals Manual</a>
      <ul>
        <li>
          <a href="pr01.html">Preface and Legal Notice</a>
        </li>
        <li>
          <a href="ch01.html">1 A Guided Tour Of The MySQL Source Code</a>
          <ul>
            <li>
              <a href="ch01.html#getting-source-tree">1.1 Getting the Source Tree</a>
              <ul>
                <li>
                  <a href="ch01.html#getting-source-tree-git">1.1.1 Getting the Source Tree (Git)</a>
                </li>
                <li>
                  <a href="ch01.html#getting-source-tree-bazaar">1.1.2 Getting the Source Tree (Bazaar)</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch01s02.html">1.2 The Major Directories</a>
              <ul>
                <li>
                  <a href="ch01s02.html#guided-tour-majordir-build">1.2.1 Major Directories: BUILD</a>
                  <ul>
                    <li>
                      <a href="ch01s02.html#gnu-debugger">1.2.1.1 GNU Debugger</a>
                    </li>
                    <li>
                      <a href="ch01s02.html#guided-tour-major-directories-test">1.2.1.2 Running a Test with the Debugger</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch01s02.html#guided-tour-majordir-client">1.2.2 Major Directories: client</a>
                </li>
                <li>
                  <a href="ch01s02.html#guided-tour-majordir-myisam">1.2.3 Major Directories: myisam</a>
                </li>
                <li>
                  <a href="ch01s02.html#guided-tour-majordir-mysys">1.2.4 Major Directories: mysys</a>
                </li>
                <li>
                  <a href="ch01s02.html#guided-tour-majordir-sql">1.2.5 Major Directories: sql</a>
                </li>
                <li>
                  <a href="ch01s02.html#guided-tour-majordir-vio">1.2.6 Major Directories: vio</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch01s03.html">1.3 The Flow</a>
            </li>
            <li>
              <a href="ch01s04.html">1.4 The Open-Source Directories</a>
            </li>
            <li>
              <a href="ch01s05.html">1.5 The Internal and External Storage Engine Directories</a>
            </li>
            <li>
              <a href="ch01s06.html">1.6 The OS-Specific Directories</a>
            </li>
            <li>
              <a href="ch01s07.html">1.7 Odds and Ends</a>
            </li>
            <li>
              <a href="ch01s08.html">1.8 A Chunk of Code in /sql/sql_update.cc</a>
            </li>
            <li>
              <a href="ch01s09.html">1.9 The Skeleton of the Server Code</a>
            </li>
            <li>
              <a href="ch01s10.html">1.10 Recap</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch02.html">2 Coding Guidelines</a>
          <ul>
            <li>
              <a href="ch02.html#general-development-guidelines">2.1 General Development Guidelines</a>
              <ul>
                <li>
                  <a href="ch02.html#coding-guidelines-c">2.1.1 C/C++ Coding Guidelines of MySQL Server</a>
                </li>
                <li>
                  <a href="ch02.html#maintaining-coding-guidelines">2.1.2 How We Maintain the Server Coding Guidelines</a>
                </li>
                <li>
                  <a href="ch02.html#indentation-spacing">2.1.3 Indentation and Spacing</a>
                </li>
                <li>
                  <a href="ch02.html#naming-conventions">2.1.4 Naming Conventions</a>
                </li>
                <li>
                  <a href="ch02.html#commenting-code">2.1.5 Commenting Code</a>
                </li>
                <li>
                  <a href="ch02.html#header-files">2.1.6 Header Files</a>
                </li>
                <li>
                  <a href="ch02.html#additional-suggestions">2.1.7 Additional Suggestions</a>
                </li>
                <li>
                  <a href="ch02.html#suggested-mode-emacs">2.1.8 Suggested Mode in emacs</a>
                </li>
                <li>
                  <a href="ch02.html#basic-vim-setup">2.1.9 Basic vim Setup</a>
                </li>
                <li>
                  <a href="ch02.html#alternative-vim-setup">2.1.10 Another vim Setup</a>
                </li>
                <li>
                  <a href="ch02.html#example-setup-ctags">2.1.11 Example Setup for ctags</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch02s02.html">2.2 C++ Coding Guidelines for the NDB Storage Engine</a>
              <ul>
                <li>
                  <a href="ch02s02.html#braces">2.2.1 Braces</a>
                </li>
                <li>
                  <a href="ch02s02.html#assignment">2.2.2 Assignment</a>
                </li>
                <li>
                  <a href="ch02s02.html#ndbrequire">2.2.3 Use of ndbrequire</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch02s03.html">2.3 DBUG Tags</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch03.html">3 Reusable Classes and Templates</a>
          <ul>
            <li>
              <a href="ch03.html#containers">3.1 Containers</a>
              <ul>
                <li>
                  <a href="ch03.html#array">3.1.1 Array</a>
                </li>
                <li>
                  <a href="ch03.html#i-p-list">3.1.2 I_P_List</a>
                </li>
                <li>
                  <a href="ch03.html#i-list">3.1.3 I_List</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch03s02.html">3.2 Memory Management</a>
              <ul>
                <li>
                  <a href="ch03s02.html#mem-root">3.2.1 MEM_ROOT</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch03s03.html">3.3 How to Extend This Page</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch04.html">4 Building MySQL Server with CMake</a>
          <ul>
            <li>
              <a href="ch04.html#cmake-prerequisites">4.1 CMake Prerequisites</a>
            </li>
            <li>
              <a href="ch04s02.html">4.2 How to Install CMake</a>
            </li>
            <li>
              <a href="ch04s03.html">4.3 Quick How-to-Build Instructions</a>
              <ul>
                <li>
                  <a href="ch04s03.html#cmake-howto-quick-release-configuration">4.3.1 Release Configuration</a>
                </li>
                <li>
                  <a href="ch04s03.html#cmake-howto-quick-debug-configuration">4.3.2 Debug Configuration</a>
                </li>
                <li>
                  <a href="ch04s03.html#cmake-build-options-official-mysql">4.3.3 Building Using the Same Options as MySQL Official Releases</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch04s04.html">4.4 Detailed How-to-Build Instructions</a>
              <ul>
                <li>
                  <a href="ch04s04.html#creating-build-directory">4.4.1 Create the Build Directory</a>
                </li>
                <li>
                  <a href="ch04s04.html#configuration-step">4.4.2 Configure the Build</a>
                </li>
                <li>
                  <a href="ch04s04.html#listing-configuration-options">4.4.3 Listing Configuration Options</a>
                </li>
                <li>
                  <a href="ch04s04.html#changing-configuration-options">4.4.4 Changing Configuration Options</a>
                </li>
                <li>
                  <a href="ch04s04.html#debug-configurations">4.4.5 Building Debug Configurations</a>
                </li>
                <li>
                  <a href="ch04s04.html#building-with-cmake">4.4.6 Building With CMake</a>
                  <ul>
                    <li>
                      <a href="ch04s04.html#cmake-build-types">4.4.6.1 CMake Build Types</a>
                    </li>
                    <li>
                      <a href="ch04s04.html#controlling-compilers-and-flags">4.4.6.2 How to Specify Compilers and Compiler Flags</a>
                    </li>
                    <li>
                      <a href="ch04s04.html#predefined-option-sets">4.4.6.3 Predefined Option and Compiler Flag Sets</a>
                    </li>
                    <li>
                      <a href="ch04s04.html#creating-binary-packages">4.4.6.4 Creating Binary Packages</a>
                    </li>
                    <li>
                      <a href="ch04s04.html#make-install-make-test">4.4.6.5 make install, make test</a>
                    </li>
                    <li>
                      <a href="ch04s04.html#fine-tuning-installation-paths">4.4.6.6 Fine-Tuning Installation Paths</a>
                    </li>
                    <li>
                      <a href="ch04s04.html#packager-friendly-build-options">4.4.6.7 Packager-Friendly Build Options (Unix)</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch04s04.html#configure-emulation">4.4.7 ./configure Emulation</a>
                </li>
                <li>
                  <a href="ch04s04.html#writing-platform-checks">4.4.8 For Developers: How to Write Platform Checks</a>
                  <ul>
                    <li>
                      <a href="ch04s04.html#debug-only-options">4.4.8.1 Debug-Only Options</a>
                    </li>
                    <li>
                      <a href="ch04s04.html#adding-platform-checks">4.4.8.2 Adding Platform Checks/Compiler Flags for a Specific OS</a>
                    </li>
                    <li>
                      <a href="ch04s04.html#troubleshooting-platform-checks">4.4.8.3 Troubleshooting Platform Checks or Configuration Errors</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch04s04.html#troubleshooting-cmake-code">4.4.9 Troubleshooting CMake Code</a>
                </li>
                <li>
                  <a href="ch04s04.html#tips-for-cmake-developers">4.4.10 Developer CMake Tips</a>
                </li>
                <li>
                  <a href="ch04s04.html#mysql-specific-cmake-macros">4.4.11 MySQL-Specific CMake Macros</a>
                </li>
                <li>
                  <a href="ch04s04.html#cmake-interface-to-third-party-tools">4.4.12 Interface to Third-Party Tools</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch04s05.html">4.5 FAQ / Miscellany</a>
              <ul>
                <li>
                  <a href="ch04s05.html#running-mysql-test-run-out-of-source">4.5.1 Running mysql-test-run.pl in an Out-of-Source Build</a>
                </li>
                <li>
                  <a href="ch04s05.html#running-mysql-test-run-visual-studio">4.5.2 Running mysql-test-run.pl with Visual Studio or Xcode Projects</a>
                </li>
                <li>
                  <a href="ch04s05.html#make-distclean">4.5.3 make distclean</a>
                </li>
                <li>
                  <a href="ch04s05.html#compiling-for-different-hardware-achitectures">4.5.4 Compiling for Different Hardware Architectures</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch04s06.html">4.6 Autotools to CMake Transition Guide</a>
              <ul>
                <li>
                  <a href="ch04s06.html#command-invocation-syntax">4.6.1 Command Invocation Syntax</a>
                </li>
                <li>
                  <a href="ch04s06.html#installation-layout-options">4.6.2 Installation Layout Options</a>
                </li>
                <li>
                  <a href="ch04s06.html#storage-engine-options">4.6.3 Storage Engine Options</a>
                </li>
                <li>
                  <a href="ch04s06.html#library-options">4.6.4 Library Options</a>
                </li>
                <li>
                  <a href="ch04s06.html#miscellaneous-options">4.6.5 Miscellaneous Options</a>
                </li>
                <li>
                  <a href="ch04s06.html#debugging-configuration-process">4.6.6 Debugging the Configuration Process</a>
                </li>
                <li>
                  <a href="ch04s06.html#interface-to-third-party-tools">4.6.7 Interface to Third-Party Tools</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch05.html">5 Plugins</a>
          <ul>
            <li>
              <a href="ch05.html#cmake-variables-controlling-plugin-building">5.1 CMake Variables to Control Plugin Building (MySQL 5.5 and Later)</a>
            </li>
            <li>
              <a href="ch05s02.html">5.2 CMake Macro to Define the Plugin</a>
            </li>
            <li>
              <a href="ch05s03.html">5.3 Autotools configure Support (MySQL 5.1)</a>
            </li>
            <li>
              <a href="ch05s04.html">5.4 Autotools Plugin Macros</a>
            </li>
            <li>
              <a href="ch05s05.html">5.5 Specifying mysqld Variables Within a Plugin</a>
            </li>
            <li>
              <a href="ch05s06.html">5.6 Additional Accessors for Plugins</a>
            </li>
            <li>
              <a href="ch05s07.html">5.7 MySQL Services for Plugins</a>
              <ul>
                <li>
                  <a href="ch05s07.html#plugin-services-components">5.7.1 Plugin Services Components</a>
                </li>
                <li>
                  <a href="ch05s07.html#writing-services-for-use-from-plugins">5.7.2 Writing Services for Use from Within Plugins</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch06.html">6 Transaction Handling in the Server</a>
          <ul>
            <li>
              <a href="ch06.html#transactions-historical-note">6.1 Historical Note</a>
            </li>
            <li>
              <a href="ch06s02.html">6.2 Current Situation</a>
            </li>
            <li>
              <a href="ch06s03.html">6.3 Data Layout</a>
            </li>
            <li>
              <a href="ch06s04.html">6.4 Transaction Life Cycle</a>
            </li>
            <li>
              <a href="ch06s05.html">6.5 Roles and Responsibilities</a>
            </li>
            <li>
              <a href="ch06s06.html">6.6 Additional Notes on DDL and the Normal Transaction</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch07.html">7 The Optimizer</a>
          <ul>
            <li>
              <a href="ch07.html#optimizer-code-concepts">7.1 Code and Concepts</a>
              <ul>
                <li>
                  <a href="ch07.html#optimizer-definitions">7.1.1 Definitions</a>
                </li>
                <li>
                  <a href="ch07.html#optimizer-code">7.1.2 The Optimizer Code</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch07s02.html">7.2 Primary Optimizations</a>
              <ul>
                <li>
                  <a href="ch07s02.html#optimizer-handling-constant-relations">7.2.1 Optimizing Constant Relations</a>
                  <ul>
                    <li>
                      <a href="ch07s02.html#optimizer-constant-propagation">7.2.1.1 Constant Propagation</a>
                    </li>
                    <li>
                      <a href="ch07s02.html#optimizer-eliminating-dead-code">7.2.1.2 Eliminating Dead Code</a>
                    </li>
                    <li>
                      <a href="ch07s02.html#optimizer-folding-constants">7.2.1.3 Folding of Constants</a>
                    </li>
                    <li>
                      <a href="ch07s02.html#optimizer-constants-constant-tables">7.2.1.4 Constants and Constant Tables</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch07s02.html#optimizer-joins">7.2.2 Optimizing Joins</a>
                  <ul>
                    <li>
                      <a href="ch07s02.html#optimizer-determining-join-type">7.2.2.1 Determining the Join Type</a>
                    </li>
                    <li>
                      <a href="ch07s02.html#optimizer-joins-access-methods">7.2.2.2 Joins and Access Methods</a>
                    </li>
                    <li>
                      <a href="ch07s02.html#optimizer-range-join-type">7.2.2.3 The range Join Type</a>
                    </li>
                    <li>
                      <a href="ch07s02.html#optimizer-index-join-type">7.2.2.4 The index Join Type</a>
                    </li>
                    <li>
                      <a href="ch07s02.html#optimizer-index-merge-join-type">7.2.2.5 The Index Merge Join Type</a>
                      <ul>
                        <li>
                          <a href="ch07s02.html#optimizer-index-merge-overview">7.2.2.5.1 Overview</a>
                        </li>
                        <li>
                          <a href="ch07s02.html#optimizer-index-merge-optimizer">7.2.2.5.2 Index Merge Optimizer</a>
                        </li>
                        <li>
                          <a href="ch07s02.html#optimizer-index-merge-range-optimizer">7.2.2.5.3 The range Optimizer</a>
                        </li>
                        <li>
                          <a href="ch07s02.html#optimizer-index-merge-row-retrieval-algorithm">7.2.2.5.4 Row Retrieval Algorithm</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch07s02.html#optimizer-transpositions">7.2.3 Transpositions</a>
                  <ul>
                    <li>
                      <a href="ch07s02.html#optimizer-and-relations">7.2.3.1 AND Relations</a>
                    </li>
                    <li>
                      <a href="ch07s02.html#optimizer-or-relations">7.2.3.2 OR Relations</a>
                    </li>
                    <li>
                      <a href="ch07s02.html#optimizer-union-queries">7.2.3.3 UNION Queries</a>
                    </li>
                    <li>
                      <a href="ch07s02.html#optimizer-not-relations">7.2.3.4 NOT (&lt;&gt;) Relations</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch07s02.html#optimizer-order-by-clauses">7.2.4 ORDER BY Clauses</a>
                </li>
                <li>
                  <a href="ch07s02.html#optimizer-group-by-related-conditions">7.2.5 GROUP BY and Related Conditions</a>
                </li>
                <li>
                  <a href="ch07s02.html#optimizer-other-optimizations">7.2.6 Other Optimizations</a>
                  <ul>
                    <li>
                      <a href="ch07s02.html#optimizer-nulls-filtering">7.2.6.1 NULLs Filtering for ref and eq_ref Access</a>
                      <ul>
                        <li>
                          <a href="ch07s02.html#optimizer-early-nulls-filtering">7.2.6.1.1 Early NULLs Filtering</a>
                        </li>
                        <li>
                          <a href="ch07s02.html#optimizer-late-nulls-filtering">7.2.6.1.2 Late NULLs Filtering</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="ch07s02.html#optimizer-partitioning-related">7.2.6.2 Partitioning-Related Optimizations</a>
                      <ul>
                        <li>
                          <a href="ch07s02.html#optimizer-partition-pruning">7.2.6.2.1 Partition Pruning</a>
                          <ul>
                            <li>
                              <a href="ch07s02.html#optimizer-partition-pruning-overview">7.2.6.2.1.1 Partition Pruning Overview</a>
                            </li>
                            <li>
                              <a href="ch07s02.html#optimizer-partitioning-intervals">7.2.6.2.1.2 Partitioning Intervals</a>
                              <ul>
                                <li>
                                  <a href="ch07s02.html#optimizer-single-point-intervals">7.2.6.2.1.2.1 Single-Point Intervals</a>
                                </li>
                                <li>
                                  <a href="ch07s02.html#optimizer-interval-walking">7.2.6.2.1.2.2 Interval Walking</a>
                                </li>
                                <li>
                                  <a href="ch07s02.html#optimizer-interval-mapping">7.2.6.2.1.2.3 Interval Mapping</a>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="ch07s02.html#optimizer-subpartitioning-intervals">7.2.6.2.1.3 Subpartitioning Intervals</a>
                            </li>
                            <li>
                              <a href="ch07s02.html#optimizer-where-clause-to-intervals">7.2.6.2.1.4 From WHERE Clauses to Intervals</a>
                            </li>
                            <li>
                              <a href="ch07s02.html#optimizer-partition-pruning-source-code">7.2.6.2.1.5 Partition Pruning in the Source Code</a>
                            </li>
                          </ul>
                        </li>
                        <li>
                          <a href="ch07s02.html#optimizer-partition-selection">7.2.6.2.2 Partition Selection</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch08.html">8 Tracing the Optimizer</a>
          <ul>
            <li>
              <a href="ch08.html#optimizer-tracing-typical-usage">8.1 Typical Usage</a>
            </li>
            <li>
              <a href="ch08s02.html">8.2 System Variables Controlling the Trace</a>
            </li>
            <li>
              <a href="ch08s03.html">8.3 The INFORMATION_SCHEMA.OPTIMIZER_TRACE Table</a>
            </li>
            <li>
              <a href="ch08s04.html">8.4 Traceable Queries</a>
            </li>
            <li>
              <a href="ch08s05.html">8.5 Automatic Trace Purging</a>
            </li>
            <li>
              <a href="ch08s06.html">8.6 Tuning Trace Purging</a>
            </li>
            <li>
              <a href="ch08s07.html">8.7 Tracing Memory Usage</a>
            </li>
            <li>
              <a href="ch08s08.html">8.8 Privilege Checking</a>
            </li>
            <li>
              <a href="ch08s09.html">8.9 Interaction with the --debug Option</a>
            </li>
            <li>
              <a href="ch08s10.html">8.10 The optimizer_trace System Variable</a>
            </li>
            <li>
              <a href="ch08s11.html">8.11 The end_markers_in_json System Variable</a>
            </li>
            <li>
              <a href="ch08s12.html">8.12 Selecting Optimizer Features to Trace</a>
            </li>
            <li>
              <a href="ch08s13.html">8.13 General Trace Structure</a>
            </li>
            <li>
              <a href="ch08s14.html">8.14 Example</a>
            </li>
            <li>
              <a href="ch08s15.html">8.15 Nicely Displaying a Trace</a>
            </li>
            <li>
              <a href="ch08s16.html">8.16 Preventing Use of Optimizer Trace</a>
            </li>
            <li>
              <a href="ch08s17.html">8.17 Testing</a>
            </li>
            <li>
              <a href="ch08s18.html">8.18 Implementation</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch09.html">9 Memory Allocation</a>
          <ul>
            <li>
              <a href="ch09.html#memory-allocation-mysql-server">9.1 Memory Allocation in the MySQL Server (sql Directory)</a>
            </li>
            <li>
              <a href="ch09s02.html">9.2 Memory Allocation in a Library or Storage Engine</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch10.html">10 Important Algorithms and Structures</a>
          <ul>
            <li>
              <a href="ch10.html#item-class">10.1 The Item Class</a>
            </li>
            <li>
              <a href="ch10s02.html">10.2 How MySQL Does Sorting (filesort)</a>
            </li>
            <li>
              <a href="ch10s03.html">10.3 Bulk Insert</a>
            </li>
            <li>
              <a href="ch10s04.html">10.4 How MySQL Does Caching</a>
            </li>
            <li>
              <a href="ch10s05.html">10.5 How MySQL Uses the Join Buffer Cache</a>
            </li>
            <li>
              <a href="ch10s06.html">10.6 How MySQL Handles FLUSH TABLES</a>
            </li>
            <li>
              <a href="ch10s07.html">10.7 Full-Text Search</a>
            </li>
            <li>
              <a href="ch10s08.html">10.8 FLOAT and DOUBLE Data Type Representation</a>
            </li>
            <li>
              <a href="ch10s09.html">10.9 Date and Time Data Type Representation</a>
            </li>
            <li>
              <a href="ch10s10.html">10.10 Threads</a>
            </li>
            <li>
              <a href="ch10s11.html">10.11 Character Sets and Collations</a>
            </li>
            <li>
              <a href="ch10s12.html">10.12 Error Flags and Functions</a>
            </li>
            <li>
              <a href="ch10s13.html">10.13 Functions in the mysys Library</a>
            </li>
            <li>
              <a href="ch10s14.html">10.14 Bitmaps</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch11.html">11 File Formats</a>
          <ul>
            <li>
              <a href="ch11.html#frm-file-format">11.1 MySQL .frm File Format</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch12.html">12 How MySQL Performs Different Selects</a>
          <ul>
            <li>
              <a href="ch12.html#select-steps">12.1 Steps of Select Execution</a>
            </li>
            <li>
              <a href="ch12s02.html">12.2 select_resultClass</a>
            </li>
            <li>
              <a href="ch12s03.html">12.3 SIMPLE or PRIMARY SELECT</a>
            </li>
            <li>
              <a href="ch12s04.html">12.4 Structure Of Complex Select</a>
            </li>
            <li>
              <a href="ch12s05.html">12.5 Non-Subquery UNION Execution</a>
            </li>
            <li>
              <a href="ch12s06.html">12.6 Derived Table Execution</a>
            </li>
            <li>
              <a href="ch12s07.html">12.7 Subqueries</a>
            </li>
            <li>
              <a href="ch12s08.html">12.8 Single Select Engine</a>
            </li>
            <li>
              <a href="ch12s09.html">12.9 Union Engine</a>
            </li>
            <li>
              <a href="ch12s10.html">12.10 Special Engines</a>
            </li>
            <li>
              <a href="ch12s11.html">12.11 Explain Execution</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch13.html">13 How MySQL Transforms Subqueries</a>
          <ul>
            <li>
              <a href="ch13.html#transformation-in">13.1 Item_in_subselect::select_transformer</a>
              <ul>
                <li>
                  <a href="ch13.html#transformation-scalar-in">13.1.1 Scalar IN Subquery</a>
                </li>
                <li>
                  <a href="ch13.html#transformations-row-in">13.1.2 Row IN Subquery</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch13s02.html">13.2 Item_allany_subselect</a>
            </li>
            <li>
              <a href="ch13s03.html">13.3 Item_singlerow_subselect</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch14.html">14 MySQL Client/Server Protocol</a>
          <ul>
            <li>
              <a href="ch14.html#overview">14.1 Overview</a>
              <ul>
                <li>
                  <a href="ch14.html#basic-types">14.1.1 Basic Types</a>
                  <ul>
                    <li>
                      <a href="ch14.html#integer">14.1.1.1 Integer Types</a>
                      <ul>
                        <li>
                          <a href="ch14.html#fixed-length-integer">14.1.1.1.1 Fixed-Length Integer Types</a>
                        </li>
                        <li>
                          <a href="ch14.html#length-encoded-integer">14.1.1.1.2 Length-Encoded Integer Type</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="ch14.html#string">14.1.1.2 String Types</a>
                    </li>
                    <li>
                      <a href="ch14.html#describing-packets">14.1.1.3 Describing Packets</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14.html#mysql-packet">14.1.2 MySQL Packet</a>
                  <ul>
                    <li>
                      <a href="ch14.html#sending-more-than-16mbyte">14.1.2.1 Sending More Than 16Mbyte</a>
                    </li>
                    <li>
                      <a href="ch14.html#sequence-id">14.1.2.2 Sequence ID</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14.html#generic-response-packets">14.1.3 Generic Response Packets</a>
                  <ul>
                    <li>
                      <a href="ch14.html#packet-OK_Packet">14.1.3.1 OK_Packet</a>
                      <ul>
                        <li>
                          <a href="ch14.html#cs-sect-packet-ok-sessioninfo">14.1.3.1.1 Session State Information</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="ch14.html#packet-ERR_Packet">14.1.3.2 ERR_Packet</a>
                    </li>
                    <li>
                      <a href="ch14.html#packet-EOF_Packet">14.1.3.3 EOF_Packet</a>
                    </li>
                    <li>
                      <a href="ch14.html#status-flags">14.1.3.4 Status Flags</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14.html#character-set">14.1.4 Character Set</a>
                </li>
                <li>
                  <a href="ch14.html#connection-lifecycle">14.1.5 Connection Lifecycle</a>
                </li>
                <li>
                  <a href="ch14.html#command-phase">14.1.6 Command Phase</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch14s02.html">14.2 Connection Phase</a>
              <ul>
                <li>
                  <a href="ch14s02.html#initial-handshake">14.2.1 Initial Handshake</a>
                  <ul>
                    <li>
                      <a href="ch14s02.html#plain-handshake">14.2.1.1 Plain Handshake</a>
                    </li>
                    <li>
                      <a href="ch14s02.html#ssl-handshake">14.2.1.2 SSL Handshake</a>
                    </li>
                    <li>
                      <a href="ch14s02.html#capability-negotiation">14.2.1.3 Capability Negotiation</a>
                    </li>
                    <li>
                      <a href="ch14s02.html#determining-authentication-method">14.2.1.4 Determining Authentication Method</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s02.html#auth-phase-fast-path">14.2.2 Auth Phase Fast Path</a>
                  <ul>
                    <li>
                      <a href="ch14s02.html#successful-authentication">14.2.2.1 Successful Authentication</a>
                    </li>
                    <li>
                      <a href="ch14s02.html#authentication-fails">14.2.2.2 Authentication Fails</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s02.html#authentication-method-mismatch">14.2.3 Authentication Method Mismatch</a>
                  <ul>
                    <li>
                      <a href="ch14s02.html#authentication-method-change">14.2.3.1 Authentication Method Change</a>
                    </li>
                    <li>
                      <a href="ch14s02.html#insufficient-client-capabilities">14.2.3.2 Insufficient Client Capabilities</a>
                    </li>
                    <li>
                      <a href="ch14s02.html#new-authentication-method-not-known-by-client">14.2.3.3 New Authentication Method Not Known by Client</a>
                    </li>
                    <li>
                      <a href="ch14s02.html#non-client-plugin-auth-clients">14.2.3.4 Non-CLIENT_PLUGIN_AUTH Clients</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s02.html#authentication-after-com-change-user-command">14.2.4 Authentication After COM_CHANGE_USER Command</a>
                  <ul>
                    <li>
                      <a href="ch14s02.html#com-change-user-and-non-client-plugin-auth-clients">14.2.4.1 COM_CHANGE_USER and Non-CLIENT_PLUGIN_AUTH Clients</a>
                    </li>
                    <li>
                      <a href="ch14s02.html#cs-sect-expired-password">14.2.4.2 Expired Password</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s02.html#connection-phase-packets">14.2.5 Connection Phase Packets</a>
                </li>
                <li>
                  <a href="ch14s02.html#capability-flags">14.2.6 Capability Flags</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch14s03.html">14.3 Authentication Method</a>
              <ul>
                <li>
                  <a href="ch14s03.html#limitations">14.3.1 Limitations</a>
                </li>
                <li>
                  <a href="ch14s03.html#old-password-authentication">14.3.2 Old Password Authentication</a>
                </li>
                <li>
                  <a href="ch14s03.html#secure-password-authentication">14.3.3 Secure Password Authentication</a>
                </li>
                <li>
                  <a href="ch14s03.html#clear-text-authentication">14.3.4 Clear Text Authentication</a>
                </li>
                <li>
                  <a href="ch14s03.html#windows-native-authentication">14.3.5 Windows Native Authentication</a>
                  <ul>
                    <li>
                      <a href="ch14s03.html#ntlm">14.3.5.1 NTLM</a>
                    </li>
                    <li>
                      <a href="ch14s03.html#spnego">14.3.5.2 SPNEGO</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s03.html#sha256">14.3.6 SHA256</a>
                  <ul>
                    <li>
                      <a href="ch14s03.html#public-key-retrieval">14.3.6.1 Public Key Retrieval</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch14s04.html">14.4 Compression</a>
              <ul>
                <li>
                  <a href="ch14s04.html#compressed-packet">14.4.1 Compressed Packet</a>
                </li>
                <li>
                  <a href="ch14s04.html#compressed-packet-header">14.4.2 Compressed Packet Header</a>
                </li>
                <li>
                  <a href="ch14s04.html#compressed-payload">14.4.3 Compressed Payload</a>
                  <ul>
                    <li>
                      <a href="ch14s04.html#example-one-mysql-packet">14.4.3.1 Example: One MySQL Packet</a>
                    </li>
                    <li>
                      <a href="ch14s04.html#example-several-mysql-packets">14.4.3.2 Example: Several MySQL Packets</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s04.html#uncompressed-payload">14.4.4 Uncompressed Payload</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch14s05.html">14.5 SSL</a>
            </li>
            <li>
              <a href="ch14s06.html">14.6 Text Protocol</a>
              <ul>
                <li>
                  <a href="ch14s06.html#com-sleep">14.6.1 COM_SLEEP</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-quit">14.6.2 COM_QUIT</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-init-db">14.6.3 COM_INIT_DB</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-query">14.6.4 COM_QUERY</a>
                  <ul>
                    <li>
                      <a href="ch14s06.html#com-query-response">14.6.4.1 COM_QUERY Response</a>
                      <ul>
                        <li>
                          <a href="ch14s06.html#text-resultset">14.6.4.1.1 Text Resultset</a>
                          <ul>
                            <li>
                              <a href="ch14s06.html#column-type">14.6.4.1.1.1 Column Type</a>
                            </li>
                            <li>
                              <a href="ch14s06.html#column-definition">14.6.4.1.1.2 Column Definition</a>
                            </li>
                            <li>
                              <a href="ch14s06.html#text-resultset-row">14.6.4.1.1.3 Text Resultset Row</a>
                            </li>
                          </ul>
                        </li>
                        <li>
                          <a href="ch14s06.html#local-infile-request">14.6.4.1.2 LOCAL INFILE Request</a>
                          <ul>
                            <li>
                              <a href="ch14s06.html#local-infile-data">14.6.4.1.2.1 LOCAL INFILE Data</a>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s06.html#com-field-list">14.6.5 COM_FIELD_LIST</a>
                  <ul>
                    <li>
                      <a href="ch14s06.html#com-field-list-response">14.6.5.1 COM_FIELD_LIST Response</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s06.html#com-create-db">14.6.6 COM_CREATE_DB</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-drop-db">14.6.7 COM_DROP_DB</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-refresh">14.6.8 COM_REFRESH</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-shutdown">14.6.9 COM_SHUTDOWN</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-statistics">14.6.10 COM_STATISTICS</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-process-info">14.6.11 COM_PROCESS_INFO</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-connect">14.6.12 COM_CONNECT</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-process-kill">14.6.13 COM_PROCESS_KILL</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-debug">14.6.14 COM_DEBUG</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-ping">14.6.15 COM_PING</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-time">14.6.16 COM_TIME</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-delayed-insert">14.6.17 COM_DELAYED_INSERT</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-change-user">14.6.18 COM_CHANGE_USER</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-reset-connection">14.6.19 COM_RESET_CONNECTION</a>
                </li>
                <li>
                  <a href="ch14s06.html#com-daemon">14.6.20 COM_DAEMON</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch14s07.html">14.7 Prepared Statements</a>
              <ul>
                <li>
                  <a href="ch14s07.html#binary-protocol-resultset">14.7.1 Binary Protocol Resultset</a>
                </li>
                <li>
                  <a href="ch14s07.html#binary-protocol-resultset-row">14.7.2 Binary Protocol Resultset Row</a>
                  <ul>
                    <li>
                      <a href="ch14s07.html#null-bitmap">14.7.2.1 NULL-Bitmap</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s07.html#binary-protocol-value">14.7.3 Binary Protocol Value</a>
                </li>
                <li>
                  <a href="ch14s07.html#com-stmt-prepare">14.7.4 COM_STMT_PREPARE</a>
                  <ul>
                    <li>
                      <a href="ch14s07.html#com-stmt-prepare-response">14.7.4.1 COM_STMT_PREPARE Response</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s07.html#com-stmt-send-long-data">14.7.5 COM_STMT_SEND_LONG_DATA</a>
                </li>
                <li>
                  <a href="ch14s07.html#com-stmt-execute">14.7.6 COM_STMT_EXECUTE</a>
                  <ul>
                    <li>
                      <a href="ch14s07.html#com-stmt-execute-response">14.7.6.1 COM_STMT_EXECUTE Response</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s07.html#com-stmt-close">14.7.7 COM_STMT_CLOSE</a>
                </li>
                <li>
                  <a href="ch14s07.html#com-stmt-reset">14.7.8 COM_STMT_RESET</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch14s08.html">14.8 Stored Procedures</a>
              <ul>
                <li>
                  <a href="ch14s08.html#multi-resultset">14.8.1 Multi-Resultset</a>
                  <ul>
                    <li>
                      <a href="ch14s08.html#out-parameter-set">14.8.1.1 OUT Parameter Set</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s08.html#multi-statement">14.8.2 Multi-Statement</a>
                </li>
                <li>
                  <a href="ch14s08.html#com-set-option">14.8.3 COM_SET_OPTION</a>
                </li>
                <li>
                  <a href="ch14s08.html#com-stmt-fetch">14.8.4 COM_STMT_FETCH</a>
                  <ul>
                    <li>
                      <a href="ch14s08.html#com-stmt-fetch-response">14.8.4.1 COM_STMT_FETCH Response</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch14s09.html">14.9 Replication Protocol</a>
              <ul>
                <li>
                  <a href="ch14s09.html#binlog-file">14.9.1 Binlog File</a>
                  <ul>
                    <li>
                      <a href="ch14s09.html#binlog-file-header">14.9.1.1 Binlog File Header</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s09.html#binlog-network-stream">14.9.2 Binlog Network Stream</a>
                </li>
                <li>
                  <a href="ch14s09.html#binlog-version">14.9.3 Binlog Version</a>
                  <ul>
                    <li>
                      <a href="ch14s09.html#determining-the-binlog-version">14.9.3.1 Determining the Binlog Version</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s09.html#binlog-event">14.9.4 Binlog Event</a>
                  <ul>
                    <li>
                      <a href="ch14s09.html#binlog-event-header">14.9.4.1 Binlog Event header</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#binlog-event-flag">14.9.4.2 Binlog Event Flag</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#binlog-event-type">14.9.4.3 Binlog Event Type</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#ignored-events">14.9.4.4 Ignored Cvents</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#start-event-v3">14.9.4.5 START_EVENT_V3</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#format-description-event">14.9.4.6 FORMAT_DESCRIPTION_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#rotate-event">14.9.4.7 ROTATE_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#stop-event">14.9.4.8 STOP_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#query-event">14.9.4.9 QUERY_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#load-event">14.9.4.10 LOAD_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#new-load-event">14.9.4.11 NEW_LOAD_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#create-file-event">14.9.4.12 CREATE_FILE_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#append-block-event">14.9.4.13 APPEND_BLOCK_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#exec-load-event">14.9.4.14 EXEC_LOAD_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#begin-load-query-event">14.9.4.15 BEGIN_LOAD_QUERY_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#execute-load-query-event">14.9.4.16 EXECUTE_LOAD_QUERY_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#delete-file-event">14.9.4.17 DELETE_FILE_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#rand-event">14.9.4.18 RAND_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#xid-event">14.9.4.19 XID_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#intvar-event">14.9.4.20 INTVAR_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#user-var-event">14.9.4.21 USER_VAR_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#incident-event">14.9.4.22 INCIDENT_EVENT</a>
                    </li>
                    <li>
                      <a href="ch14s09.html#heartbeat-event">14.9.4.23 HEARTBEAT_EVENT</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s09.html#com-binlog-dump">14.9.5 COM_BINLOG_DUMP</a>
                </li>
                <li>
                  <a href="ch14s09.html#com-binlog-dump-gtid">14.9.6 COM_BINLOG_DUMP_GTID</a>
                </li>
                <li>
                  <a href="ch14s09.html#com-table-dump">14.9.7 COM_TABLE_DUMP</a>
                </li>
                <li>
                  <a href="ch14s09.html#com-connect-out">14.9.8 COM_CONNECT_OUT</a>
                </li>
                <li>
                  <a href="ch14s09.html#com-register-slave">14.9.9 COM_REGISTER_SLAVE</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch14s10.html">14.10 Row-Based Replication</a>
              <ul>
                <li>
                  <a href="ch14s10.html#table-map-event">14.10.1 TABLE_MAP_EVENT</a>
                </li>
                <li>
                  <a href="ch14s10.html#rows-event">14.10.2 ROWS_EVENT</a>
                </li>
                <li>
                  <a href="ch14s10.html#rows-query-event">14.10.3 ROWS_QUERY_EVENT</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch14s11.html">14.11 Semi-Synchronous Replication</a>
              <ul>
                <li>
                  <a href="ch14s11.html#semi-sync-binlog-event">14.11.1 Semi-Synchronous Binlog Event</a>
                </li>
                <li>
                  <a href="ch14s11.html#semi-sync-ack-packet">14.11.2 Semi-Synchronous ACK Packet</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch14s12.html">14.12 Protocol Examples</a>
              <ul>
                <li>
                  <a href="ch14s12.html#a-mysql-client-logs-in">14.12.1 A mysql Client Logs In</a>
                </li>
                <li>
                  <a href="ch14s12.html#protocoltext-resultset">14.12.2 ProtocolText::Resultset</a>
                  <ul>
                    <li>
                      <a href="ch14s12.html#err-instead-of-eof">14.12.2.1 ERR Instead of EOF</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s12.html#auth-method-switch">14.12.3 Auth Method Switch</a>
                  <ul>
                    <li>
                      <a href="ch14s12.html#client-wants-native-server-wants-old">14.12.3.1 Client Wants Native, Server Wants Old</a>
                    </li>
                    <li>
                      <a href="ch14s12.html#client-wants-old-server-wants-native">14.12.3.2 Client Wants Old, Server Wants Native</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch14s12.html#sha256-example">14.12.4 SHA256 Example</a>
                  <ul>
                    <li>
                      <a href="ch14s12.html#fast-path">14.12.4.1 Fast Path</a>
                    </li>
                    <li>
                      <a href="ch14s12.html#public-key-retrieval-example">14.12.4.2 Public Key Retrieval Example</a>
                    </li>
                    <li>
                      <a href="ch14s12.html#not-so-fast-path">14.12.4.3 Not So Fast Path</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch14s13.html">14.13 Source Code Locations</a>
              <ul>
                <li>
                  <a href="ch14s13.html#mysql-server">14.13.1 MySQL Server</a>
                </li>
                <li>
                  <a href="ch14s13.html#binary-protocol-type-implementation">14.13.2 Binary Protocol Type Implementation</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch15.html">15 Stored Programs</a>
          <ul>
            <li>
              <a href="ch15.html#sp-overview">15.1 Overview</a>
            </li>
            <li>
              <a href="ch15s02.html">15.2 Persistent Representation</a>
              <ul>
                <li>
                  <a href="ch15s02.html#sp-storage-sp_sf">15.2.1 Stored Procedure and Stored Function Storage</a>
                </li>
                <li>
                  <a href="ch15s02.html#sp-storage-trigger">15.2.2 Table Trigger Storage</a>
                </li>
                <li>
                  <a href="ch15s02.html#sp-storage-event">15.2.3 Event Storage</a>
                </li>
                <li>
                  <a href="ch15s02.html#sp-storage-derived">15.2.4 Derived Attribute Storage</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch15s03.html">15.3 Internal Representation</a>
              <ul>
                <li>
                  <a href="ch15s03.html#sp-internal-instr">15.3.1 Instructions</a>
                </li>
                <li>
                  <a href="ch15s03.html#sp-internal-pcontext">15.3.2 Parsing Context</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch15s04.html">15.4 Stored Program Parser</a>
              <ul>
                <li>
                  <a href="ch15s04.html#sp-parser-struct">15.4.1 Parser Structure</a>
                </li>
                <li>
                  <a href="ch15s04.html#sp-parser-codegen">15.4.2 Single-Pass Code Generation</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch15s05.html">15.5 Flow Analysis Optimizations</a>
              <ul>
                <li>
                  <a href="ch15s05.html#sp-optimizer-dead">15.5.1 Dead Code Removal</a>
                </li>
                <li>
                  <a href="ch15s05.html#sp-optimizer-jump">15.5.2 Jump Shortcut Resolution</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch15s06.html">15.6 Stored Program Caches</a>
              <ul>
                <li>
                  <a href="ch15s06.html#sp-cache-sp">15.6.1 Stored Procedure Cache</a>
                </li>
                <li>
                  <a href="ch15s06.html#sp-cache-sf">15.6.2 Stored Function Cache</a>
                </li>
                <li>
                  <a href="ch15s06.html#sp-cache-trg">15.6.3 Table Trigger Cache</a>
                </li>
                <li>
                  <a href="ch15s06.html#sp-cache-evt">15.6.4 Events and Caching</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch15s07.html">15.7 Stored Program Execution</a>
              <ul>
                <li>
                  <a href="ch15s07.html#sp-exec-rcont">15.7.1 Runtime Context</a>
                  <ul>
                    <li>
                      <a href="ch15s07.html#sp-exec-rcont-var">15.7.1.1 Local Variables</a>
                    </li>
                    <li>
                      <a href="ch15s07.html#sp-exec-rcont-cursor">15.7.1.2 Cursors</a>
                    </li>
                    <li>
                      <a href="ch15s07.html#sp-exec-rcont-case">15.7.1.3 Case Expressions</a>
                    </li>
                    <li>
                      <a href="ch15s07.html#sp-exec-rcont-handler">15.7.1.4 Exception Handlers</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch15s07.html#sp-exec-instr">15.7.2 Executing One Instruction</a>
                </li>
                <li>
                  <a href="ch15s07.html#sp-exec-flow">15.7.3 Flow Control</a>
                </li>
                <li>
                  <a href="ch15s07.html#sp-exec-handler">15.7.4 Exception Handling</a>
                </li>
                <li>
                  <a href="ch15s07.html#sp-exec-nest">15.7.5 Call Nesting</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch16.html">16 Prepared Statement and Stored Routine Re-Execution</a>
          <ul>
            <li>
              <a href="ch16.html#prepared-stored-reexecution">16.1 Statement Re-Execution Requirements</a>
            </li>
            <li>
              <a href="ch16s02.html">16.2 Preparation of a Prepared Statement</a>
            </li>
            <li>
              <a href="ch16s03.html">16.3 Execution of a Prepared Statement</a>
            </li>
            <li>
              <a href="ch16s04.html">16.4 Execution of a Stored Procedure Statement</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch17.html">17 Writing a Procedure</a>
          <ul>
            <li>
              <a href="ch17.html#class-procedure">17.1 Extend Class Procedure</a>
              <ul>
                <li>
                  <a href="ch17.html#class-procedure-constructor">17.1.1 Constructor</a>
                </li>
                <li>
                  <a href="ch17.html#class-procedure-change-columns">17.1.2 change_columns()</a>
                </li>
                <li>
                  <a href="ch17.html#class-procedure-send-row">17.1.3 send_row()</a>
                </li>
                <li>
                  <a href="ch17.html#class-procedure-add">17.1.4 add()</a>
                </li>
                <li>
                  <a href="ch17.html#class-procedure-end-group">17.1.5 end_group()</a>
                </li>
                <li>
                  <a href="ch17.html#class-procedure-end-of-records">17.1.6 end_of_records()</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch17s02.html">17.2 Initialization Callback</a>
            </li>
            <li>
              <a href="ch17s03.html">17.3 Calling Sequence</a>
            </li>
            <li>
              <a href="ch17s04.html">17.4 Required Server Code Patches</a>
            </li>
            <li>
              <a href="ch17s05.html">17.5 Examples</a>
              <ul>
                <li>
                  <a href="ch17s05.html#procedure-rownum">17.5.1 PROCEDURE ROWNUM(): Adding a RowNum Pseudo Column to a Result Set</a>
                </li>
                <li>
                  <a href="ch17s05.html#procedure-calltrace">17.5.2 PROCEDURE CALLTRACE(): Simple Trace of Procedure Member Function Calls</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch18.html">18 Replication</a>
          <ul>
            <li>
              <a href="ch18.html#replication-organization">18.1 Chapter Organization</a>
            </li>
            <li>
              <a href="ch18s02.html">18.2 Source Code Files</a>
            </li>
            <li>
              <a href="ch18s03.html">18.3 Principles</a>
              <ul>
                <li>
                  <a href="ch18s03.html#binlog-formats">18.3.1 Binlog Formats</a>
                </li>
                <li>
                  <a href="ch18s03.html#differences-master-slave">18.3.2 Differences Between Master and Slave</a>
                  <ul>
                    <li>
                      <a href="ch18s03.html#replication-not-guaranteed">18.3.2.1 Exceptions: Situations Where We Do Not Guarantee Correct Replication</a>
                    </li>
                    <li>
                      <a href="ch18s03.html#replication-correct">18.3.2.2 Additions: Special Situations Where We Do Support Correct Replication</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch18s03.html#replication-crashes">18.3.3 Crashes</a>
                </li>
                <li>
                  <a href="ch18s03.html#binlog-files-and-indexes">18.3.4 Binlog Files and Indexes</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch18s04.html">18.4 Rules</a>
              <ul>
                <li>
                  <a href="ch18s04.html#determining-logging-format">18.4.1 Determining the Logging Format</a>
                </li>
                <li>
                  <a href="ch18s04.html#unsafe-statements">18.4.2 Unsafe Statements</a>
                </li>
                <li>
                  <a href="ch18s04.html#logging-transactions">18.4.3 Logging Transactions</a>
                  <ul>
                    <li>
                      <a href="ch18s04.html#logging-transactions-definitions">18.4.3.1 Definitions</a>
                    </li>
                    <li>
                      <a href="ch18s04.html#logging-transactions-preliminary-rules">18.4.3.2 Preliminary Rules</a>
                    </li>
                    <li>
                      <a href="ch18s04.html#logging-transactions-rules-for-non-committing-statements">18.4.3.3 Rules for Non-committing Statements, Except CREATE TEMPORARY TABLE...SELECT</a>
                    </li>
                    <li>
                      <a href="ch18s04.html#logging-transactions-rules-for-create-table-select">18.4.3.4 Rules for CREATE [TEMPORARY] TABLE...SELECT</a>
                    </li>
                    <li>
                      <a href="ch18s04.html#logging-transactions-rules-for-commmitting-statements">18.4.3.5 Rules for Committing Statements, Except CREATE [TEMPORARY] TABLE...SELECT</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch18s04.html#logging-updates-auto-incement-columns">18.4.4 Logging Updates to auto_increment Columns</a>
                </li>
                <li>
                  <a href="ch18s04.html#logging-access-variables-functions">18.4.5 Logging Access to Variables and Functions</a>
                </li>
                <li>
                  <a href="ch18s04.html#other-unsafe-statements">18.4.6 Other Unsafe Statements</a>
                </li>
                <li>
                  <a href="ch18s04.html#binlog-row-image">18.4.7 binlog_row_image</a>
                </li>
                <li>
                  <a href="ch18s04.html#replication-locks">18.4.8 Replication Locks</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch19.html">19 The Binary Log</a>
          <ul>
            <li>
              <a href="ch19.html#binary-log-overview">19.1 Binary Log Overview</a>
            </li>
            <li>
              <a href="ch19s02.html">19.2 High-Level Binary Log Structure and Contents</a>
            </li>
            <li>
              <a href="ch19s03.html">19.3 Source Files Related to the Binary Log</a>
              <ul>
                <li>
                  <a href="ch19s03.html#source-file-archaeological-notes">19.3.1 Source File Archaeological Notes</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch19s04.html">19.4 Generating Browsable Binary Log Information</a>
            </li>
            <li>
              <a href="ch19s05.html">19.5 Event Classes and Types</a>
              <ul>
                <li>
                  <a href="ch19s05.html#event-class-archaeological-notes">19.5.1 Event Class Archaeological Notes</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch19s06.html">19.6 Event Meanings</a>
            </li>
            <li>
              <a href="ch19s07.html">19.7 Event Structure</a>
              <ul>
                <li>
                  <a href="ch19s07.html#event-content-writing-conventions">19.7.1 Event Content-Writing Conventions</a>
                </li>
                <li>
                  <a href="ch19s07.html#event-header-fields">19.7.2 Event Header Fields</a>
                  <ul>
                    <li>
                      <a href="ch19s07.html#event-flags">19.7.2.1 Event Flags</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch19s07.html#event-data-fields">19.7.3 Event Data Fields (Event-Specific Information)</a>
                  <ul>
                    <li>
                      <a href="ch19s07.html#event-data-field-notational-caveat">19.7.3.1 Event Data Field Notational Caveat</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch19s08.html">19.8 Binary Log Versions</a>
              <ul>
                <li>
                  <a href="ch19s08.html#determining-binary-log-version">19.8.1 Determining the Binary Log Version</a>
                </li>
                <li>
                  <a href="ch19s08.html#ensuring-compatibility-of-future-binary-log-versions">19.8.2 Ensuring Compatibility of Future Binary Log Versions</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch19s09.html">19.9 Event Data for Specific Event Types</a>
              <ul>
                <li>
                  <a href="ch19s09.html#load-data-infile-events">19.9.1 LOAD DATA INFILE Events</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch19s10.html">19.10 Row-Based Binary Logging</a>
            </li>
            <li>
              <a href="ch19s11.html">19.11 Additional Resources</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch20.html">20 MyISAM Storage Engine</a>
          <ul>
            <li>
              <a href="ch20.html#myisam-record-structure">20.1 MyISAM Record Structure</a>
              <ul>
                <li>
                  <a href="ch20.html#myisam-introduction">20.1.1 Introduction</a>
                </li>
                <li>
                  <a href="ch20.html#myisam-column-attributes">20.1.2 Physical Attributes of Columns</a>
                </li>
                <li>
                  <a href="ch20.html#myisam-more-information">20.1.3 Where to Look For More Information</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch20s02.html">20.2 The .MYI File</a>
              <ul>
                <li>
                  <a href="ch20s02.html#myisam-files">20.2.1 MyISAM Files</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch20s03.html">20.3 MyISAM Dynamic Data File Layout</a>
              <ul>
                <li>
                  <a href="ch20s03.html#layout-record-storage-frame">20.3.1 Layout of the Record Storage Frame (Record Part, Record Block)</a>
                </li>
                <li>
                  <a href="ch20s03.html#record-contents">20.3.2 Record Contents</a>
                </li>
                <li>
                  <a href="ch20s03.html#packed-record-layout">20.3.3 Packed Record Layout</a>
                </li>
                <li>
                  <a href="ch20s03.html#in-memory-record-layout">20.3.4 In-memory Record Layout</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch20s04.html">20.4 MyISAM Compressed Data File Layout</a>
              <ul>
                <li>
                  <a href="ch20s04.html#huffman-compression">20.4.1 Huffman Compression</a>
                </li>
                <li>
                  <a href="ch20s04.html#myisampack">20.4.2 The myisampack Program</a>
                </li>
                <li>
                  <a href="ch20s04.html#record-and-blob-length-encoding">20.4.3 Record and Blob Length Encoding</a>
                </li>
                <li>
                  <a href="ch20s04.html#code-tree-representation">20.4.4 Code Tree Representation</a>
                </li>
                <li>
                  <a href="ch20s04.html#index-file-usage">20.4.5 Usage of the Index File</a>
                </li>
                <li>
                  <a href="ch20s04.html#myisampack-tricks">20.4.6 myisampackTricks</a>
                </li>
                <li>
                  <a href="ch20s04.html#decoding-specification">20.4.7 Detailed Specification of the Decoding</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch20s05.html">20.5 MyISAM Key Cache</a>
              <ul>
                <li>
                  <a href="ch20s05.html#myisam-concurrent-insert">20.5.1 MyISAM Concurrent Insert</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch21.html">21 InnoDB Storage Engine</a>
          <ul>
            <li>
              <a href="ch21.html#innodb-record-structure">21.1 InnoDB Record Structure</a>
              <ul>
                <li>
                  <a href="ch21.html#innodb-overview">21.1.1 High-Altitude Picture</a>
                  <ul>
                    <li>
                      <a href="ch21.html#innodb-field-start-offsets">21.1.1.1 FIELD START OFFSETS</a>
                    </li>
                    <li>
                      <a href="ch21.html#innodb-extra-bytes">21.1.1.2 EXTRA BYTES</a>
                    </li>
                    <li>
                      <a href="ch21.html#innodb-field-contents">21.1.1.3 FIELD CONTENTS</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch21.html#innodb-more-information">21.1.2 Where to Look for More Information</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch21s02.html">21.2 InnoDB Page Structure</a>
              <ul>
                <li>
                  <a href="ch21s02.html#innodb-page-overview">21.2.1 High-Altitude View</a>
                  <ul>
                    <li>
                      <a href="ch21s02.html#innodb-fil-header">21.2.1.1 Fil Header</a>
                    </li>
                    <li>
                      <a href="ch21s02.html#innodb-page-header">21.2.1.2 Page Header</a>
                    </li>
                    <li>
                      <a href="ch21s02.html#innodb-infimum-and-supremum-records">21.2.1.3 The Infimum and Supremum Records</a>
                    </li>
                    <li>
                      <a href="ch21s02.html#innodb-user-records">21.2.1.4 User Records</a>
                    </li>
                    <li>
                      <a href="ch21s02.html#innodb-free-space">21.2.1.5 Free Space</a>
                    </li>
                    <li>
                      <a href="ch21s02.html#innodb-page-directory">21.2.1.6 Page Directory</a>
                    </li>
                    <li>
                      <a href="ch21s02.html#innodb-fil-trailer">21.2.1.7 Fil Trailer</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch21s02.html#innodb-page-example">21.2.2 Example</a>
                </li>
                <li>
                  <a href="ch21s02.html#innodb-more-page-information">21.2.3 Where to Look For More Information</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch22.html">22 Writing a Custom Storage Engine</a>
          <ul>
            <li>
              <a href="ch22.html#custom-engine-additional-resources">22.1 Additional Resources</a>
            </li>
            <li>
              <a href="ch22s02.html">22.2 Overview</a>
            </li>
            <li>
              <a href="ch22s03.html">22.3 Creating Storage Engine Source Files</a>
            </li>
            <li>
              <a href="ch22s04.html">22.4 Adding Engine Specific Variables and Parameters</a>
            </li>
            <li>
              <a href="ch22s05.html">22.5 Creating the handlerton</a>
            </li>
            <li>
              <a href="ch22s06.html">22.6 Handling Handler Instantiation</a>
            </li>
            <li>
              <a href="ch22s07.html">22.7 Defining Filename Extensions</a>
            </li>
            <li>
              <a href="ch22s08.html">22.8 Creating Tables</a>
            </li>
            <li>
              <a href="ch22s09.html">22.9 Opening a Table</a>
            </li>
            <li>
              <a href="ch22s10.html">22.10 Implementing Basic Table Scanning</a>
              <ul>
                <li>
                  <a href="ch22s10.html#implementing-store-lock-method">22.10.1 Implementing the store_lock() Method</a>
                </li>
                <li>
                  <a href="ch22s10.html#implementing-external-lock-method">22.10.2 Implementing the external_lock() Method</a>
                </li>
                <li>
                  <a href="ch22s10.html#implementing-rnd-init-method">22.10.3 Implementing the rnd_init() Method</a>
                </li>
                <li>
                  <a href="ch22s10.html#implementing-info-method">22.10.4 Implementing the info(uinf flag) Method</a>
                </li>
                <li>
                  <a href="ch22s10.html#implementing-extra-method">22.10.5 Implementing the extra() Method</a>
                </li>
                <li>
                  <a href="ch22s10.html#implementing-rnd-next-method">22.10.6 Implementing the rnd_next() Method</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch22s11.html">22.11 Closing a Table</a>
            </li>
            <li>
              <a href="ch22s12.html">22.12 Adding Support for INSERT to a Storage Engine</a>
            </li>
            <li>
              <a href="ch22s13.html">22.13 Adding Support for UPDATE to a Storage Engine</a>
            </li>
            <li>
              <a href="ch22s14.html">22.14 Adding Support for DELETE to a Storage Engine</a>
            </li>
            <li>
              <a href="ch22s15.html">22.15 Supporting Non-Sequential Reads</a>
              <ul>
                <li>
                  <a href="ch22s15.html#implementing-position-method">22.15.1 Implementing the position() Method</a>
                </li>
                <li>
                  <a href="ch22s15.html#implementing-rnd-pos-method">22.15.2 Implementing the rnd_pos() Method</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch22s16.html">22.16 Supporting Indexing</a>
              <ul>
                <li>
                  <a href="ch22s16.html#indexing-overview">22.16.1 Indexing Overview</a>
                </li>
                <li>
                  <a href="ch22s16.html#getting-index-information">22.16.2 Getting Index Information During CREATE TABLE Operations</a>
                </li>
                <li>
                  <a href="ch22s16.html#creating-index-keys">22.16.3 Creating Index Keys</a>
                </li>
                <li>
                  <a href="ch22s16.html#parsing-key-information">22.16.4 Parsing Key Information</a>
                </li>
                <li>
                  <a href="ch22s16.html#providing-index-information-to-optimizer">22.16.5 Providing Index Information to the Optimizer</a>
                  <ul>
                    <li>
                      <a href="ch22s16.html#implementing-the-info-method">22.16.5.1 Implementing the info() Method</a>
                    </li>
                    <li>
                      <a href="ch22s16.html#implementing-records-in-range-method">22.16.5.2 Implementing the records_in_range Method</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s16.html#preparing-for-index-use">22.16.6 Preparing for Index Use with index_init()</a>
                </li>
                <li>
                  <a href="ch22s16.html#cleaning-up-with-index-end">22.16.7 Cleaning up with index_end()</a>
                </li>
                <li>
                  <a href="ch22s16.html#implementing-index-read-method">22.16.8 Implementing the index_read() Method</a>
                </li>
                <li>
                  <a href="ch22s16.html#implementing-the-rnd-next-method">22.16.9 Implementing the index_read_idx() Method</a>
                </li>
                <li>
                  <a href="ch22s16.html#implementing-index-read-last-method">22.16.10 Implementing the index_read_last() Method</a>
                </li>
                <li>
                  <a href="ch22s16.html#implementing-index-next-method">22.16.11 Implementing the index_next() Method</a>
                </li>
                <li>
                  <a href="ch22s16.html#implementing-index-prev-method">22.16.12 Implementing the index_prev() Method</a>
                </li>
                <li>
                  <a href="ch22s16.html#implementing-index-first-method">22.16.13 Implementing the index_first() Method</a>
                </li>
                <li>
                  <a href="ch22s16.html#implementing-index-last-method">22.16.14 Implementing the index_last() Method</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch22s17.html">22.17 Supporting Transactions</a>
              <ul>
                <li>
                  <a href="ch22s17.html#transaction-overview">22.17.1 Transaction Overview</a>
                </li>
                <li>
                  <a href="ch22s17.html#starting-transaction">22.17.2 Starting a Transaction</a>
                  <ul>
                    <li>
                      <a href="ch22s17.html#starting-transaction-from-start-stmt-call">22.17.2.1 Starting a Transaction from a start_stmt() Call</a>
                    </li>
                    <li>
                      <a href="ch22s17.html#starting-transaction-from-external-lock-method">22.17.2.2 Starting a Transaction from a external_lock() Method</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s17.html#implementing-rollback">22.17.3 Implementing ROLLBACK</a>
                </li>
                <li>
                  <a href="ch22s17.html#implementing-commit">22.17.4 Implementing COMMIT</a>
                </li>
                <li>
                  <a href="ch22s17.html#support-for-savepoints">22.17.5 Adding Support for Savepoints</a>
                  <ul>
                    <li>
                      <a href="ch22s17.html#specifying-savepoint-offset">22.17.5.1 Specifying the Savepoint Offset</a>
                    </li>
                    <li>
                      <a href="ch22s17.html#implementing-savepoint-set-method">22.17.5.2 Implementing the savepoint_set Method</a>
                    </li>
                    <li>
                      <a href="ch22s17.html#implementing-savepoint-rollback-method">22.17.5.3 Implementing the savepoint_rollback() Method</a>
                    </li>
                    <li>
                      <a href="ch22s17.html#implementing-savepoint-release-method">22.17.5.4 Implementing the savepoint_release() Method</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch22s18.html">22.18 API Reference</a>
              <ul>
                <li>
                  <a href="ch22s18.html#bas-ext">22.18.1 bas_ext</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#bas-ext-purpose">22.18.1.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#bas-ext-synopsis">22.18.1.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#bas-ext-description">22.18.1.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#bas-ext-parameters">22.18.1.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#bas-ext-return-values">22.18.1.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#bas-ext-usage">22.18.1.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#bas-ext-default-implementation">22.18.1.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#close">22.18.2 close</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#close-purpose">22.18.2.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#close-synopsis">22.18.2.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#close-description">22.18.2.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#close-parameters">22.18.2.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#close-return-values">22.18.2.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#close-usage">22.18.2.6 Usage</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#create">22.18.3 create</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#create-purpose">22.18.3.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#create-synopsis">22.18.3.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#create-description">22.18.3.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#create-parameters">22.18.3.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#create-return-values">22.18.3.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#create-usage">22.18.3.6 Usage</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#delete-row">22.18.4 delete_row</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#delete-row-purpose">22.18.4.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#delete-row-synopsis">22.18.4.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#delete-row-description">22.18.4.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#delete-row-parameters">22.18.4.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#delete-row-return-values">22.18.4.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#delete-row-usage">22.18.4.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#delete-row-default-implementation">22.18.4.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#delete-table">22.18.5 delete_table</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#delete-table-purpose">22.18.5.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#delete-table-synopsis">22.18.5.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#delete-table-description">22.18.5.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#delete-table-parameters">22.18.5.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#delete-table-return-values">22.18.5.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#delete-table-usage">22.18.5.6 Usage</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#external-lock">22.18.6 external_lock</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#external-lock-purpose">22.18.6.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#external-lock-synopsis">22.18.6.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#external-lock-description">22.18.6.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#external-lock-parameters">22.18.6.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#external-lock-return-values">22.18.6.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#external-lock-default-implementation">22.18.6.6 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#extra">22.18.7 extra</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#extra-purpose">22.18.7.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#extra-synopsis">22.18.7.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#extra-description">22.18.7.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#extra-parameters">22.18.7.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#extra-return-values">22.18.7.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#extra-usage">22.18.7.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#extra-default-implementation">22.18.7.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#index-end">22.18.8 index_end</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#index-end-purpose">22.18.8.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-end-synopsis">22.18.8.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-end-description">22.18.8.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-end-parameters">22.18.8.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-end-return-values">22.18.8.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-end-usage">22.18.8.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-end-default-implementation">22.18.8.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#index-first">22.18.9 index_first</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#index-first-purpose">22.18.9.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-first-synopsis">22.18.9.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-first-description">22.18.9.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-first-parameters">22.18.9.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-first-return-values">22.18.9.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-first-usage">22.18.9.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-first-default-implementation">22.18.9.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#index-init">22.18.10 index_init</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#index-init-purpose">22.18.10.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-init-synopsis">22.18.10.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-init-description">22.18.10.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-init-parameters">22.18.10.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-init-return-values">22.18.10.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-init-usage">22.18.10.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-init-default-implementation">22.18.10.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#index-last">22.18.11 index_last</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#index-last-purpose">22.18.11.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-last-synopsis">22.18.11.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-last-description">22.18.11.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-last-parameters">22.18.11.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-last-return-values">22.18.11.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-last-usage">22.18.11.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-last-default-implementation">22.18.11.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#index-next">22.18.12 index_next</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#index-next-purpose">22.18.12.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-next-synopsis">22.18.12.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-next-description">22.18.12.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-next-parameters">22.18.12.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-next-return-values">22.18.12.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-next-usage">22.18.12.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-next-default-implementation">22.18.12.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#index-prev">22.18.13 index_prev</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#index-prev-purpose">22.18.13.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-prev-synopsis">22.18.13.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-prev-description">22.18.13.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-prev-parameters">22.18.13.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-prev-return-values">22.18.13.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-prev-usage">22.18.13.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-prev-default-implementation">22.18.13.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#index-read">22.18.14 index_read</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#index-read-purpose">22.18.14.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-synopsis">22.18.14.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-description">22.18.14.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-parameters">22.18.14.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-return-values">22.18.14.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-usage">22.18.14.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-default-implementation">22.18.14.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#index-read-idx">22.18.15 index_read_idx</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#index-read-idx-purpose">22.18.15.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-idx-synopsis">22.18.15.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-idx-description">22.18.15.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-idx-parameters">22.18.15.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-idx-return-values">22.18.15.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-idx-usage">22.18.15.6 Usage</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#index-read-last">22.18.16 index_read_last</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#index-read-last-purpose">22.18.16.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-last-synopsis">22.18.16.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-last-description">22.18.16.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-last-parameters">22.18.16.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-last-return-values">22.18.16.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-last-usage">22.18.16.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#index-read-last-default-implementation">22.18.16.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#info">22.18.17 info</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#info-purpose">22.18.17.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#info-synopsis">22.18.17.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#info-description">22.18.17.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#info-parameters">22.18.17.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#info-return-values">22.18.17.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#info-usage">22.18.17.6 Usage</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#open">22.18.18 open</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#open-purpose">22.18.18.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#open-synopsis">22.18.18.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#open-description">22.18.18.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#open-parameters">22.18.18.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#open-return-values">22.18.18.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#open-usage">22.18.18.6 Usage</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#position">22.18.19 position</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#position-purpose">22.18.19.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#position-synapsis">22.18.19.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#position-description">22.18.19.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#position-parameters">22.18.19.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#position-return-values">22.18.19.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#position-usage">22.18.19.6 Usage</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#records-in-range">22.18.20 records_in_range</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#records-in-range-purpose">22.18.20.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#records-in-range-synopsis">22.18.20.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#records-in-range-description">22.18.20.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#records-in-range-parameters">22.18.20.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#records-in-range-return-values">22.18.20.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#records-in-range-usage">22.18.20.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#records-in-range-default-implementation">22.18.20.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#rnd-init">22.18.21 rnd_init</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#rnd-init-purpose">22.18.21.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-init-synopsis">22.18.21.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-init-description">22.18.21.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-init-parameters">22.18.21.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-init-return-values">22.18.21.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-init-usage">22.18.21.6 Usage</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#rnd-next">22.18.22 rnd_next</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#rnd-next-purpose">22.18.22.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-next-synopsis">22.18.22.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-next-description">22.18.22.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-next-parameters">22.18.22.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-next-return-values">22.18.22.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-next-usage">22.18.22.6 Usage</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#rnd-pos">22.18.23 rnd_pos</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#rnd-pos-purpose">22.18.23.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-pos-synopsis">22.18.23.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-pos-description">22.18.23.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-pos-parameters">22.18.23.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-pos-return-values">22.18.23.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#rnd-pos-usage">22.18.23.6 Usage</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#start-stmt">22.18.24 start_stmt</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#start-stmt-purpose">22.18.24.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#start-stmt-synopsis">22.18.24.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#start-stmt-description">22.18.24.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#start-stmt-parameters">22.18.24.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#start-stmt-return-values">22.18.24.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#start-stmt-usage">22.18.24.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#start-stmt-default-implementation">22.18.24.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#store-lock">22.18.25 store_lock</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#store-lock-purpose">22.18.25.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#store-lock-synopsis">22.18.25.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#store-lock-description">22.18.25.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#store-lock-parameters">22.18.25.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#store-lock-return-values">22.18.25.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#store-lock-usage">22.18.25.6 Usage</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#update-row">22.18.26 update_row</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#update-row-purpose">22.18.26.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#update-row-synopsis">22.18.26.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#update-row-description">22.18.26.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#update-row-parameters">22.18.26.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#update-row-return-values">22.18.26.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#update-row-usage">22.18.26.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#update-row-default-implementation">22.18.26.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="ch22s18.html#write-row">22.18.27 write_row</a>
                  <ul>
                    <li>
                      <a href="ch22s18.html#write-row-purpose">22.18.27.1 Purpose</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#write-row-synopsis">22.18.27.2 Synopsis</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#write-row-description">22.18.27.3 Description</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#write-row-parameters">22.18.27.4 Parameters</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#write-row-return-values">22.18.27.5 Return Values</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#write-row-usage">22.18.27.6 Usage</a>
                    </li>
                    <li>
                      <a href="ch22s18.html#write-row-default-implementation">22.18.27.7 Default Implementation</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch22s19.html">22.19 FAQ</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch23.html">23 Test Synchronization</a>
          <ul>
            <li>
              <a href="ch23.html#sleep">23.1 Sleep</a>
            </li>
            <li>
              <a href="ch23s02.html">23.2 Wait Condition</a>
            </li>
            <li>
              <a href="ch23s03.html">23.3 Dbug Sleep</a>
            </li>
            <li>
              <a href="ch23s04.html">23.4 Error Injection</a>
            </li>
            <li>
              <a href="ch23s05.html">23.5 User-Level Locks</a>
            </li>
            <li>
              <a href="ch23s06.html">23.6 Debug Sync Facility</a>
              <ul>
                <li>
                  <a href="ch23s06.html#syntax-debug-sync-values">23.6.1 Formal Syntax for DEBUG_SYNC Values</a>
                </li>
                <li>
                  <a href="ch23s06.html#debug-sync-activation-deactivation">23.6.2 Debug Sync Activation/Deactivation</a>
                </li>
                <li>
                  <a href="ch23s06.html#debug-sync-implementation">23.6.3 Debug Sync Implementation</a>
                </li>
                <li>
                  <a href="ch23s06.html#synchronization-pattern">23.6.4 A Typical Synchronization Pattern</a>
                </li>
                <li>
                  <a href="ch23s06.html#cowork-with-dbug-facility">23.6.5 Co-work With the DBUG Facility</a>
                </li>
                <li>
                  <a href="ch23s06.html#debug-sync-further-reading">23.6.6 Debug Sync Further Reading</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch23s07.html">23.7 Debug Sync Point (Obsolete)</a>
              <ul>
                <li>
                  <a href="ch23s07.html#backup-breakpoint">23.7.1 Backup Breakpoint</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch24.html">24 Injecting Test Faults</a>
          <ul>
            <li>
              <a href="ch24.html#test-faults-macros">24.1 Test Fault Macros</a>
            </li>
            <li>
              <a href="ch24s02.html">24.2 Test Fault Macro Usage</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch25.html">25 How to Create Good Test Cases</a>
          <ul>
            <li>
              <a href="ch25.html#formal-stuff">25.1 Formal Stuff</a>
              <ul>
                <li>
                  <a href="ch25.html#coding-style">25.1.1 Coding Style</a>
                </li>
                <li>
                  <a href="ch25.html#sql-statement-example">25.1.2 SQL Statement Example</a>
                </li>
                <li>
                  <a href="ch25.html#avoid-too-dense-code">25.1.3 Please Avoid too Dense Code</a>
                </li>
                <li>
                  <a href="ch25.html#header-of-scripts">25.1.4 Header of Scripts</a>
                </li>
                <li>
                  <a href="ch25.html#header-example">25.1.5 Header Example</a>
                </li>
                <li>
                  <a href="ch25.html#comments-within-boxes">25.1.6 Comments Within Boxes</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch25s02.html">25.2 Comments Everywhere</a>
              <ul>
                <li>
                  <a href="ch25s02.html#complicated-test-architecture">25.2.1 Complicated test Architecture or Tricky Code</a>
                </li>
                <li>
                  <a href="ch25s02.html#subtest-case">25.2.2 A Subtest Case is Able to Reveal a Bug</a>
                </li>
                <li>
                  <a href="ch25s02.html#subtests">25.2.3 Subtests</a>
                </li>
                <li>
                  <a href="ch25s02.html#make-test-protocols-more-understandable">25.2.4 Make Test Protocols More Understandable</a>
                </li>
                <li>
                  <a href="ch25s02.html#better-protocols-example">25.2.5 Better Protocol Example</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch25s03.html">25.3 Some Rules Outside of the Formal Stuff</a>
              <ul>
                <li>
                  <a href="ch25s03.html#error-masking">25.3.1 Error Masking</a>
                </li>
                <li>
                  <a href="ch25s03.html#use-of-disable-abort-on-error">25.3.2 Use of the Option --disable_abort_on_error</a>
                </li>
                <li>
                  <a href="ch25s03.html#perfect-cleanup">25.3.3 Perfect Cleanup at the End of a Test</a>
                </li>
                <li>
                  <a href="ch25s03.html#os-specific-commands">25.3.4 Use of OS-Specific Commands</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch25s04.html">25.4 Negative Tests</a>
            </li>
            <li>
              <a href="ch25s05.html">25.5 Tests with Several Variants</a>
              <ul>
                <li>
                  <a href="ch25s05.html#variation-of-storage-engine">25.5.1 Variation of the Storage Engine</a>
                </li>
                <li>
                  <a href="ch25s05.html#variation-of-protocol-option">25.5.2 Variation of the Protocol Option</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch25s06.html">25.6 Miscellaneous Tips</a>
              <ul>
                <li>
                  <a href="ch25s06.html#stability-checks-for-random-timing-problems">25.6.1 Stability Checks for Random Timing Problems</a>
                </li>
                <li>
                  <a href="ch25s06.html#stability-checks-for-hostname-problems">25.6.2 Stability Checks for Hostname-Related Problems</a>
                </li>
                <li>
                  <a href="ch25s06.html#stability-checks-for-unexpected-problems">25.6.3 Stability Checks for Unexpected Problems</a>
                </li>
                <li>
                  <a href="ch25s06.html#row-order-within-result-sets">25.6.4 Row Order Within Result Sets</a>
                </li>
                <li>
                  <a href="ch25s06.html#test-case-behavior-depending-on-show">25.6.5 Test Case Behavior Should Depend on the Result of a SHOW</a>
                </li>
                <li>
                  <a href="ch25s06.html#test-execution-hanging">25.6.6 Does a Test Execution Hang?</a>
                </li>
                <li>
                  <a href="ch25s06.html#complicated-test-support-debugging">25.6.7 If Your Test is Complicated, Support Debugging</a>
                </li>
                <li>
                  <a href="ch25s06.html#grepping-for-syntax">25.6.8 You Need to Know Some Syntax, an Option, Etc., but Hate Reading Manuals</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch25s07.html">25.7 Notes on MTR2</a>
            </li>
            <li>
              <a href="ch25s08.html">25.8 Examples of Suspicious Tests and Scripts</a>
              <ul>
                <li>
                  <a href="ch25s08.html#mismatch-of-focus-of-test-and-code-sequence">25.8.1 Probably Mismatch of Focus of Test and Code Sequence</a>
                </li>
                <li>
                  <a href="ch25s08.html#too-greedy-test">25.8.2 Too Greedy Test</a>
                </li>
                <li>
                  <a href="ch25s08.html#risky-handling-around-additional-sessions">25.8.3 Risky Handling Around Additional Sessions</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="ch26.html">26 Error Messages</a>
          <ul>
            <li>
              <a href="ch26.html#error-message-adding">26.1 Adding New Error Messages to MySQL</a>
              <ul>
                <li>
                  <a href="ch26.html#error-message-multiple-versions">26.1.1 Adding an Error Message to Multiple MySQL Versions</a>
                </li>
                <li>
                  <a href="ch26.html#error-messages-5-0-3-higher">26.1.2 Adding Error Messages to MySQL 5.0.3 or Higher</a>
                </li>
                <li>
                  <a href="ch26.html#error-messages-old-versions">26.1.3 Adding Error Messages to Old (&lt; MySQL 5.0) Versions</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="ch26s02.html">26.2 Adding Storage Engine Error Messages</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="apa.html">A MySQL Source Code Distribution</a>
          <ul>
            <li>
              <a href="apa.html#source-directory-listing">A.1 Directory Listing</a>
              <ul>
                <li>
                  <a href="apa.html#build-directory">A.1.1 The BUILD Directory</a>
                </li>
                <li>
                  <a href="apa.html#client-directory">A.1.2 The client Directory</a>
                </li>
                <li>
                  <a href="apa.html#config-directory">A.1.3 The config Directory</a>
                </li>
                <li>
                  <a href="apa.html#cmd-line-utils-directory">A.1.4 The cmd-line-utils Directory</a>
                </li>
                <li>
                  <a href="apa.html#dbug-directory">A.1.5 The dbug Directory</a>
                </li>
                <li>
                  <a href="apa.html#docs-directory">A.1.6 The Docs Directory</a>
                </li>
                <li>
                  <a href="apa.html#extra-directory">A.1.7 The extra Directory</a>
                </li>
                <li>
                  <a href="apa.html#heap-directory">A.1.8 The heap Directory</a>
                </li>
                <li>
                  <a href="apa.html#include-directory">A.1.9 The include Directory</a>
                </li>
                <li>
                  <a href="apa.html#innobase-directory">A.1.10 The innobase Directory</a>
                </li>
                <li>
                  <a href="apa.html#libmysql-directory">A.1.11 The libmysql Directory</a>
                </li>
                <li>
                  <a href="apa.html#libmysql-r-directory">A.1.12 The libmysql_r Directory</a>
                </li>
                <li>
                  <a href="apa.html#libmysqld-directory">A.1.13 The libmysqld Directory</a>
                </li>
                <li>
                  <a href="apa.html#man-directory">A.1.14 The man Directory</a>
                </li>
                <li>
                  <a href="apa.html#myisam-directory">A.1.15 The myisam Directory</a>
                </li>
                <li>
                  <a href="apa.html#myisammrg-directory">A.1.16 The myisammrg Directory</a>
                </li>
                <li>
                  <a href="apa.html#mysql-test-directory">A.1.17 The mysql-test Directory</a>
                </li>
                <li>
                  <a href="apa.html#mysys-directory">A.1.18 The mysys Directory</a>
                </li>
                <li>
                  <a href="apa.html#ndb-directory">A.1.19 The ndb Directory</a>
                </li>
                <li>
                  <a href="apa.html#netware-directory">A.1.20 The netware Directory</a>
                </li>
                <li>
                  <a href="apa.html#new-rpms-directory">A.1.21 The NEW-RPMS Directory</a>
                </li>
                <li>
                  <a href="apa.html#os-directory">A.1.22 The os2 Directory</a>
                </li>
                <li>
                  <a href="apa.html#pstack-directory">A.1.23 The pstack Directory</a>
                </li>
                <li>
                  <a href="apa.html#regex-directory">A.1.24 The regex Directory</a>
                </li>
                <li>
                  <a href="apa.html#sccs-directory">A.1.25 The SCCS Directory</a>
                </li>
                <li>
                  <a href="apa.html#scripts-directory">A.1.26 The scripts Directory</a>
                </li>
                <li>
                  <a href="apa.html#server-tools-directory">A.1.27 The server-tools Directory</a>
                </li>
                <li>
                  <a href="apa.html#sql-directory">A.1.28 The sql Directory</a>
                </li>
                <li>
                  <a href="apa.html#sql-bench-directory">A.1.29 The sql-bench Directory</a>
                </li>
                <li>
                  <a href="apa.html#sql-common-directory">A.1.30 The sql-common Directory</a>
                </li>
                <li>
                  <a href="apa.html#ssl-directory">A.1.31 The SSL Directory</a>
                </li>
                <li>
                  <a href="apa.html#strings-directory">A.1.32 The strings Directory</a>
                </li>
                <li>
                  <a href="apa.html#support-files-directory">A.1.33 The support-files Directory</a>
                </li>
                <li>
                  <a href="apa.html#tests-directory">A.1.34 The tests Directory</a>
                </li>
                <li>
                  <a href="apa.html#tools-directory">A.1.35 The tools Directory</a>
                </li>
                <li>
                  <a href="apa.html#vc-plus-plus-files-directory">A.1.36 The VC++Files Directory</a>
                </li>
                <li>
                  <a href="apa.html#vio-directory">A.1.37 The vio Directory</a>
                </li>
                <li>
                  <a href="apa.html#zlib-directory">A.1.38 The zlib Directory</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="apb.html">B InnoDB Source Code Distribution</a>
        </li>
        <li>
          <a href="ix01.html">Index</a>
        </li>
      </ul>
    </li>
  </ul>
</div>


  </div>
  

  <div class="calibreEbNav">
    
      <a href="ch07.html" class="calibreAPrev">previous page</a>
    

    <a href="../../index.html" class="calibreAHome"> start</a>

    
      <a href="ch08.html" class="calibreANext"> next page</a>
    
  </div>

</div>

</body>
</html>
